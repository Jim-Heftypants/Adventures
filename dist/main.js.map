{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/entities/abilities.js","webpack:///./src/entities/character.js","webpack:///./src/entities/enemy.js","webpack:///./src/entities/entity.js","webpack:///./src/index.js","webpack:///./src/levels/level.js","webpack:///./src/screen_controllers/entity_controller.js","webpack:///./src/screen_controllers/fades.js"],"names":["groupHeal","entity","i","allies","length","hp","setOverlay","setHpBars","setBorder","powerSwing","target","withinAttackRange","abilityShouldCast","document","getElementsByClassName","imgName","style","backgroundColor","killEntitiy","poisonDagger","timer","int","setInterval","clearInterval","meteor","fireblastDiv","getElementById","spellTrack","img","console","log","display","targetChar","border","baseDMG","borderInterval","warriorAbilities","clericAbilities","wizardAbilities","rogueAbilities","allAbilities","lightningAutoAttack","effectDiv","pos","width","drawLine","height","maxTime","Math","floor","as","setTimeout","specialAttackEffects","createLineElement","x","y","angle","styles","setAttribute","x1","y1","x2","y2","a","b","c","sqrt","sx","sy","alpha","PI","atan2","action","slice","top","left","targetImg","interval","move","container","targetPos","imagesTouching","posChange","vectorToScalar","offsetWidth","offsetHeight","endPos","ms","deltaX","deltaY","abs","xChange","yChange","abilityList","Object","values","abilityObj","charAbilities","waAbNames","cAbNames","wiAbNames","rAbNames","wizardAttackEffect","tutorialWarrior","classCreator","tutorialCleric","tutorialWizard","tutorialRogue","Warrior","Cleric","Wizard","Rogue","charactersArr","ghettoWizard","wizard2","wizard3","EWizard","dumbCleric","cleric2","cleric3","ECleric","loserRogue","rogue2","rogue3","ERogue","punchingBag","weakWarrior","warrior2","warrior3","EWarrior","intro","healIntro","rangedIntro","puttinItAllTogetha","ezDoppelganger","level3","level2","doppelganger","Entity","klass","range","baseHP","attackSpeed","attackDMG","allied","defense","abilities","abilityNames","extraAttackAnimation","trueBaseHp","baseMS","basePos","baseAS","trueBaseDMG","dmg","trueBaseDefense","baseDefense","xp","level","nextLevelXP","abilityAvailable","abilityContainer","hotkeyDisplay","hotkey","attackImages","moveImages","baseImg","hpContainerLeft","hpContainerRight","attackOverlay","currentAction","currentAnimation","imgCycle","isAttacking","enemies","movingOutTheWay","observer","xpObserver","observationToken","window","addEventListener","addInlineStyle","src","opacity","value","levelUpDisp","fastFadeOut","ceil","push","numRepeats","attackOnFinish","addXPBar","clearIntervals","bigDiv","difference","innerWidth","checker","transform","frame","self","autoAttack","widthAddition","heightAddition","leftWidth","rightWidth","shuffle","setTargetAndAttack","movePos","selectedChar","clearTime","timeCheck","stackInterval","useAbility","animateAttack","attack","trackTarget","charactersStacked","addition","beginAttack","n","ab","cdTime","innerBoxes","colorFade","CDTimer","element","time","start","end","toString","currentColor","numIntervals","deltaZ","timeCount","j","random","op","timerDown","fastFadeIn","timerUp","slowFade","gameTag","charsDisp","closeButton","hButtons","keybindContainer","levelButtonContainer","statsContainer","levelButtons","backgroundImage","titleBackground","keybindInputs","handleKeybindInput","input","secondAction","gTContainer","closeAction","loadLevel","cursor","hButtonPartialAction","enemiesArr","enemiesObj","Level","name","enemyList","message","actionChanges","characterList","modP","percent","applyMod","mod","firstFourActions","actionFive","actionSix","actionSeven","actionEight","levelOne","levelTwo","levelThree","levelFour","levelFive","levelSix","levelSeven","levelEight","hasBeenLoaded","levelHasEnded","levels","levelsObj","currentLevelNumber","maxLevelNumber","characters","countToReach","moveFinishCount","livingEnemies","livingChars","currentAbilityBoxes","hotkeys","statChar1","statChar2","heroStatcontainer","heroStatsBlocks","heroNameplateSelectors","statSelectorNames","statImages","char","statImg","nameStat","levelStat","hpStat","dmgStat","defenseStat","innerHTML","shouldSwap","statCharSelected","swapStatDisp","e","currentTarget","removeEventListener","addBlueBorder","removeBlueBorder","charIndex","id","substr","tarId","sideNum","initiateStatSwap","addDeathListener","MutationObserver","mutations","forEach","mutationRecord","en","endGame","createXPObserver","addCharXP","addEntityEvents","cloneArr","selfIndex","splice","deSelect","beginCurrentLevel","beginLevelButton","fadeOut","beginLevel","returnToSelectPage","selectChar","selectEnemy","allyClickEvents","entityName","className","stopPropagation","enemyClickEvents","keydownEvent","key","abilityClick","arr","setAbilityBoxes","abilityBoxes","initializeGameOpening","deSelectButton","gameContainer","levelNumber","levelNameDisp","levelMessage","fadeIn","levelNameAction","setInitialTargets","loadInCharacters","chars","targetIndex","setAvailableAbilities","backgroundImg","hpBar","hotkeyInput","abilityHotkey","abilityClassName","actionEvent","observerObserve","observe","attributes","attributeFilter","charsList","projectiles","allCharsList","allEnemyList","disconnect","endMoveChars","fadeOutGame","xpObserverObserve","modEndPos","widthExtra","xpPercent","xpPerC","xpPerInterval","xpInterval","levelUp","won","theThing","actionIterations","disp","resetGame","levChars","levEnems","iterations"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","const groupHeal = (entity) => {\r\n    for (let i = 0; i < entity.allies.length; i++) {\r\n        if (entity.allies[i].hp > 0) {\r\n            entity.allies[i].hp += 20;\r\n            if (entity.allies[i].hp > 100) { entity.allies[i].hp = 100; }\r\n            entity.setOverlay(entity.allies[i]);\r\n            entity.allies[i].setHpBars();\r\n            setBorder(entity);\r\n        }\r\n    }\r\n    return 10;\r\n}\r\n\r\nconst powerSwing = (entity) => {\r\n    if (!entity.target || !entity.withinAttackRange(entity.target) || entity.target.hp < 0) {\r\n        entity.abilityShouldCast[0] = true;\r\n        // document.getElementsByClassName(entity.imgName + '-inner-ability-divs')[0].style.border = '5px solid black';\r\n        document.getElementsByClassName(entity.imgName + '-inner-ability-divs')[0].style.backgroundColor = 'lawngreen';\r\n        return false;\r\n    }\r\n    entity.target.hp -= 20;\r\n    entity.target.setHpBars();\r\n    setBorder(entity);\r\n    if (entity.target.hp <= 0) {\r\n        entity.killEntitiy(entity.target);\r\n    }\r\n    return 10;\r\n}\r\n\r\nconst poisonDagger = (entity) => {\r\n    if (!entity.target || !entity.withinAttackRange(entity.target) || entity.target.hp < 0) {\r\n        entity.abilityShouldCast[0] = true;\r\n        // document.getElementsByClassName(entity.imgName + '-inner-ability-divs')[0].style.border = '5px solid black';\r\n        document.getElementsByClassName(entity.imgName + '-inner-ability-divs')[0].style.backgroundColor = 'lawngreen';\r\n        return false;\r\n    }\r\n    let timer = 0;\r\n    let int = setInterval(() => {\r\n        timer++;\r\n        entity.target.hp -= 4\r\n        entity.target.setHpBars();\r\n        setBorder(entity);\r\n        if (entity.target.hp <= 0) {\r\n            entity.killEntitiy(entity.target);\r\n            clearInterval(int)\r\n        }\r\n        if (timer > 5) {\r\n            clearInterval(int);\r\n        }\r\n    }, 500)\r\n    return 10;\r\n}\r\n\r\nconst meteor = (entity) => {\r\n    if (!entity.target || entity.target.hp < 0) {\r\n        entity.abilityShouldCast[0] = true;\r\n        // document.getElementsByClassName(entity.imgName + '-inner-ability-divs')[0].style.border = '5px solid black';\r\n        document.getElementsByClassName(entity.imgName + '-inner-ability-divs')[0].style.backgroundColor = 'lawngreen';\r\n        return false;\r\n    }\r\n    const fireblastDiv = document.getElementById('fireblast-div');\r\n    spellTrack(fireblastDiv, entity, entity.target, (entity, img) => {\r\n        console.log('entity: ', entity, \" img: \", img);\r\n        img.style.display = 'none';\r\n        entity.target.hp -= 25;\r\n        entity.target.setHpBars();\r\n        setBorder(entity);\r\n        if (entity.target.hp <= 0) {\r\n            entity.killEntitiy(entity.target);\r\n        }\r\n    });\r\n    return 10;\r\n}\r\n\r\nfunction setBorder(entity) {\r\n    const targetChar = entity.target;\r\n    if (targetChar.img.style.border !== \"5px solid gold\") {\r\n        if (entity.baseDMG > 0) {\r\n            targetChar.img.style.border = \"4px solid red\";\r\n        } else {\r\n            targetChar.img.style.border = \"4px solid green\";\r\n        }\r\n        let borderInterval = setInterval(() => {\r\n            if (targetChar.img.style.border !== \"5px solid gold\") {\r\n                targetChar.img.style.border = \"none\";\r\n            }\r\n            clearInterval(borderInterval);\r\n        }, 500);\r\n    }\r\n}\r\n\r\nconst warriorAbilities = [powerSwing];\r\nconst clericAbilities = [groupHeal];\r\nconst wizardAbilities = [meteor];\r\nconst rogueAbilities = [poisonDagger];\r\nexport const allAbilities = [warriorAbilities, clericAbilities, wizardAbilities, rogueAbilities];\r\n\r\n\r\nconst lightningAutoAttack = (entity) => {\r\n    const effectDiv = document.getElementById(entity.imgName + '-extra-effect');\r\n    const pos = [entity.pos[0] + 30 + entity.img.width / 2, entity.pos[1] + 38];\r\n    drawLine(pos[0], pos[1], entity.target.pos[0] + entity.target.img.width/2, entity.target.pos[1] + entity.target.img.height/2, effectDiv);\r\n    effectDiv.style.display = '';\r\n    const maxTime = Math.floor(entity.as / 8);\r\n    setTimeout(() => { effectDiv.style.display = 'none'; }, maxTime);\r\n}\r\n\r\nexport const specialAttackEffects = [lightningAutoAttack];\r\n\r\nfunction createLineElement(x, y, length, angle, img) {\r\n    var styles = 'width: ' + length + 'px; '\r\n        + 'height: 0px; '\r\n        + '-moz-transform: rotate(' + angle + 'rad); '\r\n        + '-webkit-transform: rotate(' + angle + 'rad); '\r\n        + '-o-transform: rotate(' + angle + 'rad); '\r\n        + '-ms-transform: rotate(' + angle + 'rad); '\r\n        + 'position: absolute; '\r\n        + 'top: ' + y + 'px; '\r\n        + 'left: ' + x + 'px; ';\r\n    img.setAttribute('style', styles);\r\n}\r\n\r\nfunction drawLine(x1, y1, x2, y2, img) {\r\n    const a = x1 - x2,\r\n        b = y1 - y2,\r\n        c = Math.sqrt(a * a + b * b);\r\n\r\n    const sx = (x1 + x2) / 2,\r\n        sy = (y1 + y2) / 2;\r\n\r\n    const x = sx - c / 2,\r\n        y = sy;\r\n\r\n    const alpha = Math.PI - Math.atan2(-b, a);\r\n\r\n    createLineElement(x, y, c, alpha, img);\r\n}\r\n\r\n// function linedraw(entity, img) {\r\n//     const pos = entity.pos.slice();\r\n//     pos[0] += entity.img.width / 2; pos[1] += entity.img.height / 2;\r\n//     const targetPos = entity.target.pos.slice();\r\n//     targetPos[0] += entity.target.img.width / 2; targetPos[1] += entity.target.img.height / 2;\r\n//     const arcTan = Math.atan((pos[1] - targetPos[1]) / (targetPos[0] - pos[0]));\r\n//     let angle =  arcTan * 180 / Math.PI;\r\n//     if (pos[0] < targetPos[0] && pos[1] > targetPos[1]) {\r\n//         // neg angle\r\n//         img.style.top = Math.floor(pos[1]) + 'px';\r\n//         img.style.left = Math.floor(pos[0]) + 'px';\r\n//     } else if (pos[0] > targetPos[0] && pos[1] > targetPos[1]) {\r\n//         // pos angle\r\n//         img.style.top = Math.floor(pos[1]) + 'px';\r\n//         img.style.left = Math.floor(targetPos[0]) + 'px';\r\n//     } else if (pos[0] < targetPos[0] && pos[1] < targetPos[1]) {\r\n//         // pos angle\r\n//         img.style.top = Math.floor(targetPos[1]) + 'px';\r\n//         img.style.left = Math.floor(pos[0]) + 'px';\r\n//     } else {\r\n//         // neg angle\r\n//         img.style.top = Math.floor(targetPos[1]) + 'px';\r\n//         img.style.left = Math.floor(targetPos[0]) + 'px';\r\n//     }\r\n//     console.log('angle: ', angle);\r\n//     const length = Math.floor(Math.sqrt((pos[0] - targetPos[0]) * (pos[0] - targetPos[0]) + (pos[1] - targetPos[1]) * (pos[1] - targetPos[1])));\r\n//     console.log('length: ', length);\r\n//     img.style.width = length + 'px';\r\n//     img.style.transform = \"rotate(\" + (-angle) + \"deg)\";\r\n// }\r\n\r\nfunction spellTrack(img, entity, target, action) {\r\n    // console.log('img: ', img, ' entity: ', entity, ' target: ', target, ' action: ', action);\r\n    const pos = entity.pos.slice();\r\n    pos[0] += entity.img.width/2; pos[1] += entity.img.height/2;\r\n    img.style.top = Math.floor(pos[1]) + 'px';\r\n    img.style.left = Math.floor(pos[0]) + 'px';\r\n    img.style.display = '';\r\n    const targetImg = target.img;\r\n    let interval = setInterval(() => move(), 20);\r\n    function move() {\r\n        if (img.style.display === 'none' || target.container.style.display === 'none') {\r\n            clearInterval(interval);\r\n            img.style.display = 'none';\r\n            // console.log('no target to hit with: ', img);\r\n            return;\r\n        }\r\n        const targetPos = target.pos.slice();\r\n        targetPos[0] += targetImg.width/2; targetPos[1] += targetImg.height/2;\r\n        if (imagesTouching(img, pos, targetImg, targetPos)) {\r\n            console.log('images touching');\r\n            clearInterval(interval);\r\n            action(entity, img);\r\n        } else {\r\n            let posChange = vectorToScalar(pos, targetPos);\r\n            pos[0] += posChange[0]; pos[1] += posChange[1];\r\n            img.style.top = Math.floor(pos[1]) + 'px';\r\n            img.style.left = Math.floor(pos[0]) + 'px';\r\n        }\r\n    }\r\n}\r\n\r\nfunction imagesTouching(img, pos, targetImg, targetPos) {\r\n    if ((pos[0] < targetPos[0] && pos[0] + img.offsetWidth > targetPos[0]) ||\r\n        (pos[0] < targetPos[0] + targetImg.width && pos[0] + img.offsetWidth > targetPos[0] + targetImg.width)) {\r\n        console.log('passed width check');\r\n        return true;\r\n    }\r\n    if ((pos[1] < targetPos[1] && pos[1] + img.offsetHeight  > targetPos[1]) ||\r\n        (pos[1] < targetPos[1] + targetImg.height && pos[1] + img.offsetHeight  > targetPos[1] + targetImg.height)) {\r\n        console.log('height check passed');\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\r\nfunction vectorToScalar(pos, endPos) {\r\n    const ms = 15;\r\n    const deltaX = pos[0] - endPos[0];\r\n    const deltaY = pos[1] - endPos[1];\r\n    if (Math.abs(deltaX) + Math.abs(deltaY) === 0) { return ([0, 0]); }\r\n    let xChange = -1 * ms * (deltaX / (Math.abs(deltaX) + Math.abs(deltaY)));\r\n    let yChange = -1 * ms * (deltaY / (Math.abs(deltaY) + Math.abs(deltaX)));\r\n    if (xChange === 0 || xChange === -0) {\r\n        xChange = 0;\r\n        // const numRepeats = Math.abs(Math.floor(deltaY / yChange)); // not needed for a track system\r\n        return ([xChange, yChange])\r\n    }\r\n    if (yChange === -0) { yChange = 0; }\r\n    // const numRepeats = Math.abs(Math.floor(deltaX / xChange));\r\n    return ([xChange, yChange])\r\n}","import classCreator from './entity';\nimport * as abilityObj from './abilities.js';\n\n// console.log('ab list', abilityObj);\nconst abilityList = Object.values(abilityObj);\n// console.log('ab array list', abilityObj)\n// console.log(abilityList[0]);\nconst charAbilities = abilityList[0];\nconst warriorAbilities = charAbilities[0];\nconst clericAbilities = charAbilities[1];\nconst wizardAbilities = charAbilities[2];\nconst rogueAbilities = charAbilities[3];\n\nconst waAbNames = ['Heroic Strike'];\nconst cAbNames = ['Prayer of Healing'];\nconst wiAbNames = ['Fire Blast'];\nconst rAbNames = ['Poison Shiv'];\n\nconst specialAttackEffects = abilityList[1];\nconst wizardAttackEffect = specialAttackEffects[0];\n\n/*\nclassName\nrange\nmaxHP\nMS\nAS\nDMG\ntrue\nimgName\npos\ndefense\nab\nabNames\nspecialEffect\n*/\n\n// tutorials\nconst tutorialWarrior = new classCreator('Warrior', 10, 100, 10, 1000, 8, true, \"a1\", [450, 500], 20, warriorAbilities, waAbNames);\nconst tutorialCleric = new classCreator('Cleric', 'infinite', 100, 10, 1500, -8, true, \"a2\", [200, 300], 10, clericAbilities, cAbNames);\nconst tutorialWizard = new classCreator('Wizard', \"infinite\", 100, 10, 2000, 16, true, \"a3\", [200, 600], 12, wizardAbilities, wiAbNames, wizardAttackEffect);\nconst tutorialRogue = new classCreator(\"Rogue\", 10, 100, 10, 800, 8, true, \"a4\", [900, 200], 16, rogueAbilities, rAbNames);\n\n// tank\nconst Warrior = new classCreator('Warrior', 10, 100, 10, 1000, 10, true, \"a1\", [100, 400], 20, warriorAbilities, waAbNames);\n\n// heals\nconst Cleric = new classCreator('Cleric', 'infinite', 100, 10, 1500, -8, true, \"a2\", [400, 100], 10, clericAbilities, cAbNames);\n\n// rdps\nconst Wizard = new classCreator('Wizard', \"infinite\", 100, 10, 2000, 20, true, \"a3\", [100, 100], 12, wizardAbilities, wiAbNames, wizardAttackEffect);\n\n// mdps\nconst Rogue = new classCreator(\"Rogue\", 10, 100, 10, 800, 10, true, \"a4\", [900, 500], 16, rogueAbilities, rAbNames)\n\n// export const tutorialChars = [tutorialWarrior, tutorialCleric, tutorialWizard, tutorialRogue];\nconst charactersArr = [Warrior, Cleric, Wizard, Rogue];\nexport default charactersArr;","import classCreator from './entity.js';\nimport * as abilityObj from './abilities.js';\n\nconst abilityList = Object.values(abilityObj);\n\nconst specialAttackEffects = abilityList[1];\nconst wizardAttackEffect = specialAttackEffects[0];\n\n/*\nclassName\nrange\nmaxHP\nMS\nAS\nDMG\nfalse\nimg\npos\ndefense\nab\nabNames\nspecialEffect\n*/\n\n// rdps\nconst tutorialWizard = new classCreator('EWizard', 'infinite', 60, 10, 1500, 7, false, 'e3', [1000, 600], 8, null, null, wizardAttackEffect);\nconst ghettoWizard = new classCreator('EWizard', 'infinite', 60, 10, 1500, 12, false, 'e3', [500, 500], 8, null, null, wizardAttackEffect);\nconst wizard2 = new classCreator('EWizard', 'infinite', 70, 10, 1500, 13, false, 'e3', [500, 500], 8, null, null, wizardAttackEffect);\nconst wizard3 = new classCreator('EWizard', 'infinite', 70, 10, 1500, 13, false, 'e1', [700, 200], 8, null, null, wizardAttackEffect); // fix\nconst EWizard = new classCreator('EWizard', 'infinite', 100, 10, 2000, 20, false, \"e3\", [500, 500], 12, null, null, wizardAttackEffect);\n\n// heals\nconst tutorialCleric = new classCreator('ECleric', 'infinite', 60, 10, 2000, -7, false, \"e2\", [1000, 300], 8)\nconst dumbCleric = new classCreator('ECleric', 'infinite', 60, 10, 2000, -8, false, \"e2\", [1000, 100], 8);\nconst cleric2 = new classCreator('ECleric', 'infinite', 70, 10, 1750, -11, false, \"e2\", [1000, 100], 8);\nconst cleric3 = new classCreator('ECleric', 'infinite', 70, 10, 1750, -11, false, \"e4\", [300, 400], 8); // fix\nconst ECleric = new classCreator('ECleric', 'infinite', 100, 10, 1500, -8, false, \"e2\", [1000, 100], 10);\n\n// mdps\nconst tutorialRogue = new classCreator(\"ERogue\", 10, 60, 10, 1200, 6, false, \"e4\", [700, 200], 14);\nconst loserRogue = new classCreator(\"ERogue\", 10, 60, 10, 1200, 8, false, \"e4\", [700, 200], 14);\nconst rogue2 = new classCreator(\"ERogue\", 10, 60, 10, 1200, 8, false, \"e4\", [700, 200], 14);\nconst rogue3 = new classCreator(\"ERogue\", 10, 60, 10, 1200, 8, false, \"e2\", [500, 500], 14);\nconst ERogue = new classCreator(\"ERogue\", 10, 100, 10, 800, 10, false, \"e4\", [700, 200], 16);\n\n// tank\nconst punchingBag = new classCreator('EWarrior', 10, 50, 10, 1000, 1, false, \"e1\", [650, 500], 20);\nconst tutorialWarrior = new classCreator('EWarrior', 10, 80, 10, 1000, 6, false, \"e1\", [650, 500], 20);\nconst weakWarrior = new classCreator('EWarrior', 10, 60, 10, 1000, 8, false, \"e1\", [300, 400], 20);\nconst warrior2 = new classCreator('EWarrior', 10, 60, 10, 1000, 8, false, \"e1\", [300, 400], 20);\nconst warrior3 = new classCreator('EWarrior', 10, 60, 10, 1000, 8, false, \"e3\", [1000, 100], 20); // fix\nconst EWarrior = new classCreator('EWarrior', 10, 120, 10, 1000, 10, false, \"e1\", [300, 400], 20);\n\n// level 1\nexport const intro = [punchingBag];\n\n// level 2\nexport const healIntro = [tutorialWarrior, tutorialCleric];\n\n// level 3\nexport const rangedIntro = [tutorialWarrior, tutorialCleric, tutorialWizard];\n\n// level 4\nexport const puttinItAllTogetha = [tutorialWarrior, tutorialCleric, tutorialWizard, tutorialRogue];\n\n// level 5\nexport const ezDoppelganger = [weakWarrior, dumbCleric, ghettoWizard, loserRogue];\n\n// level 6\nexport const level3 = [wizard2, wizard3, cleric2, cleric3];\n\n// level 7\nexport const level2 = [rogue2, rogue3, warrior2, warrior3];\n\n// level 8\nexport const doppelganger = [EWarrior, ECleric, EWizard, ERogue];\n","class Entity { // this. is selectedChar\n    constructor(klass=\"\", range=0, baseHP=0, ms=0, attackSpeed=0, attackDMG, allied, img=\"\", pos=[0, 0], defense=0,\n                 abilities=[], abilityNames=[], extraAttackAnimation=null) {\n        this.klass = klass;\n\n        this.range = range;\n        this.trueBaseHp = baseHP;\n        this.baseHP = baseHP;\n        this.hp = this.baseHP;\n        this.baseMS = ms; // speed / time\n        this.ms = this.baseMS;\n        this.allied = allied; // true === player character\n        this.pos = pos;\n        this.basePos = []; this.basePos[0] = pos[0]; this.basePos[1] = pos[1];\n        this.baseAS = attackSpeed;\n        this.as = this.baseAS;\n        this.trueBaseDMG = attackDMG;\n        this.baseDMG = attackDMG;\n        this.dmg = this.baseDMG;\n        this.trueBaseDefense = defense;\n        this.baseDefense = defense\n        this.defense = this.baseDefense;\n        if (this.allied) {\n            this.xp = 0;\n            this.level = 1;\n            this.nextLevelXP = 100;\n        }\n\n        this.allAbilities = abilities;\n        this.abilities = [];\n        this.abilityNames = abilityNames;\n        this.abilityAvailable = [true, true, true, true];\n        this.abilityShouldCast = [false, false, false, false];\n        this.abilityContainer;\n\n        this.hotkeyDisplay;\n        this.hotkey;\n\n        this.imgName = img;\n        this.img; // base standing image\n        this.attackImages; // cycle through array of images\n        this.moveImages; // cycle through array of images\n        this.baseImg; // standard stand image\n        this.container;\n        this.hpContainerLeft;\n        this.hpContainerRight;\n        this.attackOverlay;\n\n        this.currentAction;\n        this.currentAnimation;\n        this.imgCycle = 0;\n        this.isAttacking = false;\n        this.extraAttackAnimation = extraAttackAnimation;\n\n        this.target;\n\n        this.allies;\n        this.enemies;\n\n        this.movingOutTheWay = false;\n\n        this.observer;\n        this.xpObserver;\n        this.observationToken = true;\n\n        window.addEventListener('load', () => {\n            this.addInlineStyle();\n        });\n    }\n\n    addInlineStyle() {\n        this.img = document.getElementsByClassName(this.imgName + \"-image-display\")[0];\n        this.baseImg = document.getElementsByClassName(this.klass)[0];\n        this.img.src = this.baseImg.src;\n        this.attackImages = document.getElementsByClassName(this.klass);\n        this.container = document.getElementById(`${this.imgName}-display`);\n        this.container.style.opacity = 0; // fading in so started at op 0\n        this.container.style.display = 'none';\n        this.img.style.display = \"\";\n        this.container.style.left = this.pos[0] + \"px\";\n        this.container.style.top = this.pos[1] + \"px\";\n        this.hotkeyDisplay = document.getElementById(this.imgName + '-hotkey-display');\n        this.hotkey = document.getElementById(this.imgName + '-keybind').value;\n        this.hpContainerLeft = document.getElementById(this.imgName + '-hp-left');\n        this.hpContainerRight = document.getElementById(this.imgName + '-hp-right');\n        this.attackOverlay = document.getElementById(this.imgName + '-effect-overlay');\n        if (this.allied) {\n            this.abilityContainer = document.getElementById(this.imgName + '-ability-full-container');\n        }\n    }\n\n    levelUp() {\n        const levelUpDisp = document.getElementById(this.imgName + '-level-up');\n        // console.log('levelUpDisp: ', levelUpDisp);\n        levelUpDisp.style.display = '';\n        fastFadeOut(levelUpDisp);\n        this.xp -= this.nextLevelXP;\n        this.nextLevelXP += (this.nextLevelXP * 0.1);\n        this.level++;\n        this.baseDefense += Math.ceil(this.trueBaseDefense * 0.05);\n        this.baseDMG += Math.ceil(this.trueBaseDMG * 0.1);\n        this.baseHP += Math.ceil(this.trueBaseHp * 0.1);\n        switch (this.level) {\n            case (5):\n                this.abilities.push(this.allAbilities[0]);\n                break;\n            case (10):\n                this.abilities.push(this.allAbilities[1]);\n                break;\n            case (15):\n                this.abilities.push(this.allAbilities[2]);\n                break;\n            case (20):\n                this.abilities.push(this.allAbilities[3]);\n                break;\n        }\n    }\n\n    vectorToScalar(endPos) {\n        const deltaX = this.pos[0] - endPos[0];\n        const deltaY = this.pos[1] - endPos[1];\n        if (Math.abs(deltaX) + Math.abs(deltaY) === 0) {\n            return ([0, 0, 0]);\n        }\n        let xChange = -1 * this.ms * (deltaX / (Math.abs(deltaX) + Math.abs(deltaY)));\n        let yChange = -1 * this.ms * (deltaY / (Math.abs(deltaY) + Math.abs(deltaX)));\n        if (xChange === 0 || xChange === -0) {\n            xChange = 0;\n            const numRepeats = Math.abs(Math.floor(deltaY / yChange));\n            return ([xChange, yChange, numRepeats])\n        }\n        if (yChange === -0) {\n            yChange = 0;\n        }\n        \n        const numRepeats = Math.abs(Math.floor(deltaX / xChange));\n        return ([xChange, yChange, numRepeats])\n    }\n\n    move(endPos, attackOnFinish = false, addXPBar=false) {\n        this.movingOutTheWay = true;\n        this.clearIntervals();\n        endPos[0] = Math.floor(endPos[0] - (this.img.width * (3/2)));\n        endPos[1] = Math.floor(endPos[1] - (this.img.height * (3/4)));\n        let pos = this.pos;\n        let posChange = this.vectorToScalar(endPos);\n        // console.log(\"pos change on move\", posChange);\n        const bigDiv = document.getElementById('game-container');\n        const difference = Math.floor((window.innerWidth - bigDiv.offsetWidth) / 2);\n        const checker = difference + Math.floor(bigDiv.offsetWidth);\n        if (pos[0] - endPos[0] < 0) {\n            this.img.style.transform = \"scaleX(1)\";\n        } else {\n            this.img.style.transform = \"scaleX(-1)\";\n        }\n        this.currentAction = setInterval(() => frame(this), 20);\n        function frame(self) {\n            if (posChange[2] === 0) {\n            // close animation\n                clearInterval(self.currentAction);\n                self.movingOutTheWay = false;\n                pos[0] = Math.floor(pos[0]); pos[1] = Math.floor(pos[1]);\n                if (attackOnFinish) {\n                    // console.log('self in move end: ', self);\n                    self.autoAttack(attackOnFinish); // needs editing\n                } else if (addXPBar) {\n                    // console.log('move ended');\n                    self.img.style.transform = \"scaleX(1)\";\n                    self.img.style.border = '5px solid gold';\n                }\n            } else { // need to add something for if (attackOnFinish) then update move destination to be the target's new position (with the modifiers)\n            // begin some kind of animation\n                pos[0] += posChange[0]; pos[1] += posChange[1];\n                if (pos[0] + Math.floor((3 * self.img.width) / 2) + 50 > checker) { pos[0] = checker - (Math.floor((3 * self.img.width) / 2) + 50);}\n                if (pos[0] < 15) {pos[0] = 15;}\n                if (pos[1] + Math.floor(self.img.height) > 850) { pos[1] = 850 - Math.floor(self.img.height);}\n                if (pos[1] < 15) {pos[1] = 15;}\n                // console.log('posChange: ', posChange);\n                // console.log('pos: ', pos);\n\n                self.container.style.top = Math.floor(pos[1]) + 'px';\n                self.container.style.left = Math.floor(pos[0]) + 'px';\n                posChange[2] -= 1;\n            }\n        }\n    }\n\n    withinAttackRange(target) {\n        if (this.range === 'infinite') { return true; }\n        const widthAddition = Math.floor((this.img.width / 2) + (target.img.width / 2));\n        if (this.pos[0] > target.pos[0] - widthAddition - this.range && this.pos[0] < target.pos[0] + widthAddition + this.range) {\n            const heightAddition = Math.floor(this.img.height / 4);\n            if (this.pos[1] > target.pos[1] - heightAddition && this.pos[1] < target.pos[1] + heightAddition) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    killEntitiy(entity) {\n        // console.log(entity.klass, \"killed\");\n        clearInterval(entity.currentAction);\n        clearInterval(entity.currentAnimation);\n        entity.img.src = entity.baseImg.src;\n        if (entity.abilityContainer) { entity.abilityContainer.style.display = 'none'; }\n        entity.hp = -100;\n        entity.container.style.display = \"none\";\n    }\n\n    setHpBars() {\n        let leftWidth = Math.floor((this.hp / this.baseHP) * 100);\n        let rightWidth = 100 - leftWidth;\n        if (leftWidth < 0) leftWidth = 0;\n        if (rightWidth < 0) rightWidth = 0;\n        this.hpContainerLeft.style.width = leftWidth + '%';\n        this.hpContainerRight.style.width = rightWidth + '%';\n    }\n\n    setTargetAndAttack() {\n        // console.log(this.klass, \"has finished attacking\", this.target.klass);\n\n        if (this.baseDMG > 0) {\n            this.enemies = shuffle(this.enemies);\n            for (let i = 0; i < this.enemies.length; i++) {\n                if (this.enemies[i].hp > 0) {\n                    this.target = this.enemies[i];\n                }\n            }\n            if (this.target.hp < 0) { return; }\n        } else {\n            this.allies = shuffle(this.allies);\n            for (let i = 0; i < this.allies.length; i++) {\n                if (this.allies[i].hp > 0) {\n                    this.target = this.allies[i];\n                }\n            }\n            if (this.target.hp < 0) { return; }\n        }\n        // console.log(this.klass, \"is now attacking\", this.target.klass);\n        this.autoAttack(this.target);\n    }\n\n    charactersStacked() {\n        for (let i = 0; i < this.allies.length; i++) {\n            if (!this.allies[i].movingOutTheWay) {                \n                const widthAddition = Math.floor(this.img.width / 2);\n                if (this.pos[0] > this.allies[i].pos[0] - widthAddition && this.pos[0] < this.allies[i].pos[0] + widthAddition) {\n                    const heightAddition = Math.floor(this.img.height / 2);\n                    if (this.pos[1] > this.allies[i].pos[1] - heightAddition && this.pos[1] < this.allies[i].pos[1] + heightAddition) {\n                        // console.log(this.klass, \"is moving to avoid\", this.allies[i].klass);\n                        return true;\n                    }\n                }\n            }\n        }\n        return false;\n    }\n\n    trackTarget() { // hot code\n        clearInterval(this.currentAction);\n        clearInterval(this.currentAnimation);\n        this.img.src = this.baseImg.src;\n        const bigDiv = document.getElementById('game-container');\n        const difference = Math.floor((window.innerWidth - bigDiv.offsetWidth) / 2);\n        const checker = difference + Math.floor(bigDiv.offsetWidth);\n        this.currentAction = setInterval(() => move(this), 20);\n        function move(self) {\n            if (self.target.container.style.display === 'none') {\n                self.clearIntervals();\n                if (!self.allied) {\n                    self.setTargetAndAttack()\n                }\n                return;\n            }\n            if (self.withinAttackRange(self.target)) {\n                clearInterval(self.currentAction);\n                self.autoAttack(self.target);\n                // console.log('auto attack called from track');\n            } else {\n                const pos = self.pos;\n                const movePos = self.target.pos.slice();\n                if (pos[0] - movePos[0] < 0) {\n                    movePos[0] -= self.target.img.width;\n                    self.img.style.transform = \"scaleX(1)\";\n                } else {\n                    movePos[0] += self.target.img.width;\n                    self.img.style.transform = \"scaleX(-1)\";\n                }\n                let posChange = self.vectorToScalar(movePos);\n                pos[0] += posChange[0]; pos[1] += posChange[1];\n                if (pos[0] + Math.floor(self.img.width) > checker) { pos[0] = checker - Math.floor(self.img.width); }\n                if (pos[0] < 15) { pos[0] = 15; }\n                if (pos[1] + Math.floor(self.img.height) > 850) { pos[1] = 850 - Math.floor(self.img.height); }\n                if (pos[1] < 15) { pos[1] = 15; }\n                self.container.style.top = Math.floor(pos[1]) + 'px';\n                self.container.style.left = Math.floor(pos[0]) + 'px';\n            }\n        }\n    }\n\n    setOverlay(targetChar) {\n        this.attackOverlay.style.top = (targetChar.pos[1] + 40) + 'px';\n        this.attackOverlay.style.left = targetChar.pos[0] + 'px';\n        this.attackOverlay.style.width = targetChar.img.width + 'px';\n        this.attackOverlay.style.height = targetChar.img.height + 'px';\n        this.attackOverlay.style.display = '';\n        const selectedChar = this;\n        const clearTime = Math.floor(this.as / 2);\n        let timeCheck = 0;\n        let stackInterval = setInterval(() => {\n            selectedChar.attackOverlay.style.top = targetChar.pos[1] + 40 + 'px';\n            selectedChar.attackOverlay.style.left = targetChar.pos[0] + 'px';\n            timeCheck += 20;\n            if (timeCheck >= clearTime || targetChar.img.style.display === 'none') {\n                clearInterval(stackInterval);\n                selectedChar.attackOverlay.style.display = 'none';\n            }\n        }, 20);\n    }\n\n    beginAttack(targetChar) {\n        // make some kind of animation start\n        this.clearIntervals();\n        this.isAttacking = true;\n        if (this.allied) {\n            for (let i = 0; i < 4; i++) {\n                // console.log(this.abilityShouldCast[i]);\n                if (this.abilityShouldCast[i]) {\n                    this.abilityShouldCast[i] = false;\n                    this.useAbility(i);\n                }\n            }\n        }\n        this.currentAnimation = setInterval(() => this.animateAttack(this), Math.floor(this.as / 4))\n        // this.currentAction = setInterval(() => attack(this), this.as);\n    }\n\n    animateAttack() {\n        if (this.attackImages) {\n            if (this.target.pos[0] < this.pos[0]) {\n                this.img.style.transform = \"scaleX(-1)\";\n            } else {\n                this.img.style.transform = \"scaleX(1)\";\n            }\n            this.imgCycle += 1;\n            if (this.imgCycle === 3) {\n                if (this.extraAttackAnimation) {\n                    this.extraAttackAnimation(this);\n                }\n                this.attack();\n            }\n            this.imgCycle = this.imgCycle % 4;\n            this.img.src = this.attackImages[this.imgCycle].src;\n        }\n    }\n\n    attack() {\n        if (!this.target || this.target.hp <= 0) {\n            this.clearIntervals();\n            if (!this.allied) {\n                // chose another hero to attack\n                this.setTargetAndAttack();\n                // maybe add something in for player to auto target upon deaths ?\n            }\n            return;\n        }\n        if (!this.withinAttackRange(this.target)) {\n            this.trackTarget();\n            return;\n        } else {\n            this.target.hp -= (this.dmg * 15 / this.target.defense);\n            if (this.attackOverlay) {\n                this.setOverlay(this.target);\n            }\n            if (this.target.hp > this.target.baseHP) { this.target.hp = this.target.baseHP; }\n            if (!this.target.allied && this.allied && this.target.baseDMG > 0 && this.defense > this.target.target.defense) {\n                this.target.target = this;\n                this.target.clearIntervals();\n                this.target.autoAttack(this.target.target);\n            }\n            this.target.setHpBars();\n\n            if (this.target.hp <= 0) {\n                this.clearIntervals();\n                // console.log(this.target, ' hp ', this.target.hp);\n                this.killEntitiy(this.target);\n                if (!this.allied) {\n                    // chose another hero to attack\n                    this.setTargetAndAttack();\n                }\n            }\n            // console.log(\"border style: \", this.target.img.style.border);\n            if (this.target.img.style.border !== \"5px solid gold\") {\n                if (this.baseDMG > 0) {\n                    this.target.img.style.border = \"3px solid red\";\n                } else {\n                    this.target.img.style.border = \"3px solid green\";\n                } \n                setTimeout(() => {\n                    if (this.target && this.target.img.style.border !== \"5px solid gold\") {\n                        this.target.img.style.border = \"none\";\n                    }\n                }, 500);\n            }\n            if (this.range !== 'infinite' && this.charactersStacked()) {\n                this.movingOutTheWay = true;\n                const addition = Math.floor(this.img.width / 2);\n                if (this.img.style.transform === \"scaleX(-1)\") {\n                    // move to left side of target\n                    this.img.style.transform = \"scaleX(1)\";// - (addition / 4)\n                    this.move([this.target.pos[0] + addition, this.target.pos[1] + Math.floor(this.target.img.height * 3 / 4)], this.target)\n                } else {\n                    // move to right side of target;\n                    this.img.style.transform = \"scaleX(-1)\";\n                    this.move([this.target.pos[0] + (5 * addition), this.target.pos[1] + Math.floor(this.target.img.height * 3 / 4)], this.target)\n                }\n            }\n        }\n    }\n\n    autoAttack(targetChar) {\n        // console.log('auto attack target: ', targetChar);\n        if (this.allied) { this.target = targetChar; } // can refactor out targets\n        if (this.withinAttackRange(targetChar)) {\n            if (this.pos[0] < targetChar.pos[0]) {\n                this.img.style.transform = \"scaleX(1)\";\n            } else {\n                this.img.style.transform = \"scaleX(-1)\";\n            }\n            this.beginAttack(targetChar);\n        } else {\n            this.trackTarget();\n        }\n    }\n\n    clearIntervals() {\n        clearInterval(this.currentAction);\n        clearInterval(this.currentAnimation);\n        this.img.src = this.baseImg.src;\n        this.imgCycle = 0;\n        this.isAttacking = false;\n    }\n\n    useAbility(n) {\n        if (!this.abilityAvailable[n] || this.abilities.length === 0) {\n            return;\n        }\n        // console.log('ability', n, 'attempted');\n        this.abilityAvailable[n] = false;\n        const ab = this.abilities[n];\n        // console.log('ability: ', ab);\n        const cdTime = ab(this);\n        if (cdTime === false) {\n            // console.log('no target for ability');\n            this.abilityAvailable[n] = true;\n            return;\n        }\n        // console.log('seconds for ability cd: ', cdTime);\n        const innerBoxes = document.getElementsByClassName(this.imgName + '-inner-ability-divs');\n        // innerBoxes[n].style.animation = `inner-ability-animate ${cdTime}s linear 0s 1`; // didnt work\n        colorFade(innerBoxes[n], cdTime, [255, 0, 0], [0, 0, 255]);\n        let CDTimer = setInterval(() => {\n            this.abilityAvailable[n] = true;\n            // console.log(this.imgName, ' ability ', n, ' off CD');\n            clearInterval(CDTimer);\n        }, (cdTime * 1000));\n    }\n\n}\n\nexport default Entity;\n\n\nfunction colorFade(element, time, start, end) {\n    element.style.width = '100%';\n    element.style.border = 'none';\n    element.style.backgroundColor = 'rgb(' + start.toString() + ')';\n    let currentColor = start.slice();\n    const numIntervals = time * 5;\n    let deltaX = Math.floor((end[0] - start[0]) / numIntervals);\n    let deltaY = Math.floor((end[1] - start[1]) / numIntervals);\n    let deltaZ = Math.floor((end[2] - start[2]) / numIntervals);\n    let timeCount = 0;\n    let interval = setInterval(() => {\n        currentColor[0] += deltaX;\n        currentColor[1] += deltaY;\n        currentColor[2] += deltaZ;\n        element.style.backgroundColor = 'rgb(' + currentColor.toString() + ')';\n        timeCount++;\n        if (timeCount >= (time * 5)) {\n            element.style.backgroundColor = 'rgb(' + end.toString() + ')';\n            element.style.width = '95%';\n            element.style.border = '5px solid gold';\n            // console.log('color fade complete');\n            clearInterval(interval);\n        }\n\n    }, 200);\n}\n\nfunction shuffle(a) {\n    for (let i = a.length - 1; i > 0; i--) {\n        const j = Math.floor(Math.random() * (i + 1));\n        [a[i], a[j]] = [a[j], a[i]];\n    }\n    return a;\n}\n\nfunction fastFadeOut(element, action = null) {\n    let op = 25;\n    let timerDown = setInterval(function () {\n        if (op <= 0) {\n            clearInterval(timerDown);\n            element.style.display = 'none';\n            if (action) { action(); }\n        }\n        element.style.opacity = op / 25;\n        op -= 1;\n        if (element.style.display === 'none') {\n            clearInterval(timerDown);\n            element.style.opacity = 0;\n        }\n    }, 25);\n}\n\nfunction fastFadeIn(element, action = null) {\n    let op = 0;\n    let timerUp = setInterval(function () {\n        if (op >= 20) {\n            clearInterval(timerUp);\n            if (action) { action(); }\n        }\n        element.style.opacity = op / 20;\n        op += 1;\n        if (element.style.display === 'none') {\n            clearInterval(timerUp);\n            element.style.opacity = 0;\n        }\n    }, 25);\n}","import loadLevel from './screen_controllers/entity_controller';\n\nfunction slowFade(element, action = null) { let op = 80; let timerDown = setInterval(function () {if (op <= 0) { clearInterval(timerDown);\n    element.style.display = 'none'; if (action) { action(); } } element.style.opacity = op / 40; op -= 1;}, 50);}\n\n// const handleLoadCharClick = (e) => {\n//     switch \n// }\n\nwindow.addEventListener('load', () => {\n    // const abilityBoxes = document.getElementsByClassName('inner-ability-div');\n    // console.log(document.getElementById('a1-hp-left'));\n\n    const gameTag = document.getElementById('game-tag');\n    gameTag.style.opacity = 0;\n    gameTag.style.display = '';\n    \n    const charsDisp = document.getElementById('title-screen-chars');\n    // const controlsContainer = document.getElementsByClassName('controls-display')[0];\n    const closeButton = document.getElementsByClassName('close')[0];\n    const hButtons = document.getElementsByClassName('h-button');\n    // const startGameButton = document.getElementById('start-game-button');\n    // const controlsButton = document.getElementById('game-controls-button');\n    const keybindContainer = document.getElementById('full-keybind-container');\n    const levelButtonContainer = document.getElementById('level-button-container');\n    const statsContainer = document.getElementById('heroes-stats-full-container');\n    const levelButtons = document.getElementsByClassName('level-button');\n    const backgroundImage = document.getElementById('background-image');\n    const titleBackground = document.getElementById('title');\n\n    const keybindInputs = document.getElementsByClassName('keybind-input');\n    for (let i = 0; i < keybindInputs.length; i++) {\n        keybindInputs[i].addEventListener(\"change\", () => handleKeybindInput(keybindInputs[i], i));\n    }\n\n    function handleKeybindInput(input, i) {\n        // console.log('pre-mod: ', input.value);\n        if (input.value.length > 1) {\n            input.value = input.value[0];\n        } else {\n            for (let j = 0; j < keybindInputs.length; j++) {\n                if (i !== j && keybindInputs[j].value === input.value) { keybindInputs[j].value = ''; }\n            }\n        }\n    }\n\n    function secondAction() {\n        const gTContainer = document.getElementById('game-tag-container');\n        gTContainer.style.display = 'none';\n        function closeAction() {\n            // controlsContainer.style.display = 'none';\n            for (let i = 0; i < hButtons.length; i++) { hButtons[i].style.display = ''; }\n            // controlsButton.style.display = '';\n            levelButtonContainer.style.display = 'none';\n            keybindContainer.style.display = 'none';\n            statsContainer.style.display = 'none';\n            closeButton.style.display = 'none';\n            charsDisp.style.display = '';\n            backgroundImage.src = titleBackground.src;\n            backgroundImage.style.opacity = 100;\n            backgroundImage.style.display = '';\n        }\n        closeAction();\n        for (let i = 0; i < levelButtons.length; i++) {\n            levelButtons[i].addEventListener('click', () => { \n                closeButton.style.display = 'none';\n                // closeButton.removeEventListener('click', closeAction);\n                charsDisp.style.display = 'none';\n                backgroundImage.style.display = 'none';\n                loadLevel(i); \n            })\n        }\n        levelButtons[0].style.opacity = 100;\n        levelButtons[0].style.cursor = 'pointer';\n        closeButton.addEventListener('click', closeAction)\n        let hButtonPartialAction = () => {\n            for (let i = 0; i < hButtons.length; i++) { hButtons[i].style.display = 'none'; }\n            closeButton.style.display = '';\n            charsDisp.style.display = 'none';\n            backgroundImage.style.display = 'none';\n        }\n        hButtons[0].addEventListener('click', () => {\n            hButtonPartialAction();\n            levelButtonContainer.style.display = '';\n        })\n        hButtons[1].addEventListener('click', () => {\n            hButtonPartialAction();\n            keybindContainer.style.display = '';\n        })\n        hButtons[2].addEventListener('click', () => {\n            hButtonPartialAction();\n            statsContainer.style.display = '';\n        })\n\n    }\n    slowFade(gameTag, secondAction);\n})","// import * as charactersObj from '../entities/character';\r\nimport charactersArr from '../entities/character';\r\nimport * as enemiesObj from '../entities/enemy';\r\n\r\n// const charactersArr = Object.values(charactersObj);\r\nconst enemiesArr = Object.values(enemiesObj);\r\n\r\nclass Level {\r\n    constructor(name, enemyList, xp, message=\"\", actionChanges=()=>{}, characterList=charactersArr) {\r\n        this.name = name;\r\n        this.enemyList = enemyList;\r\n        this.xp = xp;\r\n        this.message = message;\r\n        this.action = actionChanges;\r\n        this.characterList = characterList;\r\n        // this.actionExpended = false;\r\n    }\r\n}\r\n\r\nfunction modP(width, percent) {\r\n    return (Math.floor(width * percent));\r\n}\r\n\r\nfunction applyMod(entity, mod, x=true) {\r\n    const container = document.getElementById('game-container');\r\n    const width = Math.floor(container.offsetWidth);\r\n    const height = Math.floor(container.offsetHeight);\r\n    if (x) {\r\n        entity.pos[0] = modP(width, (mod/100));\r\n        entity.basePos[0] = entity.pos[0];\r\n    } else {\r\n        entity.pos[1] = modP(height, (mod / 100));\r\n        entity.basePos[1] = entity.pos[1];\r\n    }\r\n}\r\n\r\nconst firstFourActions = () => {\r\n    applyMod(charactersArr[0], 35);\r\n    applyMod(charactersArr[1], 15);\r\n    applyMod(charactersArr[2], 15);\r\n    applyMod(charactersArr[3], 55);\r\n    applyMod(charactersArr[0], 55, false);\r\n    applyMod(charactersArr[1], 33, false);\r\n    applyMod(charactersArr[2], 66, false);\r\n    applyMod(charactersArr[3], 22, false);\r\n\r\n    applyMod(enemiesArr[0][0], 55);\r\n    applyMod(enemiesArr[0][0], 55, false);\r\n    applyMod(enemiesArr[1][0], 55);\r\n    applyMod(enemiesArr[1][1], 75);\r\n    applyMod(enemiesArr[1][0], 55, false);\r\n    applyMod(enemiesArr[1][1], 33, false);\r\n    applyMod(enemiesArr[2][2], 75);\r\n    applyMod(enemiesArr[2][2], 66, false);\r\n    applyMod(enemiesArr[3][3], 35);\r\n    applyMod(enemiesArr[3][3], 22, false);\r\n}\r\n\r\nconst actionFive = () => {\r\n    // WaCWiR\r\n    applyMod(charactersArr[0], 65);\r\n    applyMod(charactersArr[1], 45);\r\n    applyMod(charactersArr[2], 45);\r\n    applyMod(charactersArr[3], 25);\r\n    applyMod(charactersArr[0], 45, false);\r\n    applyMod(charactersArr[1], 25, false);\r\n    applyMod(charactersArr[2], 65, false);\r\n    applyMod(charactersArr[3], 45, false);\r\n    // WiRWaC\r\n    applyMod(enemiesArr[4][0], 10);\r\n    applyMod(enemiesArr[4][1], 15);\r\n    applyMod(enemiesArr[4][2], 75);\r\n    applyMod(enemiesArr[4][3], 80);\r\n    applyMod(enemiesArr[4][0], 20, false);\r\n    applyMod(enemiesArr[4][1], 65, false);\r\n    applyMod(enemiesArr[4][2], 65, false);\r\n    applyMod(enemiesArr[4][3], 20, false);\r\n}\r\nconst actionSix = () => {\r\n    // WaCWiR\r\n    applyMod(charactersArr[0], 60);\r\n    applyMod(charactersArr[1], 60);\r\n    applyMod(charactersArr[2], 30);\r\n    applyMod(charactersArr[3], 30);\r\n    applyMod(charactersArr[0], 60, false);\r\n    applyMod(charactersArr[1], 30, false);\r\n    applyMod(charactersArr[2], 30, false);\r\n    applyMod(charactersArr[3], 60, false);\r\n    // WiRWaC\r\n    applyMod(enemiesArr[5][0], 5);\r\n    applyMod(enemiesArr[5][1], 45);\r\n    applyMod(enemiesArr[5][2], 45);\r\n    applyMod(enemiesArr[5][3], 85);\r\n    applyMod(enemiesArr[5][0], 45, false);\r\n    applyMod(enemiesArr[5][1], 10, false);\r\n    applyMod(enemiesArr[5][2], 70, false);\r\n    applyMod(enemiesArr[5][3], 45, false);\r\n}\r\nconst actionSeven = () => {\r\n    applyMod(charactersArr[0], 50);\r\n    applyMod(charactersArr[1], 10);\r\n    applyMod(charactersArr[2], 35);\r\n    applyMod(charactersArr[3], 65);\r\n    applyMod(charactersArr[0], 20, false);\r\n    applyMod(charactersArr[1], 45, false);\r\n    applyMod(charactersArr[2], 60, false);\r\n    applyMod(charactersArr[3], 35, false);\r\n    applyMod(enemiesArr[6][0], 25);\r\n    applyMod(enemiesArr[6][1], 10);\r\n    applyMod(enemiesArr[6][2], 80);\r\n    applyMod(enemiesArr[6][3], 45);\r\n    applyMod(enemiesArr[6][0], 15, false);\r\n    applyMod(enemiesArr[6][1], 45, false);\r\n    applyMod(enemiesArr[6][2], 45, false);\r\n    applyMod(enemiesArr[6][3], 70, false);\r\n}\r\nconst actionEight = () => {\r\n    // WaCWiR\r\n    applyMod(charactersArr[0], 60);\r\n    applyMod(charactersArr[1], 60);\r\n    applyMod(charactersArr[2], 30);\r\n    applyMod(charactersArr[3], 30);\r\n    applyMod(charactersArr[0], 60, false);\r\n    applyMod(charactersArr[1], 30, false);\r\n    applyMod(charactersArr[2], 30, false);\r\n    applyMod(charactersArr[3], 60, false);\r\n    // WiRWaC\r\n    applyMod(enemiesArr[7][0], 45);\r\n    applyMod(enemiesArr[7][1], 10);\r\n    applyMod(enemiesArr[7][2], 80);\r\n    applyMod(enemiesArr[7][3], 45);\r\n    applyMod(enemiesArr[7][0], 15, false);\r\n    applyMod(enemiesArr[7][1], 45, false);\r\n    applyMod(enemiesArr[7][2], 45, false);\r\n    applyMod(enemiesArr[7][3], 70, false);\r\n}\r\n\r\nexport const levelOne = new Level('One', enemiesArr[0], 20, \r\n    \"Click on the stick figure, the warrior, in black to select it. Then click on the red stick figure enemy to attack it or click anywhere on the map to move there. Once an action is performed, the character is de-selected.\",\r\n    firstFourActions, [charactersArr[0]]);\r\nexport const levelTwo = new Level('Two', enemiesArr[1], 80,\r\n    \"The character with a staff is a cleric healer. Click on it and then on an allied unit or itself to begin healing them. De-select a character without making an action by clicking the Red button on the top right. Defeat all enemies to clear the level.\",\r\n    firstFourActions, [charactersArr[0], charactersArr[1]]);\r\nexport const levelThree = new Level('Three', enemiesArr[2], 120,\r\n    \"The character with the blue hat, the wizard, can attack enemies from any range. Click on it then on an enemy to begin attacking immediately. \\nAttacking an enemy with the Warrior will cause them to focus their attacks on him.\",\r\n    firstFourActions, [charactersArr[0], charactersArr[1], charactersArr[2]]);\r\nexport const levelFour = new Level('Four', enemiesArr[3], 240,\r\n    \"The newest character addition is the rogue with the daggers. Each character has a unique role. The Warrior is the best tank, the rogue the fastest attacker, the wizard the most versitile damage dealer, and the cleric the healer.\",\r\n    firstFourActions, charactersArr);\r\nexport const levelFive = new Level('Five', enemiesArr[4],  300,\r\n    \"The tutorial levels are over. Time for more of a challenge\",\r\n    actionFive);\r\nexport const levelSix = new Level('Six', enemiesArr[5], 375, \"Wizards and Clerics\", actionSix);\r\nexport const levelSeven = new Level('Seven', enemiesArr[6], 450, \"All melee\", actionSeven);\r\nexport const levelEight = new Level('Eight', enemiesArr[7], 700, \"Fight yourself\", actionEight);","import * as levelsObj from '../levels/level';\r\nimport {fadeIn, fadeOut} from './fades';\r\n\r\nlet hasBeenLoaded = false;\r\nlet levelHasEnded = false;\r\n\r\nconst levels = Object.values(levelsObj);\r\nlet currentLevelNumber = 0;\r\nlet maxLevelNumber = 0;\r\nlet characters = levels[maxLevelNumber].characterList;\r\n\r\nlet selectedChar;\r\n\r\nlet countToReach = 0;\r\nlet moveFinishCount = 0;\r\n\r\nlet livingEnemies = {};\r\nlet livingChars = {};\r\n\r\nlet currentAbilityBoxes;\r\n\r\nlet hotkeys = {};\r\n\r\nwindow.addEventListener('load', () => {\r\n    let statChar1;\r\n    let statChar2;\r\n    const heroStatcontainer = document.getElementById('heroes-button');\r\n    const heroStatsBlocks = document.getElementsByClassName('hero-stats');\r\n    const heroNameplateSelectors = document.getElementsByClassName('stat-selector');\r\n    const statSelectorNames = document.getElementsByClassName('stat-selector-name');\r\n    const statImages = document.getElementsByClassName('stats-img');\r\n    heroStatcontainer.addEventListener('click', () => {\r\n        for (let i = 0; i < statImages.length; i++) {\r\n            if (statImages[i].style.display !== 'none') {\r\n                let char; if (i === 0) { char = statChar1; } else { char = statChar2; }\r\n                const statImg = document.getElementById(`stats-img-${i + 1}`)\r\n                const nameStat = document.getElementById(`stats-name-${i + 1}`);\r\n                const levelStat = document.getElementById(`stats-level-${i + 1}`);\r\n                const hpStat = document.getElementById(`stats-hp-${i + 1}`);\r\n                const dmgStat = document.getElementById(`stats-dmg-${i + 1}`);\r\n                const defenseStat = document.getElementById(`stats-defense-${i + 1}`);\r\n                statImg.src = char.baseImg.src;\r\n                nameStat.innerHTML = `Level: ${char.level}`;\r\n                levelStat.innerHTML = char.klass;\r\n                hpStat.innerHTML = `Max HP: ${char.baseHP}`;\r\n                dmgStat.innerHTML = `Damage: ${char.baseDMG}`\r\n                defenseStat.innerHTML = `Defense: ${char.baseDefense}`;\r\n            }\r\n        }\r\n    })\r\n    let shouldSwap = false;\r\n    let statCharSelected = null;\r\n    function swapStatDisp(e) {\r\n        if (!shouldSwap) { return; }\r\n        // console.log('swapping now');\r\n        e.currentTarget.style.border = '3px solid indigo';\r\n        e.currentTarget.style.cursor = 'default';\r\n        for (let j = 0; j < heroStatsBlocks.length; j++) {\r\n            heroStatsBlocks[j].removeEventListener(\"mouseover\", addBlueBorder);\r\n            heroStatsBlocks[j].removeEventListener(\"mouseleave\", removeBlueBorder);\r\n        }\r\n        const charIndex = statCharSelected.id.substr(1, 1);\r\n        const char = characters[charIndex-1];\r\n        \r\n        statCharSelected.style.border = 'none';\r\n        statCharSelected = 'none';\r\n        \r\n        const tarId = e.target.id;\r\n        const sideNum = tarId.substr(tarId.length - 1, 1);\r\n        if (sideNum == 1) {\r\n            statChar1 = char;\r\n        } else {\r\n            statChar2 = char;\r\n        }\r\n        const statImg = document.getElementById(`stats-img-${sideNum}`)\r\n        const nameStat = document.getElementById(`stats-name-${sideNum}`);\r\n        const levelStat = document.getElementById(`stats-level-${sideNum}`);\r\n        const hpStat = document.getElementById(`stats-hp-${sideNum}`);\r\n        const dmgStat = document.getElementById(`stats-dmg-${sideNum}`);\r\n        const defenseStat = document.getElementById(`stats-defense-${sideNum}`);\r\n        if (statImg.style.display === 'none') { statImg.style.display = ''; }\r\n        statImg.src = char.baseImg.src;\r\n        nameStat.innerHTML = `Level: ${char.level}`;\r\n        levelStat.innerHTML = char.klass;\r\n        hpStat.innerHTML = `Max HP: ${char.baseHP}`;\r\n        dmgStat.innerHTML = `Damage: ${char.baseDMG}`\r\n        defenseStat.innerHTML = `Defense: ${char.baseDefense}`;\r\n\r\n        shouldSwap = false;\r\n    }\r\n    function addBlueBorder(e) {\r\n        e.currentTarget.style.border = '6px solid blue';\r\n        e.currentTarget.style.cursor = 'pointer';\r\n    } function removeBlueBorder(e) {\r\n        e.currentTarget.style.border = '3px solid indigo';\r\n        e.currentTarget.style.cursor = 'default';\r\n    }\r\n    function initiateStatSwap(e) {\r\n        // console.log('swap initiated');\r\n        if (shouldSwap) {\r\n            if (e.currentTarget === statCharSelected) { return; }\r\n            statCharSelected.style.border = 'none';\r\n            statCharSelected = e.currentTarget;\r\n            e.currentTarget.style.border = '4px solid blue';\r\n        } else {\r\n            statCharSelected = e.currentTarget;\r\n            statCharSelected.style.border = '4px solid blue';\r\n            for (let j = 0; j < heroStatsBlocks.length; j++) {\r\n                heroStatsBlocks[j].addEventListener(\"mouseover\", addBlueBorder);\r\n                heroStatsBlocks[j].addEventListener(\"mouseleave\", removeBlueBorder);\r\n            }\r\n            shouldSwap = true;\r\n        }\r\n    }\r\n    for (let j = 0; j < heroStatsBlocks.length; j++) { heroStatsBlocks[j].addEventListener(\"click\", swapStatDisp); }\r\n    for (let i = 0; i < heroNameplateSelectors.length; i++) { heroNameplateSelectors[i].addEventListener('click', initiateStatSwap); }\r\n    for (let i = 0; i < statSelectorNames.length; i++) {\r\n        if (characters[i]) {\r\n            statSelectorNames[i].innerHTML = characters[i].klass;\r\n        }\r\n    }\r\n})\r\n\r\n \r\nfunction addDeathListener(entity) {\r\n    entity.observer = new MutationObserver(function(mutations) {\r\n        mutations.forEach(function (mutationRecord) {\r\n            if (mutationRecord.target.style.display === 'none') {\r\n                // console.log(entity.imgName, 'style === none');\r\n                if (entity.allied) {\r\n                    delete livingChars[entity.imgName];\r\n                } else {\r\n                    delete livingEnemies[entity.imgName];\r\n                }\r\n                const c = Object.values(livingChars);\r\n                const en = Object.values(livingEnemies);\r\n                if (c.length === 0 || en.length === 0) {\r\n                    if (!levelHasEnded) {\r\n                        // console.log('end game called');\r\n                        endGame(c, en, currentLevelNumber);\r\n                    }\r\n                    // console.log('game should have ended');\r\n                    levelHasEnded = true;\r\n                }\r\n            }\r\n        });\r\n    })\r\n}\r\n\r\nfunction createXPObserver(char) {\r\n    char.xpObserver = new MutationObserver(function (mutations) {\r\n        mutations.forEach(function (mutationRecord) {\r\n            if (char.observationToken && mutationRecord.target.style.border === '5px solid gold') {\r\n                moveFinishCount++;\r\n                char.observationToken = false;\r\n                // char.xpObserver.disconnect();\r\n                if (moveFinishCount === countToReach) {\r\n                    addCharXP();\r\n                }\r\n            }\r\n        })\r\n    })\r\n}\r\n\r\nfunction addEntityEvents(entity, allies, enemies) {\r\n    if (entity.imgName != \"\") {\r\n        if (!entity.observer) {\r\n            addDeathListener(entity);\r\n            if (entity.allied) {\r\n                createXPObserver(entity);\r\n            }\r\n        }\r\n        entity.enemies = enemies;\r\n        const cloneArr = allies.slice();\r\n        let selfIndex;\r\n        for (let i = 0; i < cloneArr.length; i++) {\r\n            if (cloneArr[i].imgName === entity.imgName) { selfIndex = i; }\r\n        }\r\n        // remove self from allies list to prevent moving out of self image (healers excluded)\r\n        if (entity.baseDMG > 0) { cloneArr.splice(selfIndex, 1); }\r\n        entity.allies = cloneArr;\r\n    } else {\r\n        // console.log('broken image passed in for', entity.imgName);\r\n    }\r\n}\r\n\r\nfunction deSelect() {\r\n    // console.log('de-selected')\r\n    if (selectedChar) {\r\n        selectedChar.abilityContainer.style.display = 'none';\r\n        currentAbilityBoxes = null;\r\n        selectedChar.img.style.border = 'none';\r\n        selectedChar = null;\r\n    }\r\n}\r\n\r\nfunction beginCurrentLevel() {\r\n    const beginLevelButton = document.getElementById('begin-level-button');\r\n    fadeOut(beginLevelButton);\r\n    const level = levels[currentLevelNumber];\r\n    beginLevel(level.characterList.slice(), level.enemyList.slice(), currentLevelNumber);\r\n}\r\n\r\nfunction returnToSelectPage() {\r\n    document.getElementById('return-button').style.display = 'none';\r\n    document.getElementById('tutorial-message').style.display = 'none';\r\n    document.getElementById(`level-name-display`).style.display = 'none';\r\n    document.getElementById('begin-level-button').style.display = 'none';\r\n    document.getElementById('level-button-container').style.display = '';\r\n    document.getElementById('close-button').style.display = '';\r\n}\r\n\r\nfunction selectChar(entity) {\r\n    if (!entity || entity.container.style.display === 'none' || entity.hp < 0) {\r\n        return;\r\n    }\r\n    if (!selectedChar || selectedChar.hp < 0) {\r\n        // for (let i = 0; i < entity.abilityBoxes; i++) { entity.abilityBoxes[i].style.display = ''; }\r\n        entity.abilityContainer.style.display = '';\r\n        currentAbilityBoxes = entity.abilityContainer;\r\n        selectedChar = entity;\r\n        entity.img.style.border = '5px solid gold';\r\n        // console.log('selected char: ', selectedChar.imgName);\r\n    } else if (selectedChar.baseDMG < 0) {\r\n        // for (let i = 0; i < selectedChar.abilityBoxes; i++) { entity.abilityBoxes[i].style.display = 'none'; }\r\n        if (selectedChar.target === entity && selectedChar.isAttacking) {\r\n            deSelect();\r\n            return;\r\n        }\r\n        selectedChar.autoAttack(entity);\r\n        deSelect();\r\n    } else {\r\n        selectedChar.abilityContainer.style.display = 'none';\r\n        selectedChar.img.style.border = 'none';\r\n        entity.abilityContainer.style.display = '';\r\n        currentAbilityBoxes = entity.abilityContainer;\r\n        selectedChar = entity;\r\n        entity.img.style.border = '5px solid gold';\r\n    }\r\n}\r\n\r\nfunction selectEnemy(entity) {\r\n    if (!selectedChar || selectedChar.hp < 0) {\r\n        selectedChar = null;\r\n        return;\r\n    } else if ((selectedChar.target === entity && selectedChar.isAttacking) || entity.hp < 0) {\r\n        deSelect();\r\n        return;\r\n    }\r\n    if (selectedChar.allied && selectedChar.baseDMG > 0) {\r\n        clearInterval(selectedChar.currentAction);\r\n        clearInterval(selectedChar.currentAnimation);\r\n        selectedChar.autoAttack(entity);\r\n        selectedChar.img.style.border = 'none';\r\n        selectedChar.abilityContainer.style.display = 'none';\r\n        currentAbilityBoxes = null;\r\n        selectedChar = null;\r\n    }\r\n}\r\n\r\nconst allyClickEvents = (e) => {\r\n    // console.log('character click');\r\n    const entityName = e.target.className.slice(0, 2);\r\n    const entity = livingChars[entityName];\r\n    e.stopPropagation();\r\n    selectChar(entity);\r\n}\r\n\r\nconst enemyClickEvents = (e) => {\r\n    const entityName = e.target.className.slice(0, 2);\r\n    const entity = livingEnemies[entityName];\r\n    e.stopPropagation();\r\n    selectEnemy(entity);\r\n}\r\n\r\nfunction keydownEvent (e) {\r\n    const entity = hotkeys[e.key];\r\n    if (entity && entity.allied) {\r\n        selectChar(entity);\r\n    } else if (entity && entity.klass) {\r\n        selectEnemy(entity);\r\n    } else if ((entity === 0 || entity) && selectedChar) {\r\n        selectedChar.useAbility(entity);\r\n    } else {\r\n        // console.log('invalid key press of: ', e.key);\r\n    }\r\n}\r\n\r\nfunction abilityClick(arr) {\r\n    const entity = livingChars['a'+arr[0]];\r\n    if (entity) {\r\n        entity.useAbility(arr[1]);\r\n    } else {\r\n        // console.log('invalid entity for ability use');\r\n    }\r\n}\r\n\r\nfunction setAbilityBoxes() {\r\n    let abilityBoxes = [];\r\n    abilityBoxes.push(document.getElementsByClassName('a1-inner-ability-divs'));\r\n    abilityBoxes.push(document.getElementsByClassName('a2-inner-ability-divs'));\r\n    abilityBoxes.push(document.getElementsByClassName('a3-inner-ability-divs'));\r\n    abilityBoxes.push(document.getElementsByClassName('a4-inner-ability-divs'));\r\n    for (let i = 0; i < abilityBoxes.length; i++) {\r\n        for (let j = 0; j < abilityBoxes[i].length; j++) {\r\n            abilityBoxes[i][j].addEventListener('click', () => abilityClick([i+1, j]));\r\n        }\r\n    }\r\n}\r\n\r\nfunction initializeGameOpening() {\r\n    document.getElementById('return-button').addEventListener('click', returnToSelectPage);\r\n    const deSelectButton = document.getElementById('test');\r\n    deSelectButton.addEventListener('click', deSelect);\r\n\r\n    const beginLevel = document.getElementById('begin-level-button');\r\n    beginLevel.addEventListener('click', beginCurrentLevel)\r\n\r\n    // end click position\r\n    const gameContainer = document.getElementById('game-container');\r\n    gameContainer.addEventListener(\"click\", (e) => {\r\n        // console.log(e);\r\n        if (selectedChar) {\r\n            if (selectedChar.hp < 0) {\r\n                selectedChar = null;\r\n                return;\r\n            }\r\n            clearInterval(selectedChar.currentAction);\r\n            clearInterval(selectedChar.currentAnimation);\r\n            selectedChar.img.style.border = 'none';\r\n            currentAbilityBoxes.style.display = 'none';\r\n            currentAbilityBoxes = null;\r\n            selectedChar.move([e.x, e.y]);\r\n            selectedChar = null;\r\n        }\r\n    })\r\n    window.addEventListener('keypress', (e) => {\r\n        // console.log(e);\r\n        keydownEvent(e);\r\n    })\r\n    setAbilityBoxes();\r\n\r\n    hasBeenLoaded = true;\r\n}\r\n\r\n\r\n\r\nfunction loadLevel(levelNumber) {\r\n    if (!hasBeenLoaded) {\r\n        initializeGameOpening();\r\n    }\r\n    if (levelNumber > maxLevelNumber) {\r\n        return;\r\n    }\r\n    const level = levels[levelNumber];\r\n    levelHasEnded = false;\r\n    currentLevelNumber = levelNumber;\r\n    level.action();\r\n    // console.log('level selected: ', levelNumber);\r\n    document.getElementById('return-button').style.display = '';\r\n    const levelButtonContainer = document.getElementById('level-button-container');\r\n    levelButtonContainer.style.display = 'none';\r\n    const levelNameDisp = document.getElementById(`level-name-display`);\r\n    levelNameDisp.style.opacity = 0;\r\n    levelNameDisp.style.display = '';\r\n    levelNameDisp.innerHTML = 'Level ' + level.name;\r\n    const levelMessage = document.getElementById('tutorial-message');\r\n    levelMessage.innerHTML = level.message;\r\n    levelMessage.style.opacity = 0;\r\n    levelMessage.style.display = '';\r\n    // const secondAction = () => beginLevel(level.characterList, level.enemyList, levelNumber);\r\n    fadeIn(levelNameDisp);\r\n    const levelNameAction = () => { fadeIn(beginLevel); }\r\n    const action = () => fadeOut(levelNameDisp, levelNameAction);\r\n    const beginLevel = document.getElementById('begin-level-button');\r\n    beginLevel.style.opacity = 0;\r\n    beginLevel.style.display = '';\r\n    fadeIn(levelMessage, action);\r\n}\r\n\r\nfunction beginLevel(charactersArr, enemiesArr, levelNumber) {\r\n    document.getElementById('begin-level-button').style.display = 'none';\r\n    setInitialTargets(charactersArr, enemiesArr);\r\n    loadInCharacters(charactersArr, enemiesArr, levelNumber);\r\n}\r\n\r\nfunction setInitialTargets(chars, enemies) {\r\n    for (let i = 0; i < enemies.length; i++) {\r\n        if (enemies[i].baseDMG > 0) {\r\n            const targetIndex = Math.floor(Math.random() * chars.length);\r\n            enemies[i].target = chars[targetIndex];\r\n        } else {\r\n            const targetIndex = Math.floor(Math.random() * enemies.length);\r\n            enemies[i].target = enemies[targetIndex];\r\n        }\r\n        // console.log(enemies[i].imgName, \"has target set to\", enemies[i].target);\r\n    }\r\n}\r\n\r\nfunction setAvailableAbilities(char) {\r\n    const abilities = document.getElementsByClassName(char.imgName + '-ability-boxes');\r\n    for (let i = 0; i < abilities.length; i++) {\r\n        if (i < char.abilities.length) {\r\n            abilities[i].style.display = '';\r\n        } else {\r\n            abilities[i].style.display = 'none';\r\n        }\r\n    }\r\n}\r\n\r\nfunction loadInCharacters(charactersArr, enemiesArr, levelNumber) {\r\n    document.getElementById('return-button').style.display = 'none';\r\n    const deSelectButton = document.getElementById('test');\r\n    deSelectButton.style.opacity = 0;\r\n    deSelectButton.style.display = '';\r\n    fadeIn(deSelectButton);\r\n    const backgroundImg = document.getElementById('background-image');\r\n    if (levelNumber < 4) {\r\n        backgroundImg.src = document.getElementById('forest').src;\r\n    } else if (levelNumber < 7) {\r\n        backgroundImg.src = document.getElementById('snowy').src;\r\n    } else {\r\n        backgroundImg.src = document.getElementById('dungeon').src;\r\n    }\r\n    backgroundImg.style.opacity = 0;\r\n    backgroundImg.style.display = '';\r\n    fadeIn(backgroundImg);\r\n    for (let i = 0; i < charactersArr.length; i++) {\r\n        if (!charactersArr[i].observer) {\r\n            addEntityEvents(charactersArr[i], charactersArr, enemiesArr);\r\n        }\r\n        livingChars[charactersArr[i].imgName] = charactersArr[i];\r\n        charactersArr[i].container.style.top = charactersArr[i].pos[1] + 'px';\r\n        charactersArr[i].container.style.left = charactersArr[i].pos[0] + 'px';\r\n        charactersArr[i].container.style.opacity = 0;\r\n        charactersArr[i].container.style.display = '';\r\n        const hpBar = document.getElementById(`${charactersArr[i].imgName}-hp-bar`);\r\n        hpBar.style.display = \"flex\";\r\n        // charactersArr[i].hotkeyDisplay.innerHTML = charactersArr[i].hotkey;\r\n        // hotkeys[charactersArr[i].hotkey] = charactersArr[i];\r\n        const hotkeyInput = document.getElementById(`a${i+1}-keybind`);\r\n        charactersArr[i].hotkeyDisplay.innerHTML = hotkeyInput.value;\r\n        hotkeys[hotkeyInput.value] = charactersArr[i];\r\n        const abilityHotkey = document.getElementById(`ab${i+1}-keybind`);\r\n        hotkeys[abilityHotkey.value] = i;\r\n        const abilityClassName = document.getElementById(`a${i+1}-class-name`);\r\n        abilityClassName.innerHTML = charactersArr[i].klass;\r\n        const abilityNames = document.getElementsByClassName(`a${i+1}-ability-labels`);\r\n        setAvailableAbilities(charactersArr[i]);\r\n        for (let j = 0; j < abilityNames.length; j++) {\r\n            if (charactersArr[i].abilityNames[j]) {\r\n                abilityNames[j].innerHTML = charactersArr[i].abilityNames[j];\r\n            } else {\r\n                abilityNames[j].innerHTML = 'No Ability';\r\n            }\r\n        }\r\n        const actionEvent = () => { charactersArr[i].container.addEventListener('click', allyClickEvents);}\r\n        charactersArr[i].img.src = charactersArr[i].baseImg.src;\r\n        fadeIn(charactersArr[i].container, actionEvent);\r\n        observerObserve(charactersArr[i]);\r\n    }\r\n    for (let i = 0; i < enemiesArr.length; i++) {\r\n        if (!enemiesArr[i].observer) {\r\n            addEntityEvents(enemiesArr[i], enemiesArr, charactersArr);\r\n        }\r\n        livingEnemies[enemiesArr[i].imgName] = enemiesArr[i];\r\n        enemiesArr[i].container.style.top = enemiesArr[i].pos[1] + 'px';\r\n        enemiesArr[i].container.style.left = enemiesArr[i].pos[0] + 'px';\r\n        enemiesArr[i].container.style.opacity = 0;\r\n        enemiesArr[i].container.style.display = '';\r\n        const hpBar = document.getElementById(`${enemiesArr[i].imgName}-hp-bar`);\r\n        hpBar.style.display = \"flex\";\r\n        const hotkeyInput = document.getElementById(`e${i+1}-keybind`);\r\n        enemiesArr[i].hotkeyDisplay.innerHTML = hotkeyInput.value;\r\n        hotkeys[hotkeyInput.value] = enemiesArr[i];\r\n        enemiesArr[i].container.addEventListener('click', enemyClickEvents);\r\n        enemiesArr[i].img.src = enemiesArr[i].baseImg.src;\r\n        const action = () => enemiesArr[i].autoAttack(enemiesArr[i].target);\r\n        fadeIn(enemiesArr[i].container, action); // begin attacking target\r\n        observerObserve(enemiesArr[i]);\r\n    }\r\n    // console.log(\"hotkeys: \", hotkeys);\r\n}\r\n\r\nfunction observerObserve(entity) {\r\n    const element = entity.container;\r\n    entity.observer.observe(element, { attributes: true, attributeFilter: ['style'] });\r\n}\r\n\r\n\r\n\r\n\r\nfunction endGame(charsList, enemyList) {\r\n    hotkeys = {};\r\n    if (currentAbilityBoxes) {\r\n        currentAbilityBoxes.style.display = 'none';\r\n        currentAbilityBoxes = null;\r\n    }\r\n    const levelMessage = document.getElementById('tutorial-message');\r\n    levelMessage.style.display = 'none';\r\n    const deSelectButton = document.getElementById('test');\r\n    deSelectButton.style.display = 'none';\r\n    deSelect();\r\n    const projectiles = document.getElementsByClassName('projectile');\r\n    for (let i = 0; i < projectiles.length; i++) {\r\n        projectiles[i].display = 'none';\r\n    }\r\n    const allCharsList = levels[currentLevelNumber].characterList;\r\n    const allEnemyList = levels[currentLevelNumber].enemyList;\r\n    for (let i = 0; i < allCharsList.length; i++) {\r\n        allCharsList[i].observer.disconnect();\r\n        if (allCharsList[i].currentAction) { clearInterval(allCharsList[i].currentAction); }\r\n        if (allCharsList[i].currentAnimation) { clearInterval(allCharsList[i].currentAnimation); }\r\n        allCharsList[i].isAttacking = false;\r\n        allCharsList[i].target = null;\r\n        allCharsList[i].container.removeEventListener('click', allyClickEvents);\r\n        allCharsList[i].img.src = allCharsList[i].baseImg.src;\r\n    }\r\n    for (let i = 0; i < allEnemyList.length; i++) {\r\n        allEnemyList[i].observer.disconnect();\r\n        if (allEnemyList[i].currentAction) { clearInterval(allEnemyList[i].currentAction); }\r\n        if (allEnemyList[i].currentAnimation) { clearInterval(allEnemyList[i].currentAnimation); }\r\n        allEnemyList[i].isAttacking = false;\r\n        allEnemyList[i].target = null;\r\n        allEnemyList[i].container.removeEventListener('click', enemyClickEvents);\r\n        allEnemyList[i].img.src = allEnemyList[i].baseImg.src;\r\n    }\r\n\r\n    if (charsList.length > 0) {\r\n        endMoveChars(charsList);\r\n    } else {\r\n        const backgroundImg = document.getElementById('background-image');\r\n        fadeOut(backgroundImg);\r\n        for (let i = 0; i < enemyList.length; i++) {\r\n            fadeOut(enemyList[i].container);\r\n        }\r\n        fadeOutGame(false);\r\n    }\r\n}\r\n\r\nfunction xpObserverObserve(char) {\r\n    char.observationToken = true;\r\n    char.xpObserver.observe(char.img, { attributes: true, attributeFilter: ['style'] });\r\n}\r\n\r\nfunction modEndPos() {\r\n    const container = document.getElementById('game-container');\r\n    const width = Math.floor(container.offsetWidth);\r\n    const height = Math.floor(container.offsetHeight);\r\n    // console.log(width);\r\n    const widthExtra = width - (160 * 4);\r\n    // console.log(widthExtra);\r\n    return ([Math.floor(widthExtra / 4), Math.floor(height * 0.66), Math.floor(width/10)]);\r\n}\r\n\r\nfunction endMoveChars(charsList) {\r\n    moveFinishCount = 0;\r\n    countToReach = charsList.length;\r\n    const basePos = modEndPos(); // make into % values\r\n    for (let i = 0; i < charsList.length; i++) {\r\n        xpObserverObserve(charsList[i]);\r\n        charsList[i].move([(i*160) + ((i+1)*basePos[0]) + basePos[2], basePos[1]], false, true);\r\n    }\r\n}\r\n\r\nfunction addCharXP() {\r\n    const c = Object.values(livingChars);\r\n    // console.log(c);\r\n    for (let i = 0; i < c.length; i++) {\r\n        c[i].xpObserver.disconnect();\r\n        c[i].hpContainerLeft.style.backgroundColor = 'gold';\r\n        const xpPercent = Math.floor((c[i].xp / c[i].nextLevelXP) * 100);\r\n        c[i].hpContainerLeft.style.width = `${xpPercent}%`;\r\n        c[i].hpContainerRight.style.width = `${100 - xpPercent}%`;\r\n        const levelUpDisp = document.getElementById(c[i].imgName + '-level-up');\r\n        levelUpDisp.style.top = Math.floor(c[i].pos[1] - 75) + 'px';\r\n        levelUpDisp.style.left = Math.floor(c[i].pos[0]) + 'px';\r\n    }\r\n    fadeOutGame(true);\r\n    const xpPerC = levels[currentLevelNumber].xp / c.length;\r\n    const xpPerInterval = xpPerC / 60; // 4 seconds for the animation, .05 sec intervals\r\n    let timeCount = 0;\r\n    const xpInterval = setInterval(() => {\r\n        if (timeCount === 60) {\r\n            clearInterval(xpInterval);\r\n            for (let i = 0; i < c.length; i++) {\r\n                c[i].xp = Math.ceil(c[i].xp);\r\n                // console.log('xp: ', c[i].xp, ' level: ', c[i].level);\r\n                c[i].container.style.border = 'none';\r\n                fadeOut(c[i].container);\r\n            }\r\n            const backgroundImg = document.getElementById('background-image');\r\n            fadeOut(backgroundImg);\r\n        }\r\n        for (let i = 0; i < c.length; i++) {\r\n            c[i].xp += xpPerInterval;\r\n            if (c[i].xp > c[i].nextLevelXP) {\r\n                c[i].levelUp();\r\n            }\r\n            const xpPercent = Math.floor((c[i].xp / c[i].nextLevelXP) * 100);\r\n            c[i].hpContainerLeft.style.width = `${xpPercent}%`;\r\n            c[i].hpContainerRight.style.width = `${100 - xpPercent}%`;\r\n        }\r\n        timeCount++;\r\n    }, 50);\r\n}\r\n\r\nfunction fadeOutGame(won) {\r\n    let theThing = (actionIterations) => {\r\n        if (!actionIterations) {\r\n            actionIterations = 40;\r\n        }\r\n        // console.log('fade called');\r\n        let disp;\r\n        let secondAction;\r\n        if (!won) {\r\n            disp = document.getElementById('game-over-display');\r\n            secondAction = () => resetGame(false);\r\n        } else {\r\n            disp = document.getElementById('game-won-display');\r\n            secondAction = () => resetGame(true);\r\n        }\r\n        disp.style.opacity = 0;\r\n        disp.style.display = '';\r\n        const action = () => fadeOut(disp, secondAction, actionIterations);\r\n        fadeIn(disp, action);\r\n    }\r\n    if (!won) {\r\n        setTimeout(theThing, 2000);\r\n    } else {\r\n        theThing(60);\r\n    }\r\n}\r\n\r\nfunction resetGame(won) {\r\n    livingChars = {};\r\n    livingEnemies = {};\r\n    const levelButtonContainer = document.getElementById('level-button-container');\r\n    levelButtonContainer.style.display = '';\r\n    document.getElementById('close-button').style.display = '';\r\n    if (won && maxLevelNumber === currentLevelNumber) {\r\n        maxLevelNumber++;\r\n        const levelButtons = document.getElementsByClassName('level-button');\r\n        if (levelButtons[maxLevelNumber]) {\r\n            levelButtons[maxLevelNumber].style.opacity = 100 + '%';\r\n            levelButtons[maxLevelNumber].style.cursor = 'pointer';\r\n        }\r\n    }\r\n    const levChars = levels[currentLevelNumber].characterList;\r\n    const levEnems = levels[currentLevelNumber].enemyList;\r\n    for (let i = 0; i < levChars.length; i++) {\r\n        levChars[i].hp = levChars[i].baseHP; levChars[i].dmg = levChars[i].baseDMG; levChars[i].defense = levChars[i].baseDefense;\r\n        levChars[i].pos[0] = levChars[i].basePos[0]; levChars[i].pos[1] = levChars[i].basePos[1];\r\n        levChars[i].container.style.top = levChars[i].pos[1] + 'px';\r\n        levChars[i].container.style.left = levChars[i].pos[0] + 'px';\r\n        levChars[i].hpContainerLeft.style.backgroundColor = 'blue';\r\n        levChars[i].img.style.border = 'none';\r\n        levChars[i].setHpBars();\r\n    }\r\n    for (let i = 0; i < levEnems.length; i++) {\r\n        levEnems[i].hp = levEnems[i].baseHP; levEnems[i].dmg = levEnems[i].baseDMG; levEnems[i].defense = levEnems[i].baseDefense;\r\n        levEnems[i].pos[0] = levEnems[i].basePos[0]; levEnems[i].pos[1] = levEnems[i].basePos[1];\r\n        levEnems[i].container.style.top = levEnems[i].pos[1] + 'px';\r\n        levEnems[i].container.style.left = levEnems[i].pos[0] + 'px';\r\n        levEnems[i].setHpBars();\r\n    }\r\n}\r\n\r\nexport default loadLevel;","export function fadeOut(element, action = null, iterations=40) {\r\n    let op = iterations;\r\n    let timerDown = setInterval(function () {\r\n        if (op <= 0) {\r\n            clearInterval(timerDown);\r\n            element.style.display = 'none';\r\n            if (action) { action(); }\r\n        }\r\n        element.style.opacity = op / iterations;\r\n        op -= 1;\r\n        if (element.style.display === 'none') {\r\n            clearInterval(timerDown);\r\n            element.style.opacity = 0;\r\n        }\r\n    }, 50);\r\n}\r\n\r\nexport function fadeIn(element, action = null, iterations=40) {\r\n    let op = 0;\r\n    let timerUp = setInterval(function () {\r\n        if (op >= iterations) {\r\n            clearInterval(timerUp);\r\n            if (action) { action(); }\r\n        }\r\n        element.style.opacity = op / iterations;\r\n        op += 1;\r\n        if (element.style.display === 'none') {\r\n            clearInterval(timerUp);\r\n            element.style.opacity = 0;\r\n        }\r\n    }, 50);\r\n}"],"sourceRoot":""}