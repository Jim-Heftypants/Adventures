{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/entities/abilities.js","webpack:///./src/entities/character.js","webpack:///./src/entities/enemy.js","webpack:///./src/entities/entity.js","webpack:///./src/index.js","webpack:///./src/levels/level.js","webpack:///./src/screen_controllers/entity_controller.js","webpack:///./src/screen_controllers/fades.js"],"names":["groupHeal","entity","i","allies","length","hp","dmg","setOverlay","setHpBars","setBorder","protection","target","checkAbilityPossible","tempHP","armor","overlay","document","createElement","classList","add","getElementById","appendChild","style","backgroundColor","top","pos","left","width","img","height","setTimeout","remove","timeCount","timer","setInterval","clearInterval","powerSwing","Math","ceil","stunned","src","baseImg","imgCycle","killEntitiy","charge","lockedIntoAbility","ms","trackTarget","baseDMG","autoAttack","inter","poisonDagger","slowed","floor","baseMS","int","container","display","backstab","transform","meteor","fireblastDiv","opacity","spellTrack","causeAoEEffect","freeze","enemies","rooted","ice","offsetHeight","border","borderInterval","warriorAbilities","clericAbilities","wizardAbilities","rogueAbilities","paladinAbilities","bardAbilities","rangerAbilities","warlockAbilities","allAbilities","abNum","infiniteRange","withinAttackRange","abilityShouldCast","getElementsByClassName","imgName","lightningAutoAttack","div","drawLine","maxTime","as","specialAttackEffects","knockbackTarget","distance","dX","dY","hypotenuse","sqrt","pow","xRatio","yRatio","xRight","yDown","targetCenter","offsetWidth","topLeft1","leftSetback","topSetback","position","background","zIndex","imagesTouching","imageInside","sizes1","topLeft2","sizes2","imagesTochingSide","createLineElement","x","y","angle","styles","setAttribute","x1","y1","x2","y2","a","b","c","sx","sy","alpha","PI","atan2","action","changedPos","slice","targetImg","interval","move","parseInt","replace","targetPos","posChange","vectorToScalar","endPos","deltaX","deltaY","abs","xChange","yChange","abilityList","Object","values","abilityObj","charAbilities","waAbNames","cAbNames","wiAbNames","rAbNames","pAbNames","wizardAttackEffect","Warrior","classCreator","Paladin","Cleric","Wizard","Rogue","charactersArr","tutorialWizard","ghettoWizard","wizard2","wizard3","EWizard","tutorialCleric","dumbCleric","cleric2","cleric3","ECleric","tutorialRogue","loserRogue","rogue2","rogue3","ERogue","punchingBag","tutorialWarrior","weakWarrior","warrior2","warrior3","EWarrior","intro","healIntro","rangedIntro","puttinItAllTogetha","ezDoppelganger","level3","level2","doppelganger","Entity","klass","range","baseHP","attackSpeed","attackDMG","allied","defense","hasAttackOverlay","extraAttackAnimation","abilities","abilityNames","trueBaseHp","basePos","baseAS","trueBaseDMG","trueBaseDefense","baseDefense","xp","level","nextLevelXP","abilityAvailable","abilityContainer","hotkeyDisplay","hotkey","attackImages","moveImages","hpContainerLeft","hpContainerRight","attackOverlay","currentAction","currentAnimation","isAttacking","isMoving","feared","movingOutTheWay","observer","xpObserver","observationToken","window","addEventListener","addInlineStyle","value","levelUpDisp","fastFadeOut","push","numRepeats","attackOnFinish","addXPBar","lockedIn","clearIntervals","bigDiv","frame","self","widthAddition","heightAddition","leftWidth","rightWidth","shuffle","difference","innerWidth","checker","setTargetAndAttack","movePos","targetChar","substr","clearTime","iterations","opSubtraction","timeCheck","stackInterval","useAbility","animateAttack","attack","charactersStacked","eWidthAddition","eHeightAddition","beginAttack","n","ab","cdTime","innerBoxes","colorFade","CDTimer","element","time","start","end","toString","currentColor","numIntervals","deltaZ","j","random","op","timerDown","fastFadeIn","timerUp","slowFade","gameTag","charsDisp","closeButton","hButtons","keybindContainer","levelButtonContainer","levelButtonHeader","statsContainer","levelButtons","backgroundImage","titleBackground","gameContainer","partySelectorContainer","keybindInputs","handleKeybindInput","input","secondAction","gTContainer","closeAction","loadLevel","cursor","hButtonPartialAction","enemiesArr","enemiesObj","Level","name","enemyList","message","actionChanges","characterList","modP","percent","applyMod","mod","firstFourActions","actionFive","actionSix","actionSeven","actionEight","levelZero","levelOne","levelTwo","levelThree","levelFour","levelFive","levelSix","levelSeven","levelEight","hasBeenLoaded","levelHasEnded","levels","levelsObj","currentLevelNumber","maxLevelNumber","characters","party","selectedChar","countToReach","moveFinishCount","livingEnemies","livingChars","currentAbilityBoxes","hotkeys","statChar1","statChar2","currentShowingAbilityDescription","heroStatcontainer","heroStatsBlocks","heroNameplateSelectors","statSelectorNames","statImages","statAbilities1","statAbilities2","abDescShader","partySelectorButton","partySelectorNames","characterNameDisplays","showAbilityDescription","side","num","hero","char","statImg","nameStat","levelStat","hpStat","dmgStat","defenseStat","innerHTML","partyCharSelected","partyCharIdx","addBlueBorder","removeBlueBorder","id","removeEventListener","shouldSwap","statCharSelected","swapStatDisp","e","currentTarget","sideCheck","charIndex","tarId","sideNum","initiateStatSwap","addDeathListener","MutationObserver","mutations","forEach","mutationRecord","en","endGame","createXPObserver","addCharXP","addEntityEvents","cloneArr","selfIndex","splice","deSelect","styleAbilityBox","aBoxes","select","beginCurrentLevel","beginLevelButton","fadeOut","beginLevel","returnToSelectPage","selectChar","selectEnemy","console","log","allyClickEvents","entityName","className","stopPropagation","enemyClickEvents","keydownEvent","key","abilityClick","arr","setAbilityBoxes","abilityBoxes","initializeGameOpening","deSelectButton","levelNumber","levelNameDisp","levelMessage","fadeIn","setInitialTargets","loadInCharacters","chars","targetIndex","setAvailableAbilities","boxes","touchingVertically","checkPosBox","setRandomSpawn","enemy","checkPositions","positionFound","p1","p2","boxEntities","backgroundImg","abilityHotkey","hpBar","hotkeyInput","abilityClassName","observerObserve","observe","attributes","attributeFilter","charsList","projectiles","allCharsList","allEnemyList","disconnect","endMoveChars","fadeOutGame","xpObserverObserve","modEndPos","widthExtra","expWords","xpPercent","xpPerC","xpPerInterval","xpInterval","levelUp","won","theThing","actionIterations","disp","resetGame","levChars","levEnems"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","//                              Cleric Abilities\r\n\r\nconst groupHeal = (entity) => {\r\n    for (let i = 0; i < entity.allies.length; i++) {\r\n        if (entity.allies[i].hp > 0) {\r\n            entity.allies[i].hp -= entity.dmg * 2;\r\n            if (entity.allies[i].hp > 100) { entity.allies[i].hp = 100; }\r\n            entity.setOverlay(entity.allies[i]);\r\n            entity.allies[i].setHpBars();\r\n            setBorder(entity.allies[i]);\r\n        }\r\n    }\r\n    return 16;\r\n}\r\n\r\nconst protection = (entity, target) => {\r\n    if (!checkAbilityPossible(entity, 1, target)) { return false; }\r\n    target.tempHP -= entity.dmg;\r\n    target.armor -= entity.dmg;\r\n    target.setHpBars();\r\n    let overlay = document.createElement(\"div\");\r\n    overlay.classList.add(\"oval-shape\");\r\n    document.getElementById(\"game-container\").appendChild(overlay);\r\n    overlay.style.backgroundColor = 'blue';\r\n    overlay.style.top = (target.pos[1] + 40) + 'px';\r\n    overlay.style.left = target.pos[0] + 'px';\r\n    overlay.style.width = target.img.width + 'px';\r\n    overlay.style.height = target.img.height + 'px';\r\n    setTimeout(() => {\r\n        target.armor += entity.dmg;\r\n        overlay.remove();\r\n    }, 8000);\r\n    let timeCount = 0;\r\n    let timer = setInterval(() => {\r\n        timeCount += 20;\r\n        overlay.style.top = (target.pos[1] + 40) + 'px';\r\n        overlay.style.left = target.pos[0] + 'px';\r\n        if (timeCount >= 8000) {\r\n            clearInterval(timer);\r\n        }\r\n    }, 20)\r\n    return 20;\r\n}\r\n\r\n//                              Warrior Abilities\r\n\r\nconst powerSwing = (entity, target) => {\r\n    if (!checkAbilityPossible(entity, 0, target)) { return false; }\r\n    target.hp -= Math.ceil(entity.dmg * 1.5);\r\n    // knockbackTarget(entity, 80);\r\n    target.setHpBars();\r\n    target.stunned = true;\r\n    target.img.src = target.baseImg.src;\r\n    target.imgCycle = 0;\r\n    setBorder(target);\r\n    if (target.hp <= 0) {\r\n        entity.killEntitiy(target);\r\n    }\r\n    setTimeout(() => {\r\n        target.stunned = false;\r\n    }, 2000);\r\n    return 12;\r\n}\r\n\r\nconst charge = (entity, target) => {\r\n    if (!checkAbilityPossible(entity, 1, target, true)) { return false; }\r\n    entity.lockedIntoAbility = true;\r\n    entity.ms += 15;\r\n    entity.trackTarget(target, true);\r\n    if (target.baseDMG > 0) {\r\n        target.target = entity;\r\n        target.autoAttack(entity);\r\n    }\r\n    let inter = setInterval(() => {\r\n        if (!entity.lockedIntoAbility) {\r\n            entity.ms -= 15;\r\n            clearInterval(inter);\r\n        }\r\n    }, 40)\r\n    return 10;\r\n}\r\n\r\n//                              Rogue Abilities\r\n\r\nconst poisonDagger = (entity, target) => {\r\n    if (!checkAbilityPossible(entity, 0, target)) { return false; }\r\n    let timer = 0;\r\n    target.slowed = 50;\r\n    target.ms -= Math.floor(target.baseMS / 2);\r\n    let int = setInterval(() => {\r\n        if (!target || target.container.style.display === 'none') {\r\n            clearInterval(int);\r\n            return;\r\n        }\r\n        timer++;\r\n        target.hp -= Math.floor(Math.ceil(entity.dmg * 3) / 6);\r\n        target.setHpBars();\r\n        setBorder(target);\r\n        if (target.hp <= 0) {\r\n            entity.killEntitiy(target);\r\n            clearInterval(int)\r\n        }\r\n        if (timer > 5) {\r\n            clearInterval(int);\r\n            target.slowed = false;\r\n            target.ms += Math.floor(target.baseMS / 2);\r\n        }\r\n    }, 500)\r\n    return 10;\r\n}\r\n\r\nconst backstab = (entity, target) => {\r\n    if (!checkAbilityPossible(entity, 1, target)) { return false; }\r\n    if (entity.img.style.transform === target.img.style.transform) {\r\n        target.hp -= Math.ceil(entity.dmg * 2);\r\n    } else {\r\n        target.hp -= Math.ceil(entity.dmg * 5);\r\n    }\r\n    target.setHpBars();\r\n    setBorder(target);\r\n    if (target.hp <= 0) {\r\n        entity.killEntitiy(target);\r\n    }\r\n    return 15;\r\n}\r\n\r\n//                              Wizard Abilities\r\n\r\nconst meteor = (entity, target) => {\r\n    if (!checkAbilityPossible(entity, 0, target)) {return false;}\r\n    const fireblastDiv = document.getElementById('firebomb-div');\r\n    fireblastDiv.style.opacity = '70%';\r\n    spellTrack(fireblastDiv, entity, target, (entity, img) => {\r\n        // console.log('entity: ', entity, \" img: \", img);\r\n        img.style.display = 'none';\r\n        causeAoEEffect(entity, 400, 400, target);\r\n    });\r\n    return 14;\r\n}\r\n\r\nconst freeze = (entity, target) => {\r\n    for (let i = 0; i < entity.enemies.length; i++) {\r\n        if (entity.enemies[i].container.style.display !== 'none' && entity.enemies[i].hp > 0) {\r\n            entity.enemies[i].rooted = true;\r\n            entity.enemies[i].ms -= Math.floor(entity.enemies[i].baseMS / 2);\r\n            const ice = document.createElement(\"div\");\r\n            ice.classList.add(\"under-foot\");\r\n            document.getElementById(\"game-container\").appendChild(ice);\r\n            ice.style.top = (entity.enemies[i].pos[1] + entity.enemies[i].container.offsetHeight) + 'px';\r\n            ice.style.left = entity.enemies[i].pos[0] + 'px';\r\n            ice.style.width = entity.enemies[i].img.width + 'px';\r\n            setTimeout(() => {\r\n                entity.enemies[i].rooted = false;\r\n                ice.remove()\r\n            }, 2000)\r\n            setTimeout(() => {\r\n                entity.enemies[i].ms += Math.floor(entity.enemies[i].baseMS / 2);\r\n            }, 6000)\r\n        }\r\n    }\r\n    return 25;\r\n}\r\n\r\n\r\n\r\nfunction setBorder(target) {\r\n    if (target && !target.container.style.display === 'none') {\r\n        if (target.img.style.border !== \"5px solid gold\") {\r\n            if (entity.baseDMG > 0) {\r\n                target.img.style.border = \"4px solid red\";\r\n            } else {\r\n                target.img.style.border = \"4px solid green\";\r\n            }\r\n            let borderInterval = setInterval(() => {\r\n                if (target.img.style.border !== \"5px solid gold\") {\r\n                    target.img.style.border = \"none\";\r\n                }\r\n                clearInterval(borderInterval);\r\n            }, 500);\r\n        }\r\n    }\r\n}\r\n\r\nconst warriorAbilities = [powerSwing, charge];\r\nconst clericAbilities = [groupHeal, protection];\r\nconst wizardAbilities = [meteor, freeze];\r\nconst rogueAbilities = [poisonDagger, backstab];\r\nconst paladinAbilities = [];\r\nconst bardAbilities = [];\r\nconst rangerAbilities = [];\r\nconst warlockAbilities = [];\r\nexport const allAbilities = [warriorAbilities, clericAbilities, wizardAbilities, rogueAbilities,\r\n                                paladinAbilities, bardAbilities, rangerAbilities, warlockAbilities];\r\n\r\n                                \r\nfunction checkAbilityPossible(entity, abNum, target, infiniteRange=false) {\r\n    if (target && (infiniteRange || entity.withinAttackRange(target)) && target.hp > 0) {\r\n        return true;\r\n    }\r\n    entity.abilityShouldCast[abNum] = true;\r\n    document.getElementsByClassName(entity.imgName + '-inner-ability-divs')[abNum].style.backgroundColor = 'lawngreen';\r\n    return false;\r\n}\r\n\r\nconst lightningAutoAttack = (entity, target) => {\r\n    let pos = [entity.pos[0] + 30 + entity.img.width / 2, entity.pos[1] + 38];\r\n    if (entity.img.style.transform === \"scaleX(-1)\") {\r\n        pos[0] -= 60\r\n    }\r\n    const div = drawLine(pos[0], pos[1], target.pos[0] + target.img.width/2, target.pos[1] + target.img.height/2);\r\n    const maxTime = Math.floor(entity.as / 8);\r\n    setTimeout(() => { div.remove(); }, maxTime);\r\n}\r\n\r\nexport const specialAttackEffects = [lightningAutoAttack];\r\n\r\nfunction knockbackTarget(entity, distance, target) {\r\n    const dX = target.pos[0] - entity.pos[0];\r\n    const dY = target.pos[1] - entity.pos[1];\r\n    const hypotenuse = Math.sqrt(Math.pow(dX, 2) + Math.pow(dY, 2));\r\n    const xRatio = dX / hypotenuse;\r\n    const yRatio = dY / hypotenuse;\r\n    const xRight = distance * xRatio;\r\n    const yDown = distance * yRatio;\r\n    target.pos[0] += Math.floor(xRight);\r\n    target.pos[1] += Math.floor(yDown);\r\n    target.container.style.left = target.pos[0] + 'px';\r\n    target.container.style.top = target.pos[1] + 'px';\r\n}\r\n\r\nfunction causeAoEEffect(entity, width, height, target) {\r\n    const targetCenter = [target.pos[0] + Math.floor(target.container.offsetWidth / 2),\r\n        target.pos[1] + Math.floor(target.container.offsetHeight/2)];\r\n    const topLeft1 = [targetCenter[0] - Math.floor(width / 2), targetCenter[1] - Math.floor(height / 2)];\r\n    const div = document.createElement(\"div\");\r\n    const leftSetback = (width - target.container.offsetWidth) / 2;\r\n    const topSetback = (height - target.container.offsetHeight) / 2;\r\n    div.style.position = \"absolute\";\r\n    div.style.left = target.pos[0] - leftSetback + 'px';\r\n    div.style.top = target.pos[1] - topSetback + 'px';\r\n    div.style.width = width + \"px\";\r\n    div.style.height = height + \"px\";\r\n    div.style.background = \"red\";\r\n    div.style.zIndex = \"8\";\r\n    document.getElementById(\"game-container\").appendChild(div);\r\n    setTimeout(() => {\r\n        div.remove();\r\n    }, 750);\r\n    for (let i = 0; i < entity.enemies.length; i++) {\r\n        if (entity.enemies[i].container.style.display !== 'none') {\r\n            if (imagesTouching(topLeft1, [width, height], entity.enemies[i].pos, [entity.enemies[i].img.width, entity.enemies[i].img.height])) {\r\n                // console.log('entity hit by fireball: ', entity.enemies[i].klass);\r\n                entity.enemies[i].hp -= Math.ceil(entity.dmg * 1.5);\r\n                entity.enemies[i].setHpBars();\r\n                setBorder(entity.enemies[i]);\r\n                if (entity.enemies[i].hp <= 0) {\r\n                    entity.killEntitiy(entity.enemies[i]);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction imageInside(topLeft1, sizes1, topLeft2, sizes2) {\r\n    return (topLeft1[0] > topLeft2[0] && topLeft1[0] + sizes1[0] < topLeft2[0] + sizes2[0]\r\n                && topLeft1[1] > topLeft2[1] && topLeft1[1] + sizes1[1] < topLeft2[1] + sizes2[1]);\r\n}\r\n\r\nfunction imagesTochingSide(topLeft1, sizes1, topLeft2, sizes2, i) {\r\n    return (topLeft1[i] < topLeft2[i] && topLeft1[i] + sizes1[i] > topLeft2[i]\r\n        || topLeft1[i] < topLeft2[i] + sizes2[i] && topLeft1[i] + sizes1[i] > topLeft2[i] + sizes2[i]);\r\n}\r\n\r\nfunction imagesTouching(topLeft1, sizes1, topLeft2, sizes2) {\r\n    for (let i = 0; i < 2; i++) {\r\n        if (!imagesTochingSide(topLeft1, sizes1, topLeft2, sizes2, i)) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n\r\nfunction createLineElement(x, y, length, angle) {\r\n    var styles = 'width: ' + length + 'px; '\r\n        + 'height: 0px; '\r\n        + '-moz-transform: rotate(' + angle + 'rad); '\r\n        + '-webkit-transform: rotate(' + angle + 'rad); '\r\n        + '-o-transform: rotate(' + angle + 'rad); '\r\n        + '-ms-transform: rotate(' + angle + 'rad); '\r\n        + 'position: absolute; '\r\n        + 'top: ' + y + 'px; '\r\n        + 'left: ' + x + 'px; '\r\n        + 'border: 2px solid purple; ';\r\n    let div = document.createElement(\"div\");\r\n    div.setAttribute('style', styles);\r\n    div.classList.add(\"extra-attack-effect\");\r\n    document.getElementById(\"game-container\").appendChild(div);\r\n    return div;\r\n    \r\n}\r\n\r\nfunction drawLine(x1, y1, x2, y2) {\r\n    const a = x1 - x2,\r\n        b = y1 - y2,\r\n        c = Math.sqrt(a * a + b * b);\r\n\r\n    const sx = (x1 + x2) / 2,\r\n        sy = (y1 + y2) / 2;\r\n\r\n    const x = sx - c / 2,\r\n        y = sy;\r\n\r\n    const alpha = Math.PI - Math.atan2(-b, a);\r\n\r\n    return createLineElement(x, y, c, alpha);\r\n}\r\n\r\nfunction spellTrack(img, entity, target, action) {\r\n    // console.log('img: ', img, ' entity: ', entity, ' target: ', target);\r\n    const changedPos = entity.pos.slice();\r\n    changedPos[0] += entity.img.width / 2; changedPos[1] += entity.img.height/2;\r\n    img.style.top = Math.floor(changedPos[1]) + 'px';\r\n    img.style.left = Math.floor(changedPos[0]) + 'px';\r\n    img.style.display = '';\r\n    const targetImg = target.img;\r\n    let interval = setInterval(() => move(), 20);\r\n    function move() {\r\n        if (img.style.display === 'none' || target.container.style.display === 'none') {\r\n            clearInterval(interval);\r\n            img.style.display = 'none';\r\n            // console.log('no target to hit with: ', img);\r\n            return;\r\n        }\r\n        const left = parseInt(img.style.left.replace('px', ''), 10);\r\n        const top = parseInt(img.style.top.replace('px', ''), 10);\r\n        if (imageInside([left, top], [img.offsetWidth, img.offsetHeight], target.pos, [targetImg.width, targetImg.height])) {\r\n            // console.log('images touching');\r\n            clearInterval(interval);\r\n            img.style.display = 'none';\r\n            action(entity, img);\r\n        } else {\r\n            const targetPos = target.pos.slice();\r\n            targetPos[0] += targetImg.width/2; targetPos[1] += targetImg.height/2;\r\n            let posChange = vectorToScalar(changedPos, targetPos);\r\n            changedPos[0] += posChange[0]; changedPos[1] += posChange[1];\r\n            img.style.top = Math.floor(changedPos[1]) + 'px';\r\n            img.style.left = Math.floor(changedPos[0]) + 'px';\r\n        }\r\n    }\r\n}\r\n\r\nfunction vectorToScalar(pos, endPos) {\r\n    const ms = 15;\r\n    const deltaX = pos[0] - endPos[0];\r\n    const deltaY = pos[1] - endPos[1];\r\n    if (Math.abs(deltaX) + Math.abs(deltaY) === 0) { return ([0, 0]); }\r\n    let xChange = -1 * ms * (deltaX / (Math.abs(deltaX) + Math.abs(deltaY)));\r\n    let yChange = -1 * ms * (deltaY / (Math.abs(deltaY) + Math.abs(deltaX)));\r\n    if (xChange === 0 || xChange === -0) {\r\n        xChange = 0;\r\n        // const numRepeats = Math.abs(Math.floor(deltaY / yChange)); // not needed for a track system\r\n        return ([xChange, yChange])\r\n    }\r\n    if (yChange === -0) { yChange = 0; }\r\n    // const numRepeats = Math.abs(Math.floor(deltaX / xChange));\r\n    return ([xChange, yChange])\r\n}","import classCreator from './entity';\nimport * as abilityObj from './abilities.js';\n\n// console.log('ab list', abilityObj);\nconst abilityList = Object.values(abilityObj);\n// console.log('ab array list', abilityObj)\n// console.log(abilityList[0]);\nconst charAbilities = abilityList[0];\nconst warriorAbilities = charAbilities[0];\nconst clericAbilities = charAbilities[1];\nconst wizardAbilities = charAbilities[2];\nconst rogueAbilities = charAbilities[3];\nconst paladinAbilities = charAbilities[4];\n\nconst waAbNames = ['Concussive Blow', 'Charge'];\nconst cAbNames = ['Prayer of Healing', \"Protection\"];\nconst wiAbNames = ['Fire Bomb', 'Freeze'];\nconst rAbNames = ['Poison Shiv', 'Backstab'];\nconst pAbNames = [];\n\nconst specialAttackEffects = abilityList[1];\nconst wizardAttackEffect = specialAttackEffects[0];\n\n/*\nclassName\nrange\nmaxHP\nMS\nAS\nDMG\ntrue\nimgName\npos\ndefense\nhasOverlay? 1=self 2=target\nspecialEffect\nab\nabNames\n*/\n\n// tank\nconst Warrior = new classCreator('Warrior', 10, 100, 10, 1000, 10, true, \"a1\", [100, 400], 20, null, null, warriorAbilities, waAbNames);\nconst Paladin = new classCreator('Paladin', 10, 100, 10, 1000, 10, true, \"a1\", [100, 400], 20, null, null, paladinAbilities, pAbNames);\n\n// heals\nconst Cleric = new classCreator('Cleric', 'infinite', 100, 10, 1500, -8, true, \"a2\", [400, 100], 12, 2, null, clericAbilities, cAbNames);\n\n// rdps\nconst Wizard = new classCreator('Wizard', \"infinite\", 100, 10, 2000, 20, true, \"a3\", [100, 100], 14, null, wizardAttackEffect, wizardAbilities, wiAbNames);\n\n// mdps\nconst Rogue = new classCreator(\"Rogue\", 10, 100, 10, 800, 10, true, \"a4\", [900, 500], 16, null, null, rogueAbilities, rAbNames);\n\nconst charactersArr = [Warrior, Cleric, Wizard, Rogue, Paladin];\nexport default charactersArr;","import classCreator from './entity.js';\nimport * as abilityObj from './abilities.js';\n\nconst abilityList = Object.values(abilityObj);\n\nconst specialAttackEffects = abilityList[1];\nconst wizardAttackEffect = specialAttackEffects[0];\n\n/*\nclassName\nrange\nmaxHP\nMS\nAS\nDMG\nfalse\nimg\npos\ndefense\nab\nabNames\nspecialEffect\n*/\n\n// rdps\nconst tutorialWizard = new classCreator('EWizard', 'infinite', 60, 10, 1500, 7, false, 'e3', [1000, 600], 8, null, wizardAttackEffect);\nconst ghettoWizard = new classCreator('EWizard', 'infinite', 60, 10, 1500, 12, false, 'e3', [500, 500], 8, null, wizardAttackEffect);\nconst wizard2 = new classCreator('EWizard', 'infinite', 70, 10, 1500, 13, false, 'e3', [500, 500], 14, null, wizardAttackEffect);\nconst wizard3 = new classCreator('EWizard', 'infinite', 70, 10, 1500, 13, false, 'e1', [700, 200], 14, null, wizardAttackEffect); // fix\nconst EWizard = new classCreator('EWizard', 'infinite', 100, 10, 2000, 20, false, \"e3\", [500, 500], 14, null, wizardAttackEffect);\n\n// heals\nconst tutorialCleric = new classCreator('ECleric', 'infinite', 100, 10, 2000, -7, false, \"e2\", [1000, 300], 8, 2)\nconst dumbCleric = new classCreator('ECleric', 'infinite', 100, 10, 2000, -8, false, \"e2\", [1000, 100], 8, 2);\nconst cleric2 = new classCreator('ECleric', 'infinite', 100, 10, 1750, -11, false, \"e2\", [1000, 100], 12, 2);\nconst cleric3 = new classCreator('ECleric', 'infinite', 100, 10, 1750, -11, false, \"e4\", [300, 400], 12, 2);\nconst ECleric = new classCreator('ECleric', 'infinite', 100, 10, 1500, -8, false, \"e2\", [1000, 100], 12, 2);\n\n// mdps\nconst tutorialRogue = new classCreator(\"ERogue\", 10, 80, 10, 1200, 6, false, \"e4\", [700, 200], 14);\nconst loserRogue = new classCreator(\"ERogue\", 10, 80, 10, 1200, 8, false, \"e4\", [700, 200], 14);\nconst rogue2 = new classCreator(\"ERogue\", 10, 80, 10, 1200, 8, false, \"e4\", [700, 200], 14);\nconst rogue3 = new classCreator(\"ERogue\", 10, 80, 10, 1200, 8, false, \"e2\", [500, 500], 14);\nconst ERogue = new classCreator(\"ERogue\", 10, 100, 10, 800, 10, false, \"e4\", [700, 200], 16);\n\n// tank\nconst punchingBag = new classCreator('EWarrior', 10, 50, 10, 1000, 1, false, \"e1\", [650, 500], 20);\nconst tutorialWarrior = new classCreator('EWarrior', 10, 80, 10, 1000, 6, false, \"e1\", [650, 500], 20);\nconst weakWarrior = new classCreator('EWarrior', 10, 80, 10, 1000, 8, false, \"e1\", [300, 400], 20);\nconst warrior2 = new classCreator('EWarrior', 10, 80, 10, 1000, 8, false, \"e1\", [300, 400], 20);\nconst warrior3 = new classCreator('EWarrior', 10, 80, 10, 1000, 8, false, \"e3\", [1000, 100], 20);\nconst EWarrior = new classCreator('EWarrior', 10, 120, 10, 1000, 10, false, \"e1\", [300, 400], 20);\n\n// level 1\nexport const intro = [punchingBag];\n\n// level 2\nexport const healIntro = [tutorialWarrior, tutorialCleric];\n\n// level 3\nexport const rangedIntro = [tutorialWarrior, tutorialCleric, tutorialWizard];\n\n// level 4\nexport const puttinItAllTogetha = [tutorialWarrior, tutorialCleric, tutorialWizard, tutorialRogue];\n\n// level 5\nexport const ezDoppelganger = [weakWarrior, dumbCleric, ghettoWizard, loserRogue];\n\n// level 6\nexport const level3 = [wizard2, wizard3, cleric2, cleric3];\n\n// level 7\nexport const level2 = [rogue2, rogue3, warrior2, warrior3];\n\n// level 8\nexport const doppelganger = [EWarrior, ECleric, EWizard, ERogue];\n","class Entity { // this. is selectedChar\n    constructor(klass=\"\", range=0, baseHP=0, ms=0, attackSpeed=0, attackDMG, allied, img=\"\", pos=[0, 0], defense=0,\n            hasAttackOverlay = null, extraAttackAnimation = null, abilities = [], abilityNames = []) {\n        this.klass = klass;\n        this.range = range;\n        this.trueBaseHp = baseHP;\n        this.baseHP = baseHP;\n        this.hp = this.baseHP;\n        this.tempHP = 0;\n        this.baseMS = ms; // speed / time\n        this.ms = this.baseMS;\n        this.allied = allied; // true === player character\n        this.pos = pos;\n        this.basePos = []; this.basePos[0] = pos[0]; this.basePos[1] = pos[1];\n        this.baseAS = attackSpeed;\n        this.as = this.baseAS;\n        this.trueBaseDMG = attackDMG;\n        this.baseDMG = attackDMG;\n        this.dmg = this.baseDMG;\n        this.trueBaseDefense = defense;\n        this.baseDefense = defense\n        this.defense = this.baseDefense;\n        if (this.allied) {\n            this.xp = 0;\n            this.level = 1;\n            this.nextLevelXP = 100;\n        }\n\n        this.allAbilities = abilities;\n        // this.abilities = abilities; // change on pushed ver\n        this.abilities = [];\n        this.abilityNames = abilityNames;\n        this.abilityAvailable = [true, true, true, true];\n        this.abilityShouldCast = [false, false, false, false];\n        this.abilityContainer;\n\n        this.hotkeyDisplay;\n        this.hotkey;\n\n        this.imgName = img;\n        this.img; // base standing image\n        this.attackImages; // cycle through array of images\n        this.moveImages; // cycle through array of images\n        this.baseImg; // standard stand image\n        this.container;\n        this.hpContainerLeft;\n        this.hpContainerRight;\n\n        this.attackOverlay = hasAttackOverlay;\n\n        this.currentAction;\n        this.currentAnimation;\n        this.imgCycle = 0;\n        this.isAttacking = false;\n        this.isMoving = false;\n        this.extraAttackAnimation = extraAttackAnimation;\n\n        // CC effects\n        this.stunned = false;\n        this.slowed = false;\n        this.rooted = false;\n        this.feared = false;\n\n        this.lockedIntoAbility = false;\n\n        this.target;\n\n        this.allies;\n        this.enemies;\n\n        this.movingOutTheWay = false;\n\n        this.observer;\n        this.xpObserver;\n        this.observationToken = true;\n\n        window.addEventListener('load', () => {\n            this.addInlineStyle();\n        });\n    }\n\n    addInlineStyle() {\n        this.img = document.getElementsByClassName(this.imgName + \"-image-display\")[0];\n        this.baseImg = document.getElementsByClassName(this.klass)[0];\n        this.img.src = this.baseImg.src;\n        this.attackImages = document.getElementsByClassName(this.klass);\n        this.container = document.getElementById(`${this.imgName}-display`);\n        this.container.style.opacity = 0; // fading in so started at op 0\n        this.container.style.display = 'none';\n        this.img.style.display = \"\";\n        this.container.style.left = this.pos[0] + \"px\";\n        this.container.style.top = this.pos[1] + \"px\";\n        this.hotkeyDisplay = document.getElementById(this.imgName + '-hotkey-display');\n        this.hotkey = document.getElementById(this.imgName + '-keybind').value;\n        this.hpContainerLeft = document.getElementById(this.imgName + '-hp-left');\n        this.hpContainerRight = document.getElementById(this.imgName + '-hp-right');\n        if (this.attackOverlay) {\n            this.attackOverlay = [document.getElementById(this.imgName + '-effect-overlay'), this.attackOverlay];\n        }\n        if (this.allied) {\n            this.abilityContainer = document.getElementById(this.imgName + '-ability-full-container');\n        }\n    }\n\n    levelUp() {\n        const levelUpDisp = document.getElementById(this.imgName + '-level-up');\n        // console.log('levelUpDisp: ', levelUpDisp);\n        levelUpDisp.style.display = '';\n        fastFadeOut(levelUpDisp);\n        this.xp -= this.nextLevelXP;\n        this.nextLevelXP += (this.nextLevelXP * 0.1);\n        this.level++;\n        this.baseDefense += Math.ceil(this.trueBaseDefense * 0.05);\n        this.baseDMG += Math.ceil(this.trueBaseDMG * 0.1);\n        this.baseHP += Math.ceil(this.trueBaseHp * 0.1);\n        switch (this.level) {\n            case (4):\n                if (this.allAbilities[0]) {\n                    this.abilities.push(this.allAbilities[0]);\n                }\n                break;\n            case (8):\n                if (this.allAbilities[1]) {\n                    this.abilities.push(this.allAbilities[1]);\n                }\n                break;\n            case (12):\n                if (this.allAbilities[2]) {\n                    this.abilities.push(this.allAbilities[2]);\n                }\n                break;\n            case (16):\n                if (this.allAbilities[3]) {\n                    this.abilities.push(this.allAbilities[3]);\n                }\n                break;\n        }\n    }\n\n    vectorToScalar(endPos) {\n        const deltaX = this.pos[0] - endPos[0];\n        const deltaY = this.pos[1] - endPos[1];\n        if (Math.abs(deltaX) + Math.abs(deltaY) === 0) {\n            return ([0, 0, 0]);\n        }\n        let xChange = -1 * this.ms * (deltaX / (Math.abs(deltaX) + Math.abs(deltaY)));\n        let yChange = -1 * this.ms * (deltaY / (Math.abs(deltaY) + Math.abs(deltaX)));\n        if (xChange === 0 || xChange === -0) {\n            xChange = 0;\n            const numRepeats = Math.abs(Math.floor(deltaY / yChange));\n            return ([xChange, yChange, numRepeats])\n        }\n        if (yChange === -0) {\n            yChange = 0;\n        }\n        \n        const numRepeats = Math.abs(Math.floor(deltaX / xChange));\n        return ([xChange, yChange, numRepeats])\n    }\n\n    move(endPos, attackOnFinish = false, addXPBar=false, lockedIn=false) {\n        this.movingOutTheWay = true;\n        this.clearIntervals();\n        this.isMoving = true;\n        endPos[0] = Math.floor(endPos[0] - (this.container.offsetWidth * (1/2)));\n        endPos[1] = Math.floor(endPos[1] - (this.container.offsetHeight * (1/2)));\n        let pos = this.pos;\n        let posChange = this.vectorToScalar(endPos);\n        // console.log(\"pos change on move\", posChange);\n        const bigDiv = document.getElementById('game-container');\n        const width = bigDiv.offsetWidth;\n        const height = bigDiv.offsetHeight;\n        if (pos[0] - endPos[0] < 0) {\n            this.img.style.transform = \"scaleX(1)\";\n        } else {\n            this.img.style.transform = \"scaleX(-1)\";\n        }\n        this.currentAction = setInterval(() => frame(this), 20);\n        function frame(self) {\n            if (!(self.lockedIntoAbility || self.stunned || self.rooted) || lockedIn) {\n                if (posChange[2] === 0) {\n                // close animation\n                    self.clearIntervals();\n                    self.lockedIntoAbility = false;\n                    self.movingOutTheWay = false;\n                    pos[0] = Math.floor(pos[0]); pos[1] = Math.floor(pos[1]);\n                    if (attackOnFinish) {\n                        // console.log('self in move end: ', self);\n                        self.autoAttack(attackOnFinish); // needs editing\n                    } else if (addXPBar) {\n                        // console.log('move ended');\n                        self.img.style.transform = \"scaleX(1)\";\n                        self.img.style.border = '5px solid gold';\n                    }\n                } else { // need to add something for if (attackOnFinish) then update move destination to be the target's new position (with the modifiers)\n                // begin some kind of animation\n                    pos[0] += posChange[0]; pos[1] += posChange[1];\n                    if (pos[0] + Math.floor(self.container.offsetWidth) + 10 > width) { pos[0] = width - Math.floor(self.container.offsetWidth) - 10;}\n                    if (pos[0] < 10) {pos[0] = 10;}\n                    if (pos[1] + Math.floor(self.container.offsetHeight) + 10 > height) { pos[1] = height - Math.floor(self.container.offsetHeight) - 10;}\n                    if (pos[1] < 10) {pos[1] = 10;}\n                    // console.log('posChange: ', posChange);\n                    // console.log('pos: ', pos);\n    \n                    self.container.style.top = Math.floor(pos[1]) + 'px';\n                    self.container.style.left = Math.floor(pos[0]) + 'px';\n                    posChange[2] -= 1;\n                }\n            }\n        }\n    }\n\n    withinAttackRange() {\n        if (this.range === 'infinite') { return true; }\n        const widthAddition = Math.floor((this.img.width / 2) + (this.target.img.width / 2));\n        if (this.pos[0] > this.target.pos[0] - widthAddition - this.range && this.pos[0] < this.target.pos[0] + widthAddition + this.range) {\n            const heightAddition = Math.floor(this.img.height / 4);\n            if (this.pos[1] > this.target.pos[1] - heightAddition && this.pos[1] < this.target.pos[1] + heightAddition) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    killEntitiy(entity) {\n        // console.log(entity.klass, \"killed\");\n        self.lockedIntoAbility = false;\n        entity.clearIntervals();\n        if (entity.abilityContainer) { entity.abilityContainer.style.display = 'none'; }\n        entity.hp = -100;\n        entity.container.style.display = \"none\";\n    }\n\n    setHpBars() {\n        let leftWidth = Math.floor((this.hp / this.baseHP) * 100);\n        let rightWidth = 100 - leftWidth;\n        if (leftWidth < 0) leftWidth = 0;\n        if (rightWidth < 0) rightWidth = 0;\n        this.hpContainerLeft.style.width = leftWidth + '%';\n        this.hpContainerRight.style.width = rightWidth + '%';\n    }\n\n    setTargetAndAttack() {\n        // console.log(this.klass, \"has finished attacking\", this.target.klass);\n\n        if (this.baseDMG > 0) {\n            this.enemies = shuffle(this.enemies);\n            for (let i = 0; i < this.enemies.length; i++) {\n                if (this.enemies[i].hp > 0) {\n                    this.target = this.enemies[i];\n                }\n            }\n            if (this.target.hp < 0) { return; }\n        } else {\n            this.allies = shuffle(this.allies);\n            for (let i = 0; i < this.allies.length; i++) {\n                if (this.allies[i].hp > 0) {\n                    this.target = this.allies[i];\n                }\n            }\n            if (this.target.hp < 0) { return; }\n        }\n        // console.log(this.klass, \"is now attacking\", this.target.klass);\n        this.autoAttack(this.target);\n    }\n\n    charactersStacked() {\n        for (let i = 0; i < this.allies.length; i++) {\n            if (!this.allies[i].movingOutTheWay && !(this.allies[i].img.style.display === 'none')) {                \n                const widthAddition = Math.floor(this.img.width / 2);\n                if (this.pos[0] > this.allies[i].pos[0] - widthAddition && this.pos[0] < this.allies[i].pos[0] + widthAddition) {\n                    const heightAddition = Math.floor(this.img.height / 2);\n                    if (this.pos[1] > this.allies[i].pos[1] - heightAddition && this.pos[1] < this.allies[i].pos[1] + heightAddition) {\n                        // console.log(this.klass, \"is moving to avoid\", this.allies[i].klass);\n                        return true;\n                    }\n                }\n            }\n        }\n        return false;\n    }\n\n    trackTarget(target, lockedIn=false) { // hot code\n        this.clearIntervals();\n        this.isMoving = true;\n        const bigDiv = document.getElementById('game-container');\n        const difference = Math.floor((window.innerWidth - bigDiv.offsetWidth) / 2);\n        const checker = difference + Math.floor(bigDiv.offsetWidth);\n        this.currentAction = setInterval(() => move(this), 20);\n        function move(self) {\n            if (!(self.lockedIntoAbility || self.stunned || self.rooted) || lockedIn) {\n                if (target.container.style.display === 'none') {\n                    self.clearIntervals();\n                    if (!self.allied) {\n                        self.setTargetAndAttack()\n                    }\n                    return;\n                }\n                if (self.withinAttackRange(target)) {\n                    clearInterval(self.currentAction);\n                    self.lockedIntoAbility = false;\n                    self.autoAttack(target);\n                    // console.log('auto attack called from track');\n                } else {\n                    const pos = self.pos;\n                    const movePos = target.pos.slice();\n                    if (pos[0] - movePos[0] < 0) {\n                        movePos[0] -= target.img.width;\n                        self.img.style.transform = \"scaleX(1)\";\n                    } else {\n                        movePos[0] += target.img.width;\n                        self.img.style.transform = \"scaleX(-1)\";\n                    }\n                    let posChange = self.vectorToScalar(movePos);\n                    pos[0] += posChange[0]; pos[1] += posChange[1];\n                    if (pos[0] + Math.floor(self.img.width) > checker) { pos[0] = checker - Math.floor(self.img.width); }\n                    if (pos[0] < 15) { pos[0] = 15; }\n                    if (pos[1] + Math.floor(self.img.height) > 850) { pos[1] = 850 - Math.floor(self.img.height); }\n                    if (pos[1] < 15) { pos[1] = 15; }\n                    self.container.style.top = Math.floor(pos[1]) + 'px';\n                    self.container.style.left = Math.floor(pos[0]) + 'px';\n                }\n            }\n        }\n    }\n\n    setOverlay(targetChar) {\n        // create div for overlay\n        let attackOverlay = document.createElement(\"div\");\n        attackOverlay.classList.add(targetChar.imgName.substr(0, 1) + \"-heal-overlay\");\n        document.getElementById(\"game-container\").appendChild(attackOverlay);\n        attackOverlay.style.top = (targetChar.pos[1] + 40) + 'px';\n        attackOverlay.style.left = targetChar.pos[0] + 'px';\n        attackOverlay.style.width = targetChar.img.width + 'px';\n        attackOverlay.style.height = targetChar.img.height + 'px';\n        const clearTime = Math.floor(this.as / 2);\n        // 50%op => 0%op over clearTime / 20\n        const iterations = clearTime / 20;\n        let opacity = 50;\n        const opSubtraction = opacity / iterations;\n        let timeCheck = 0;\n        let stackInterval = setInterval(() => {\n            attackOverlay.style.top = targetChar.pos[1] + 40 + 'px';\n            attackOverlay.style.left = targetChar.pos[0] + 'px';\n            opacity -= opSubtraction;\n            attackOverlay.style.opacity = opacity + '%';\n            timeCheck += 20;\n            if (timeCheck >= clearTime || targetChar.img.style.display === 'none') {\n                clearInterval(stackInterval);\n                attackOverlay.remove();\n            }\n        }, 20);\n    }\n\n    beginAttack(lockedIn=false) {\n        // make some kind of animation start\n        this.clearIntervals();\n        this.isAttacking = true;\n        if (this.allied) {\n            for (let i = 0; i < 4; i++) {\n                // console.log(this.abilityShouldCast[i]);\n                if (this.abilityShouldCast[i]) {\n                    this.abilityShouldCast[i] = false;\n                    this.useAbility(i);\n                }\n            }\n        }\n        this.currentAnimation = setInterval(() => this.animateAttack(lockedIn), Math.floor(this.as / 4))\n    }\n\n    animateAttack(lockedIn=false) {\n        if (!(this.lockedIntoAbility || this.stunned) || lockedIn) {\n            if (!this.target || this.target.hp <= 0) {\n                self.lockedIntoAbility = false;\n                this.clearIntervals();\n                if (!this.allied) {\n                    // chose another hero to attack\n                    this.setTargetAndAttack();\n                    // maybe add something in for player to auto target upon deaths ?\n                }\n                return;\n            }\n            if (this.target.pos[0] < this.pos[0]) {\n                this.img.style.transform = \"scaleX(-1)\";\n            } else {\n                this.img.style.transform = \"scaleX(1)\";\n            }\n            this.imgCycle += 1;\n            if (this.imgCycle === 3) {\n                if (this.extraAttackAnimation) {\n                    this.extraAttackAnimation(this, this.target);\n                }\n                this.attack();\n            }\n            this.imgCycle = this.imgCycle % this.attackImages.length;\n            this.img.src = this.attackImages[this.imgCycle].src;\n        }\n    }\n\n    attack() {\n        if (!this.withinAttackRange(this.target)) {\n            this.trackTarget(this.target);\n            return;\n        } else {\n            if (this.dmg > 0) {\n                this.target.hp -= (this.dmg * 15 / this.target.defense);\n                if (!this.target.isMoving && !this.target.isAttacking && this.target.allied && this.target.dmg > 0) {\n                    this.target.target = this;\n                    this.target.autoAttack(this);\n                }\n            } else {\n                this.target.hp -= this.dmg;\n            }\n            if (this.attackOverlay) {\n                if (this.attackOverlay[1] === 1) {\n                    this.setOverlay(this);\n                } else {\n                    this.setOverlay(this.target);\n                }\n            }\n            if (this.target.hp > this.target.baseHP) { this.target.hp = this.target.baseHP; }\n            if (!this.target.allied && this.allied && this.target.baseDMG > 0 && this.defense > this.target.target.defense) {\n                this.target.target = this;\n                this.target.autoAttack(this);\n            }\n            this.target.setHpBars();\n\n            if (this.target.hp <= 0) {\n                this.killEntitiy(this.target);\n                if (!this.allied) {\n                    // chose another hero to attack\n                    this.setTargetAndAttack();\n                }\n            }\n            // console.log(\"border style: \", this.target.img.style.border);\n            if (this.target.img.style.border !== \"5px solid gold\") {\n                if (this.baseDMG > 0) {\n                    this.target.img.style.border = \"3px solid red\";\n                } else {\n                    this.target.img.style.border = \"3px solid green\";\n                } \n                setTimeout(() => {\n                    if (this.target && this.target.img.style.border !== \"5px solid gold\") {\n                        this.target.img.style.border = \"none\";\n                    }\n                }, 500);\n            }\n            if (this.range !== 'infinite' && this.charactersStacked()) {\n                this.movingOutTheWay = true;\n                const widthAddition = Math.floor(this.container.offsetWidth / 2);\n                const eWidthAddition = Math.floor(this.target.container.offsetWidth);\n                // const heightAddition = Math.floor(this.container.offsetHeight / 2);\n                const eHeightAddition = Math.floor(this.target.container.offsetHeight / 2);\n                if (this.img.style.transform === \"scaleX(-1)\") {\n                    // move to left side of target\n                    this.img.style.transform = \"scaleX(1)\";\n                    this.move([this.target.pos[0] - widthAddition, this.target.pos[1] + eHeightAddition], this.target)\n                } else {\n                    // move to right side of target;\n                    this.img.style.transform = \"scaleX(-1)\";\n                    this.move([this.target.pos[0] + (widthAddition + eWidthAddition), this.target.pos[1] + eHeightAddition], this.target)\n                }\n            }\n        }\n    }\n\n    autoAttack(targetChar) {\n        // console.log('auto attack target: ', targetChar);\n        this.target = targetChar;\n        if (this.withinAttackRange(targetChar)) {\n            if (this.pos[0] < targetChar.pos[0]) {\n                this.img.style.transform = \"scaleX(1)\";\n            } else {\n                this.img.style.transform = \"scaleX(-1)\";\n            }\n            this.beginAttack();\n        } else {\n            this.trackTarget(this.target);\n        }\n    }\n\n    clearIntervals() {\n        clearInterval(this.currentAction);\n        clearInterval(this.currentAnimation);\n        this.img.src = this.baseImg.src;\n        this.imgCycle = 0;\n        this.isAttacking = false;\n        this.isMoving = false;\n    }\n\n    useAbility(n) {\n        if (!this.abilityAvailable[n] || this.abilities.length === 0) {\n            return;\n        }\n        // console.log('ability', n, 'attempted');\n        this.abilityAvailable[n] = false;\n        const ab = this.abilities[n];\n        // console.log('ability: ', ab);\n        const cdTime = ab(this, this.target);\n        if (cdTime === false) {\n            // console.log('no target for ability');\n            this.abilityAvailable[n] = true;\n            return;\n        }\n        // console.log('seconds for ability cd: ', cdTime);\n        const innerBoxes = document.getElementsByClassName(this.imgName + '-inner-ability-divs');\n        // innerBoxes[n].style.animation = `inner-ability-animate ${cdTime}s linear 0s 1`; // didnt work\n        colorFade(innerBoxes[n], cdTime, [255, 0, 0], [0, 0, 255]);\n        let CDTimer = setInterval(() => {\n            this.abilityAvailable[n] = true;\n            // console.log(this.imgName, ' ability ', n, ' off CD');\n            clearInterval(CDTimer);\n        }, (cdTime * 1000));\n    }\n\n}\n\nexport default Entity;\n\n\nfunction colorFade(element, time, start, end) {\n    element.style.border = 'none';\n    element.style.backgroundColor = 'rgb(' + start.toString() + ')';\n    let currentColor = start.slice();\n    const numIntervals = time * 5;\n    let deltaX = Math.floor((end[0] - start[0]) / numIntervals);\n    let deltaY = Math.floor((end[1] - start[1]) / numIntervals);\n    let deltaZ = Math.floor((end[2] - start[2]) / numIntervals);\n    let timeCount = 0;\n    let interval = setInterval(() => {\n        currentColor[0] += deltaX;\n        currentColor[1] += deltaY;\n        currentColor[2] += deltaZ;\n        element.style.backgroundColor = 'rgb(' + currentColor.toString() + ')';\n        timeCount++;\n        if (timeCount >= (time * 5)) {\n            element.style.backgroundColor = 'rgb(' + end.toString() + ')';\n            element.style.border = '5px solid gold';\n            // console.log('color fade complete');\n            clearInterval(interval);\n        }\n\n    }, 200);\n}\n\nfunction shuffle(a) {\n    for (let i = a.length - 1; i > 0; i--) {\n        const j = Math.floor(Math.random() * (i + 1));\n        [a[i], a[j]] = [a[j], a[i]];\n    }\n    return a;\n}\n\nfunction fastFadeOut(element, action = null) {\n    let op = 25;\n    let timerDown = setInterval(function () {\n        if (op <= 0) {\n            clearInterval(timerDown);\n            element.style.display = 'none';\n            if (action) { action(); }\n        }\n        element.style.opacity = op / 25;\n        op -= 1;\n        if (element.style.display === 'none') {\n            clearInterval(timerDown);\n            element.style.opacity = 0;\n        }\n    }, 25);\n}\n\nfunction fastFadeIn(element, action = null) {\n    let op = 0;\n    let timerUp = setInterval(function () {\n        if (op >= 20) {\n            clearInterval(timerUp);\n            if (action) { action(); }\n        }\n        element.style.opacity = op / 20;\n        op += 1;\n        if (element.style.display === 'none') {\n            clearInterval(timerUp);\n            element.style.opacity = 0;\n        }\n    }, 25);\n}","import loadLevel from './screen_controllers/entity_controller';\n\nfunction slowFade(element, action = null) { let op = 80; let timerDown = setInterval(function () {if (op <= 0) { clearInterval(timerDown);\n    element.style.display = 'none'; if (action) { action(); } } element.style.opacity = op / 40; op -= 1;}, 50);}\n\nwindow.addEventListener('load', () => {\n\n    const gameTag = document.getElementById('game-tag');\n    gameTag.style.opacity = 0;\n    gameTag.style.display = '';\n    \n    const charsDisp = document.getElementById('title-screen-chars');\n    const closeButton = document.getElementById('close-button');\n    const hButtons = document.getElementsByClassName('h-button');\n    const keybindContainer = document.getElementById('full-keybind-container');\n    const levelButtonContainer = document.getElementById('level-button-container');\n    const levelButtonHeader = document.getElementById(\"level-button-container-header\");\n    const statsContainer = document.getElementById('heroes-stats-full-container');\n    const levelButtons = document.getElementsByClassName('level-button');\n    const backgroundImage = document.getElementById('background-image');\n    const titleBackground = document.getElementById('title');\n    const gameContainer = document.getElementById('game-container');\n    const partySelectorContainer = document.getElementById('party-selector-container');\n\n    const keybindInputs = document.getElementsByClassName('keybind-input');\n    for (let i = 0; i < keybindInputs.length; i++) {\n        keybindInputs[i].addEventListener(\"change\", () => handleKeybindInput(keybindInputs[i], i));\n    }\n\n    function handleKeybindInput(input, i) {\n        // console.log('pre-mod: ', input.value);\n        if (input.value.length > 1) {\n            input.value = input.value[0];\n        } else {\n            for (let j = 0; j < keybindInputs.length; j++) {\n                if (i !== j && keybindInputs[j].value === input.value) { keybindInputs[j].value = ''; }\n            }\n        }\n    }\n\n    function secondAction() {\n        const gTContainer = document.getElementById('game-tag-container');\n        gTContainer.style.display = 'none';\n        function closeAction() {\n            // controlsContainer.style.display = 'none';\n            for (let i = 0; i < hButtons.length; i++) { hButtons[i].style.display = ''; }\n            // controlsButton.style.display = '';\n            levelButtonHeader.style.display = 'none';\n            levelButtonContainer.style.display = 'none';\n            keybindContainer.style.display = 'none';\n            statsContainer.style.display = 'none';\n            closeButton.style.display = 'none';\n            partySelectorContainer.style.display = 'none';\n            charsDisp.style.display = '';\n            backgroundImage.src = titleBackground.src;\n            backgroundImage.style.opacity = 100;\n            backgroundImage.style.display = '';\n        }\n        closeAction();\n        for (let i = 0; i < levelButtons.length; i++) {\n            levelButtons[i].addEventListener('click', () => { \n                closeButton.style.display = 'none';\n                // closeButton.removeEventListener('click', closeAction);\n                charsDisp.style.display = 'none';\n                backgroundImage.style.display = 'none';\n                document.getElementById('background-image').style.height = '88%';\n                gameContainer.style.height = '88%';\n                document.getElementById('all-characters-ability-container').style.height = '12%';\n                loadLevel(i+1); \n            })\n        }\n        levelButtons[0].style.opacity = 100;\n        levelButtons[0].style.cursor = 'pointer';\n        closeButton.addEventListener('click', closeAction)\n        let hButtonPartialAction = () => {\n            for (let i = 0; i < hButtons.length; i++) { hButtons[i].style.display = 'none'; }\n            closeButton.style.display = '';\n            charsDisp.style.display = 'none';\n            backgroundImage.style.display = 'none';\n        }\n        hButtons[0].addEventListener('click', () => {\n            hButtonPartialAction();\n            levelButtonContainer.style.display = '';\n            levelButtonHeader.style.display = '';\n        })\n        hButtons[1].addEventListener('click', () => {\n            hButtonPartialAction();\n            keybindContainer.style.display = '';\n        })\n        hButtons[2].addEventListener('click', () => {\n            hButtonPartialAction();\n            statsContainer.style.display = '';\n        })\n        hButtons[3].addEventListener('click', () => {\n            hButtonPartialAction();\n            partySelectorContainer.style.display = '';\n        })\n\n    }\n    slowFade(gameTag, secondAction);\n})","// import * as charactersObj from '../entities/character';\r\nimport charactersArr from '../entities/character';\r\nimport * as enemiesObj from '../entities/enemy';\r\n\r\n// const charactersArr = Object.values(charactersObj);\r\nconst enemiesArr = Object.values(enemiesObj);\r\n\r\nclass Level {\r\n    constructor(name, enemyList, xp, message=\"\", actionChanges=()=>{}, characterList=charactersArr.slice(0, 4)) {\r\n        this.name = name;\r\n        this.enemyList = enemyList;\r\n        this.xp = xp;\r\n        this.message = message;\r\n        this.action = actionChanges;\r\n        this.characterList = characterList;\r\n        // this.actionExpended = false;\r\n    }\r\n}\r\n\r\nfunction modP(width, percent) {\r\n    return (Math.floor(width * percent));\r\n}\r\n\r\nfunction applyMod(entity, mod, x=true) {\r\n    const container = document.getElementById('game-container');\r\n    const width = Math.floor(container.offsetWidth);\r\n    const height = Math.floor(container.offsetHeight);\r\n    if (x) {\r\n        entity.pos[0] = modP(width, (mod/100));\r\n        entity.basePos[0] = entity.pos[0];\r\n    } else {\r\n        entity.pos[1] = modP(height, (mod / 100));\r\n        entity.basePos[1] = entity.pos[1];\r\n    }\r\n}\r\n\r\nconst firstFourActions = () => {\r\n    applyMod(charactersArr[0], 35);\r\n    applyMod(charactersArr[1], 15);\r\n    applyMod(charactersArr[2], 15);\r\n    applyMod(charactersArr[3], 55);\r\n    applyMod(charactersArr[0], 55, false);\r\n    applyMod(charactersArr[1], 33, false);\r\n    applyMod(charactersArr[2], 66, false);\r\n    applyMod(charactersArr[3], 22, false);\r\n\r\n    applyMod(enemiesArr[0][0], 55);\r\n    applyMod(enemiesArr[0][0], 55, false);\r\n    applyMod(enemiesArr[1][0], 55);\r\n    applyMod(enemiesArr[1][1], 75);\r\n    applyMod(enemiesArr[1][0], 55, false);\r\n    applyMod(enemiesArr[1][1], 33, false);\r\n    applyMod(enemiesArr[2][2], 75);\r\n    applyMod(enemiesArr[2][2], 66, false);\r\n    applyMod(enemiesArr[3][3], 35);\r\n    applyMod(enemiesArr[3][3], 22, false);\r\n}\r\n\r\nconst actionFive = () => {\r\n    // WaCWiR\r\n    applyMod(charactersArr[0], 65);\r\n    applyMod(charactersArr[1], 45);\r\n    applyMod(charactersArr[2], 45);\r\n    applyMod(charactersArr[3], 25);\r\n    applyMod(charactersArr[0], 45, false);\r\n    applyMod(charactersArr[1], 25, false);\r\n    applyMod(charactersArr[2], 65, false);\r\n    applyMod(charactersArr[3], 45, false);\r\n    // WiRWaC\r\n    applyMod(enemiesArr[4][0], 10);\r\n    applyMod(enemiesArr[4][1], 15);\r\n    applyMod(enemiesArr[4][2], 75);\r\n    applyMod(enemiesArr[4][3], 80);\r\n    applyMod(enemiesArr[4][0], 20, false);\r\n    applyMod(enemiesArr[4][1], 65, false);\r\n    applyMod(enemiesArr[4][2], 65, false);\r\n    applyMod(enemiesArr[4][3], 20, false);\r\n}\r\nconst actionSix = () => {\r\n    // WaCWiR\r\n    applyMod(charactersArr[0], 60);\r\n    applyMod(charactersArr[1], 60);\r\n    applyMod(charactersArr[2], 30);\r\n    applyMod(charactersArr[3], 30);\r\n    applyMod(charactersArr[0], 60, false);\r\n    applyMod(charactersArr[1], 30, false);\r\n    applyMod(charactersArr[2], 30, false);\r\n    applyMod(charactersArr[3], 60, false);\r\n    // WiRWaC\r\n    applyMod(enemiesArr[5][0], 5);\r\n    applyMod(enemiesArr[5][1], 45);\r\n    applyMod(enemiesArr[5][2], 45);\r\n    applyMod(enemiesArr[5][3], 85);\r\n    applyMod(enemiesArr[5][0], 45, false);\r\n    applyMod(enemiesArr[5][1], 10, false);\r\n    applyMod(enemiesArr[5][2], 70, false);\r\n    applyMod(enemiesArr[5][3], 45, false);\r\n}\r\nconst actionSeven = () => {\r\n    applyMod(charactersArr[0], 50);\r\n    applyMod(charactersArr[1], 10);\r\n    applyMod(charactersArr[2], 35);\r\n    applyMod(charactersArr[3], 65);\r\n    applyMod(charactersArr[0], 20, false);\r\n    applyMod(charactersArr[1], 45, false);\r\n    applyMod(charactersArr[2], 60, false);\r\n    applyMod(charactersArr[3], 35, false);\r\n    applyMod(enemiesArr[6][0], 25);\r\n    applyMod(enemiesArr[6][1], 10);\r\n    applyMod(enemiesArr[6][2], 80);\r\n    applyMod(enemiesArr[6][3], 45);\r\n    applyMod(enemiesArr[6][0], 15, false);\r\n    applyMod(enemiesArr[6][1], 45, false);\r\n    applyMod(enemiesArr[6][2], 45, false);\r\n    applyMod(enemiesArr[6][3], 70, false);\r\n}\r\nconst actionEight = () => {\r\n    // WaCWiR\r\n    applyMod(charactersArr[0], 60);\r\n    applyMod(charactersArr[1], 60);\r\n    applyMod(charactersArr[2], 30);\r\n    applyMod(charactersArr[3], 30);\r\n    applyMod(charactersArr[0], 60, false);\r\n    applyMod(charactersArr[1], 30, false);\r\n    applyMod(charactersArr[2], 30, false);\r\n    applyMod(charactersArr[3], 60, false);\r\n    // WiRWaC\r\n    applyMod(enemiesArr[7][0], 45);\r\n    applyMod(enemiesArr[7][1], 10);\r\n    applyMod(enemiesArr[7][2], 80);\r\n    applyMod(enemiesArr[7][3], 45);\r\n    applyMod(enemiesArr[7][0], 15, false);\r\n    applyMod(enemiesArr[7][1], 45, false);\r\n    applyMod(enemiesArr[7][2], 45, false);\r\n    applyMod(enemiesArr[7][3], 70, false);\r\n}\r\n\r\nexport const levelZero = new Level('Zero', [], 0, \"\", null, charactersArr);\r\nexport const levelOne = new Level('One', enemiesArr[0], 20, \r\n    \"Click on the stick figure, the warrior, in black to select it. Then click on the red stick figure enemy to attack it or click anywhere on the map to move there. Once an action is performed, the character will keep doing it until given a new action.\",\r\n    firstFourActions, [charactersArr[0]]);\r\nexport const levelTwo = new Level('Two', enemiesArr[1], 80,\r\n    \"The character with a staff is a cleric healer. Click on it and then on an allied unit or itself to begin healing them. De-select a character without making an action by clicking the Red button on the top right. Defeat all enemies to clear the level.\",\r\n    firstFourActions, [charactersArr[0], charactersArr[1]]);\r\nexport const levelThree = new Level('Three', enemiesArr[2], 120,\r\n    \"The character with the blue hat, the wizard, can attack enemies from any range. Click on it then on an enemy to begin attacking immediately. \\nAttacking an enemy with the Warrior will cause them to focus their attacks on him.\",\r\n    firstFourActions, [charactersArr[0], charactersArr[1], charactersArr[2]]);\r\nexport const levelFour = new Level('Four', enemiesArr[3], 240,\r\n    \"The newest character addition is the rogue with the daggers. Each character has a unique role. The Warrior is the best tank, the rogue the fastest attacker, the wizard the most versitile damage dealer, and the cleric the healer.\",\r\n    firstFourActions, charactersArr);\r\nexport const levelFive = new Level('Five', enemiesArr[4],  300,\r\n    \"The tutorial levels are over. Time for more of a challenge\",\r\n    actionFive);\r\nexport const levelSix = new Level('Six', enemiesArr[5], 375, \"Wizards and Clerics\", actionSix);\r\nexport const levelSeven = new Level('Seven', enemiesArr[6], 450, \"All melee\", actionSeven);\r\nexport const levelEight = new Level('Eight', enemiesArr[7], 700, \"Fight yourself\", actionEight);","import * as levelsObj from '../levels/level';\r\nimport {fadeIn, fadeOut} from './fades';\r\n\r\nlet hasBeenLoaded = false;\r\nlet levelHasEnded = false;\r\n\r\nconst levels = Object.values(levelsObj);\r\nlet currentLevelNumber = 0;\r\nlet maxLevelNumber = 0; // change on pushed ver\r\nconst characters = levels[0].characterList;\r\nlet party = levels[5].characterList;\r\n\r\nlet selectedChar;\r\n\r\nlet countToReach = 0;\r\nlet moveFinishCount = 0;\r\n\r\nlet livingEnemies = {};\r\nlet livingChars = {};\r\n\r\nlet currentAbilityBoxes;\r\n\r\nlet hotkeys = {};\r\n\r\nwindow.addEventListener('load', () => {\r\n    let statChar1;\r\n    let statChar2;\r\n    let currentShowingAbilityDescription;\r\n    const heroStatcontainer = document.getElementById('heroes-button');\r\n    const heroStatsBlocks = document.getElementsByClassName('hero-stats');\r\n    const heroNameplateSelectors = document.getElementsByClassName('stat-selector');\r\n    const statSelectorNames = document.getElementsByClassName('stat-selector-name');\r\n    const statImages = document.getElementsByClassName('stats-img');\r\n    const statAbilities1 = document.getElementsByClassName('stat-ability-div-1');\r\n    const statAbilities2 = document.getElementsByClassName('stat-ability-div-2');\r\n    const abDescShader = document.getElementsByClassName('ability-description-shader')[0];\r\n    const partySelectorButton = document.getElementById('party-button');\r\n    const partySelectorContainer = document.getElementById('party-selector-container');\r\n    const partySelectorNames = document.getElementsByClassName('party-selector-name');\r\n    const characterNameDisplays = document.getElementsByClassName('character-name-dispay');\r\n    abDescShader.addEventListener('click', () => {\r\n        currentShowingAbilityDescription.style.display = 'none';\r\n        currentShowingAbilityDescription = null;\r\n        abDescShader.style.display = 'none';\r\n    })\r\n    function showAbilityDescription(side, num) {\r\n        let hero;\r\n        if (side === 1) {\r\n            hero = statChar1;\r\n        } else {\r\n            hero = statChar2;\r\n        }\r\n        currentShowingAbilityDescription = document.getElementById(hero.klass + '-ability-' + num + '-description-div');\r\n        currentShowingAbilityDescription.style.display = '';\r\n        abDescShader.style.display = '';\r\n    }\r\n    for (let i = 0; i < statAbilities1.length; i++) {\r\n        statAbilities1[i].addEventListener('click', () => showAbilityDescription(1, i+1));\r\n        statAbilities2[i].addEventListener('click', () => showAbilityDescription(2, i+1));\r\n    }\r\n    heroStatcontainer.addEventListener('click', () => {\r\n        for (let i = 0; i < statImages.length; i++) {\r\n            if (statImages[i].style.display !== 'none') {\r\n                let char; if (i === 0) { char = statChar1; } else { char = statChar2; }\r\n                const statImg = document.getElementById(`stats-img-${i + 1}`)\r\n                const nameStat = document.getElementById(`stats-name-${i + 1}`);\r\n                const levelStat = document.getElementById(`stats-level-${i + 1}`);\r\n                const hpStat = document.getElementById(`stats-hp-${i + 1}`);\r\n                const dmgStat = document.getElementById(`stats-dmg-${i + 1}`);\r\n                const defenseStat = document.getElementById(`stats-defense-${i + 1}`);\r\n                statImg.src = char.baseImg.src;\r\n                nameStat.innerHTML = `Level: ${char.level}`;\r\n                levelStat.innerHTML = char.klass;\r\n                hpStat.innerHTML = `Health: ${char.baseHP}`;\r\n                dmgStat.innerHTML = `Power: ${Math.abs(char.baseDMG)}`\r\n                defenseStat.innerHTML = `Defense: ${char.baseDefense}`;\r\n                for (let j = 0; j < statAbilities1.length; j++) {\r\n                    if (char.abilities[j]) {\r\n                        if (i === 0) {\r\n                            statAbilities1[j].style.display = '';\r\n                        } else { statAbilities2[j].style.display = ''; }\r\n                    } else {\r\n                        if (i === 0) {\r\n                            statAbilities1[j].style.display = 'none';\r\n                        } else { statAbilities2[j].style.display = 'none'; }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        for (let i = 0; i < statSelectorNames.length; i++) {\r\n            if (party[i]) {\r\n                statSelectorNames[i].innerHTML = party[i].klass;\r\n            }\r\n        }\r\n    })\r\n    partySelectorButton.addEventListener('click', () => {\r\n        for (let i = 0; i < characterNameDisplays.length; i++) {\r\n            if (characters[i]) {\r\n                characterNameDisplays[i].innerHTML = characters[i].klass;\r\n                characterNameDisplays[i].style.display = '';\r\n            } else {\r\n                characterNameDisplays[i].style.display = 'none';\r\n            }\r\n        }\r\n        for (let i = 0; i < partySelectorNames.length; i++) {\r\n            if (party[i]) {\r\n                partySelectorNames[i].innerHTML = party[i].klass;\r\n            }\r\n        }\r\n    })\r\n    let partyCharSelected = null;\r\n    let partyCharIdx = null;\r\n    for (let i = 0; i < characterNameDisplays.length; i++) {\r\n        characterNameDisplays[i].addEventListener('click', () => {\r\n            if (!partyCharSelected) {\r\n                for (let j = 0; j < partySelectorNames.length; j++) {\r\n                    partySelectorNames[j].style.cursor = 'pointer';\r\n                    partySelectorNames[j].addEventListener(\"mouseover\", addBlueBorder);\r\n                    partySelectorNames[j].addEventListener(\"mouseleave\", removeBlueBorder);\r\n                }\r\n            } else {\r\n                characterNameDisplays[partyCharIdx].style.border = '2px solid black';\r\n            }\r\n            characterNameDisplays[i].style.border = '5px solid red';\r\n            partyCharIdx = parseInt(characterNameDisplays[i].id.substr(characterNameDisplays[i].id.length - 1, 1))-1;\r\n            partyCharSelected = characters[partyCharIdx];\r\n        })\r\n    }\r\n    for (let i = 0; i < partySelectorNames.length; i++) {\r\n        partySelectorNames[i].addEventListener('click', () => {\r\n            if (!partyCharSelected) { return; }\r\n            partySelectorNames[i].style.cursor = 'default';\r\n            partySelectorNames[i].removeEventListener(\"mouseover\", addBlueBorder);\r\n            partySelectorNames[i].removeEventListener(\"mouseleave\", removeBlueBorder);\r\n            partySelectorNames[i].style.border = 'none';\r\n            for (let j = 0; j < party.length; j++) {\r\n                if (party[j].klass === partyCharSelected.klass) {\r\n                    party[j] = party[i];\r\n                    partySelectorNames[j].innerHTML = party[j].klass;\r\n                    // console.log(party);\r\n                }\r\n            }\r\n            partySelectorNames[i].innerHTML = partyCharSelected.klass;\r\n            party[i] = partyCharSelected;\r\n            characterNameDisplays[partyCharIdx].style.border = '2px solid black';\r\n            partyCharIdx = null;\r\n            partyCharSelected = null;\r\n        })\r\n    }\r\n\r\n    let shouldSwap = false;\r\n    let statCharSelected = null;\r\n    function swapStatDisp(e) {\r\n        if (!shouldSwap) { return; }\r\n        // console.log('swapping now');\r\n        e.currentTarget.style.border = '3px solid indigo';\r\n        e.currentTarget.style.cursor = 'default';\r\n        const sideCheck = e.currentTarget.id.substr(e.currentTarget.id.length-1);\r\n        for (let j = 0; j < heroStatsBlocks.length; j++) {\r\n            heroStatsBlocks[j].removeEventListener(\"mouseover\", addBlueBorder);\r\n            heroStatsBlocks[j].removeEventListener(\"mouseleave\", removeBlueBorder);\r\n        }\r\n        const charIndex = statCharSelected.id.substr(1, 1);\r\n        const char = party[charIndex-1];\r\n        \r\n        statCharSelected.style.border = 'none';\r\n        statCharSelected = null;\r\n\r\n        for (let j = 0; j < statAbilities1.length; j++) {\r\n            if (char.abilities[j]) {\r\n                if (parseInt(sideCheck) === 1) { statAbilities1[j].style.display = '';\r\n                } else { statAbilities2[j].style.display = ''; }\r\n            } else {\r\n                if (parseInt(sideCheck) === 1) { statAbilities1[j].style.display = 'none';\r\n                } else { statAbilities2[j].style.display = 'none'; }\r\n            }\r\n        }\r\n        \r\n        const tarId = e.target.id;\r\n        const sideNum = tarId.substr(tarId.length - 1, 1);\r\n        if (sideNum == 1) {\r\n            statChar1 = char;\r\n        } else {\r\n            statChar2 = char;\r\n        }\r\n        const statImg = document.getElementById(`stats-img-${sideNum}`)\r\n        const nameStat = document.getElementById(`stats-name-${sideNum}`);\r\n        const levelStat = document.getElementById(`stats-level-${sideNum}`);\r\n        const hpStat = document.getElementById(`stats-hp-${sideNum}`);\r\n        const dmgStat = document.getElementById(`stats-dmg-${sideNum}`);\r\n        const defenseStat = document.getElementById(`stats-defense-${sideNum}`);\r\n        if (statImg.style.display === 'none') { statImg.style.display = ''; }\r\n        statImg.src = char.baseImg.src;\r\n        nameStat.innerHTML = `Level: ${char.level}`;\r\n        levelStat.innerHTML = char.klass;\r\n        hpStat.innerHTML = `Health: ${char.baseHP}`;\r\n        dmgStat.innerHTML = `Power: ${Math.abs(char.baseDMG)}`\r\n        defenseStat.innerHTML = `Defense: ${char.baseDefense}`;\r\n\r\n        shouldSwap = false;\r\n    }\r\n    function addBlueBorder(e) {\r\n        e.currentTarget.style.border = '6px solid blue';\r\n        e.currentTarget.style.cursor = 'pointer';\r\n    } function removeBlueBorder(e) {\r\n        e.currentTarget.style.border = '3px solid indigo';\r\n        e.currentTarget.style.cursor = 'default';\r\n    }\r\n    function initiateStatSwap(e) {\r\n        // console.log('swap initiated');\r\n        if (shouldSwap) {\r\n            if (e.currentTarget === statCharSelected) { return; }\r\n            statCharSelected.style.border = 'none';\r\n            statCharSelected = e.currentTarget;\r\n            e.currentTarget.style.border = '4px solid blue';\r\n        } else {\r\n            statCharSelected = e.currentTarget;\r\n            statCharSelected.style.border = '4px solid blue';\r\n            for (let j = 0; j < heroStatsBlocks.length; j++) {\r\n                heroStatsBlocks[j].addEventListener(\"mouseover\", addBlueBorder);\r\n                heroStatsBlocks[j].addEventListener(\"mouseleave\", removeBlueBorder);\r\n            }\r\n            shouldSwap = true;\r\n        }\r\n    }\r\n    for (let j = 0; j < heroStatsBlocks.length; j++) { heroStatsBlocks[j].addEventListener(\"click\", swapStatDisp); }\r\n    for (let i = 0; i < heroNameplateSelectors.length; i++) { heroNameplateSelectors[i].addEventListener('click', initiateStatSwap); }\r\n})\r\n\r\n\r\n\r\n \r\nfunction addDeathListener(entity) {\r\n    entity.observer = new MutationObserver(function(mutations) {\r\n        mutations.forEach(function (mutationRecord) {\r\n            if (mutationRecord.target.style.display === 'none') {\r\n                // console.log(entity.imgName, 'style === none');\r\n                if (entity.allied) {\r\n                    delete livingChars[entity.imgName];\r\n                } else {\r\n                    delete livingEnemies[entity.imgName];\r\n                }\r\n                const c = Object.values(livingChars);\r\n                const en = Object.values(livingEnemies);\r\n                if (c.length === 0 || en.length === 0) {\r\n                    if (!levelHasEnded) {\r\n                        // console.log('end game called');\r\n                        endGame(c, en, currentLevelNumber);\r\n                    }\r\n                    // console.log('game should have ended');\r\n                    levelHasEnded = true;\r\n                }\r\n            }\r\n        });\r\n    })\r\n}\r\n\r\nfunction createXPObserver(char) {\r\n    char.xpObserver = new MutationObserver(function (mutations) {\r\n        mutations.forEach(function (mutationRecord) {\r\n            if (char.observationToken && mutationRecord.target.style.border === '5px solid gold') {\r\n                moveFinishCount++;\r\n                char.observationToken = false;\r\n                // char.xpObserver.disconnect();\r\n                if (moveFinishCount === countToReach) {\r\n                    addCharXP();\r\n                }\r\n            }\r\n        })\r\n    })\r\n}\r\n\r\nfunction addEntityEvents(entity, allies, enemies) {\r\n    if (entity.imgName != \"\") {\r\n        if (!entity.observer) {\r\n            addDeathListener(entity);\r\n            if (entity.allied) {\r\n                createXPObserver(entity);\r\n            }\r\n        }\r\n        entity.enemies = enemies;\r\n        const cloneArr = allies.slice();\r\n        let selfIndex;\r\n        for (let i = 0; i < cloneArr.length; i++) {\r\n            if (cloneArr[i].imgName === entity.imgName) { selfIndex = i; }\r\n        }\r\n        // remove self from allies list to prevent moving out of self image (healers excluded)\r\n        if (entity.baseDMG > 0) { cloneArr.splice(selfIndex, 1); }\r\n        entity.allies = cloneArr;\r\n    } else {\r\n        // console.log('broken image passed in for', entity.imgName);\r\n    }\r\n}\r\n\r\nfunction deSelect() {\r\n    // console.log('de-selected')\r\n    if (selectedChar) {\r\n        selectedChar.abilityContainer.style.display = 'none';\r\n        currentAbilityBoxes = null;\r\n        selectedChar.img.style.border = 'none';\r\n        selectedChar = null;\r\n    }\r\n}\r\n\r\nfunction styleAbilityBox(entity) {\r\n    const aBoxes = document.getElementsByClassName(entity.imgName + '-inner-ability-divs');\r\n    // const aLabels = document.getElementsByClassName(entity.imgName + '-ability-labels');\r\n    for (let i = 0; i < aBoxes.length; i++) {\r\n        aBoxes[i].style.width = aBoxes[i].offsetHeight + 'px';\r\n    }\r\n}\r\n\r\nfunction select(entity) {\r\n    entity.abilityContainer.style.display = '';\r\n    currentAbilityBoxes = entity.abilityContainer;\r\n    styleAbilityBox(entity);\r\n    entity.img.style.border = '5px solid gold';\r\n    selectedChar = entity;\r\n}\r\n\r\nfunction beginCurrentLevel() {\r\n    const beginLevelButton = document.getElementById('begin-level-button');\r\n    fadeOut(beginLevelButton);\r\n    const level = levels[currentLevelNumber];\r\n    beginLevel(level.characterList.slice(), level.enemyList.slice(), currentLevelNumber);\r\n}\r\n\r\nfunction returnToSelectPage() {\r\n    document.getElementById('return-button').style.display = 'none';\r\n    document.getElementById('tutorial-message').style.display = 'none';\r\n    document.getElementById(`level-name-display`).style.display = 'none';\r\n    document.getElementById('begin-level-button').style.display = 'none';\r\n    document.getElementById('level-button-container').style.display = '';\r\n    document.getElementById('level-button-container-header').style.display = '';\r\n    document.getElementById('close-button').style.display = '';\r\n}\r\n\r\nfunction selectChar(entity) {\r\n    if (!entity || entity.container.style.display === 'none' || entity.hp < 0) {\r\n        return;\r\n    }\r\n    if (selectedChar && selectedChar.baseDMG < 0) {\r\n        if (!selectedChar.target || selectedChar.target.klass !== entity.klass || !selectedChar.isAttacking) {\r\n            selectedChar.autoAttack(entity);\r\n            // console.log('heal target switched');\r\n        }\r\n        // console.log('no change. Target: ', selectedChar.target, ' entity: ', entity);\r\n        deSelect();\r\n        return;\r\n    }\r\n    deSelect();\r\n    select(entity);\r\n}\r\n\r\nfunction selectEnemy(entity) {\r\n    if (!selectedChar || selectedChar.hp < 0) {\r\n        deSelect();\r\n        return;\r\n    } else if ((selectedChar.target === entity && selectedChar.isAttacking) || (entity.hp && entity.hp < 0)) {\r\n        return;\r\n    }\r\n    if (selectedChar.allied && selectedChar.baseDMG > 0) {\r\n        selectedChar.autoAttack(entity);\r\n        for (let i = 0; i < selectedChar.abilities.length; i++) {\r\n            if (selectedChar.abilityShouldCast[i]) {\r\n                selectedChar.abilityShouldCast[i] = false;\r\n                selectedChar.useAbility(i);\r\n                console.log('ability used on click event');\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nconst allyClickEvents = (e) => {\r\n    // console.log('character click');\r\n    const entityName = e.target.className.slice(0, 2);\r\n    const entity = livingChars[entityName];\r\n    e.stopPropagation();\r\n    selectChar(entity);\r\n}\r\n\r\nconst enemyClickEvents = (e) => {\r\n    const entityName = e.target.className.slice(0, 2);\r\n    const entity = livingEnemies[entityName];\r\n    e.stopPropagation();\r\n    selectEnemy(entity);\r\n}\r\n\r\nfunction keydownEvent (e) {\r\n    const entity = hotkeys[e.key];\r\n    if (entity && entity.allied) {\r\n        selectChar(entity);\r\n    } else if (entity && entity.klass) {\r\n        selectEnemy(entity);\r\n    } else if ((entity === 0 || entity) && selectedChar) {\r\n        selectedChar.useAbility(entity);\r\n    } else {\r\n        // console.log('invalid key press of: ', e.key);\r\n        // console.log('value is: ', entity);\r\n        // console.log(hotkeys);\r\n    }\r\n}\r\n\r\nfunction abilityClick(arr) {\r\n    const entity = livingChars['a'+arr[0]];\r\n    if (entity) {\r\n        entity.useAbility(arr[1]);\r\n    } else {\r\n        // console.log('invalid entity for ability use');\r\n    }\r\n}\r\n\r\nfunction setAbilityBoxes() {\r\n    let abilityBoxes = [];\r\n    // let abilityLabels = [];\r\n    for (let i = 1; i < 5; i++) {\r\n        abilityBoxes.push(document.getElementsByClassName(`a${i}-inner-ability-divs`));\r\n        // abilityLabels.push(document.getElementsByClassName(`a${i}-ability-labels`));\r\n    }\r\n    for (let i = 0; i < abilityBoxes.length; i++) {\r\n        for (let j = 0; j < abilityBoxes[i].length; j++) {\r\n            abilityBoxes[i][j].addEventListener('click', () => abilityClick([i+1, j]));\r\n        }\r\n    }\r\n}\r\n\r\nfunction initializeGameOpening() {\r\n    document.getElementById('return-button').addEventListener('click', returnToSelectPage);\r\n    const deSelectButton = document.getElementById('test');\r\n    deSelectButton.addEventListener('click', deSelect);\r\n\r\n    const beginLevel = document.getElementById('begin-level-button');\r\n    beginLevel.addEventListener('click', beginCurrentLevel)\r\n\r\n    // end click position\r\n    const gameContainer = document.getElementById('game-container');\r\n    gameContainer.addEventListener(\"click\", (e) => {\r\n        // console.log(e);\r\n        if (selectedChar) {\r\n            if (selectedChar.hp < 0) {\r\n                selectedChar = null;\r\n                return;\r\n            }\r\n            clearInterval(selectedChar.currentAction);\r\n            clearInterval(selectedChar.currentAnimation);\r\n            selectedChar.img.style.border = 'none';\r\n            currentAbilityBoxes.style.display = 'none';\r\n            currentAbilityBoxes = null;\r\n            if (selectedChar.range === 'infinite') {\r\n                selectedChar.move([e.x, e.y], selectedChar.target);\r\n            } else {\r\n                selectedChar.move([e.x, e.y]);\r\n            }\r\n            selectedChar = null;\r\n        }\r\n    })\r\n    window.addEventListener('keypress', (e) => {\r\n        // console.log(e);\r\n        keydownEvent(e);\r\n    })\r\n    setAbilityBoxes();\r\n\r\n    hasBeenLoaded = true;\r\n}\r\n\r\n\r\n\r\nfunction loadLevel(levelNumber) {\r\n    if (!hasBeenLoaded) {\r\n        initializeGameOpening();\r\n    }\r\n    if (levelNumber > maxLevelNumber) {\r\n        document.getElementById('game-container').style.height = '100%';\r\n        document.getElementById('background-image').style.height = '100%';\r\n        document.getElementById('all-characters-ability-container').style.height = '0%';\r\n        return;\r\n    }\r\n    const level = levels[levelNumber];\r\n    levelHasEnded = false;\r\n    currentLevelNumber = levelNumber;\r\n    level.action();\r\n    // console.log('level selected: ', levelNumber);\r\n    document.getElementById('return-button').style.display = '';\r\n    document.getElementById('level-button-container').style.display = 'none';\r\n    document.getElementById('level-button-container-header').style.display = 'none';\r\n    const levelNameDisp = document.getElementById(`level-name-display`);\r\n    levelNameDisp.style.opacity = 0;\r\n    levelNameDisp.style.display = '';\r\n    levelNameDisp.innerHTML = 'Level ' + level.name;\r\n    const levelMessage = document.getElementById('tutorial-message');\r\n    levelMessage.innerHTML = level.message;\r\n    levelMessage.style.opacity = 0;\r\n    levelMessage.style.display = '';\r\n    // const secondAction = () => beginLevel(level.characterList, level.enemyList, levelNumber);\r\n    fadeIn(levelNameDisp);\r\n    // const levelNameAction = () => { fadeIn(beginLevel); }\r\n    const action = () => {\r\n        fadeOut(levelNameDisp);\r\n        fadeIn(beginLevel);\r\n    }\r\n    const beginLevel = document.getElementById('begin-level-button');\r\n    beginLevel.style.opacity = 0;\r\n    beginLevel.style.display = '';\r\n    fadeIn(levelMessage, action);\r\n}\r\n\r\nfunction beginLevel(charactersArr, enemiesArr, levelNumber) {\r\n    document.getElementById('begin-level-button').style.display = 'none';\r\n    setInitialTargets(charactersArr, enemiesArr);\r\n    loadInCharacters(charactersArr, enemiesArr, levelNumber);\r\n}\r\n\r\nfunction setInitialTargets(chars, enemies) {\r\n    for (let i = 0; i < enemies.length; i++) {\r\n        if (enemies[i].baseDMG > 0) {\r\n            const targetIndex = Math.floor(Math.random() * chars.length);\r\n            enemies[i].target = chars[targetIndex];\r\n        } else {\r\n            const targetIndex = Math.floor(Math.random() * enemies.length);\r\n            enemies[i].target = enemies[targetIndex];\r\n        }\r\n        // console.log(enemies[i].imgName, \"has target set to\", enemies[i].target);\r\n        // randomizeEnemySpawnLocation(enemies[i]);\r\n    }\r\n}\r\n\r\nfunction setAvailableAbilities(char) {\r\n    const abilities = document.getElementsByClassName(char.imgName + '-ability-boxes');\r\n    const boxes = document.getElementsByClassName(char.imgName + '-inner-ability-divs');\r\n    for (let i = 0; i < abilities.length; i++) {\r\n        if (i < char.abilities.length) {\r\n            abilities[i].style.display = '';\r\n            boxes[i].style.display = '';\r\n        } else {\r\n            abilities[i].style.display = 'none';\r\n            boxes[i].style.display = 'none';\r\n        }\r\n    }\r\n}\r\n\r\nfunction touchingVertically(pos, char, entity) {\r\n    return ((pos[1] < entity.pos[1] && pos[1] + char.container.offsetHeight > entity.pos[1]) ||\r\n        (pos[1] < entity.pos[1] + entity.container.offsetHeight && pos[1] + char.container.offsetHeight > entity.pos[1] + entity.container.offsetHeight))\r\n}\r\n\r\nfunction checkPosBox(pos, char, entity) {\r\n    if (pos[0] < entity.pos[0] && pos[0] + char.container.offsetWidth > entity.pos[0] && touchingVertically(pos, char, entity)) {\r\n        return true;\r\n    }\r\n    if (pos[0] < entity.pos[0] + entity.container.offsetWidth && pos[0] + char.container.offsetWidth > entity.pos[0] + entity.container.offsetWidth &&\r\n        touchingVertically(pos, char, entity)) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\r\nfunction setRandomSpawn(enemy, checkPositions) {\r\n    // console.log(checkPositions);\r\n    let positionFound = false;\r\n    let position = [0, 0];\r\n    let p1;\r\n    let p2;\r\n    const container = document.getElementById('game-container');\r\n    const width = Math.floor(container.offsetWidth);\r\n    const height = Math.floor(container.offsetHeight);\r\n    while (!positionFound) {\r\n        positionFound = true;\r\n        p1 = Math.random() * 0.75; // from 0% to 90%\r\n        p2 = Math.random() * 0.8; // from 0% to 80%\r\n        // console.log(p);\r\n        position = [Math.floor(width * p2), Math.floor(height * p1)];\r\n        // console.log(position);\r\n        for (let i = 0; i < checkPositions.length; i++) {\r\n            if (checkPosBox(position, enemy, checkPositions[i])) {\r\n                positionFound = false;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    enemy.pos[0] = position[0];\r\n    enemy.pos[1] = position[1];\r\n    enemy.container.style.left = enemy.pos[0] + 'px';\r\n    enemy.container.style.top = enemy.pos[1] + 'px';\r\n}\r\n\r\nlet boxEntities = [];\r\nfunction loadInCharacters(charactersArr, enemiesArr, levelNumber) {\r\n    document.getElementById('return-button').style.display = 'none';\r\n    const deSelectButton = document.getElementById('test');\r\n    deSelectButton.style.opacity = 0;\r\n    deSelectButton.style.display = '';\r\n    fadeIn(deSelectButton);\r\n    const backgroundImg = document.getElementById('background-image');\r\n    if (levelNumber < 4) {\r\n        backgroundImg.src = document.getElementById('forest').src;\r\n    } else if (levelNumber < 7) {\r\n        backgroundImg.src = document.getElementById('snowy').src;\r\n    } else {\r\n        backgroundImg.src = document.getElementById('dungeon').src;\r\n    }\r\n    backgroundImg.style.opacity = 0;\r\n    backgroundImg.style.display = '';\r\n    fadeIn(backgroundImg);\r\n    for (let i = 0; i < 4; i++) {\r\n        const abilityHotkey = document.getElementById(`ab${i + 1}-keybind`);\r\n        hotkeys[abilityHotkey.value] = i;\r\n    }\r\n    for (let i = 0; i < charactersArr.length; i++) {\r\n        if (!charactersArr[i].observer) {\r\n            addEntityEvents(charactersArr[i], charactersArr, enemiesArr);\r\n        }\r\n        livingChars[charactersArr[i].imgName] = charactersArr[i];\r\n        charactersArr[i].container.style.top = charactersArr[i].pos[1] + 'px';\r\n        charactersArr[i].container.style.left = charactersArr[i].pos[0] + 'px';\r\n        charactersArr[i].container.style.opacity = 0;\r\n        charactersArr[i].container.style.display = '';\r\n        boxEntities.push(charactersArr[i]);\r\n        const hpBar = document.getElementById(`${charactersArr[i].imgName}-hp-bar`);\r\n        hpBar.style.display = \"flex\";\r\n        // charactersArr[i].hotkeyDisplay.innerHTML = charactersArr[i].hotkey;\r\n        // hotkeys[charactersArr[i].hotkey] = charactersArr[i];\r\n        const hotkeyInput = document.getElementById(`a${i+1}-keybind`);\r\n        charactersArr[i].hotkeyDisplay.innerHTML = hotkeyInput.value;\r\n        hotkeys[hotkeyInput.value] = charactersArr[i];\r\n        const abilityClassName = document.getElementById(`a${i+1}-class-name`);\r\n        abilityClassName.innerHTML = charactersArr[i].klass;\r\n        const abilityNames = document.getElementsByClassName(`a${i+1}-ability-labels`);\r\n        setAvailableAbilities(charactersArr[i]);\r\n        for (let j = 0; j < abilityNames.length; j++) {\r\n            if (charactersArr[i].abilityNames[j]) {\r\n                abilityNames[j].innerHTML = charactersArr[i].abilityNames[j];\r\n            } else {\r\n                abilityNames[j].innerHTML = 'No Ability';\r\n            }\r\n        }\r\n        // const actionEvent = () => { charactersArr[i].container.addEventListener('click', allyClickEvents);}\r\n        charactersArr[i].container.addEventListener('click', allyClickEvents);\r\n        charactersArr[i].img.src = charactersArr[i].baseImg.src;\r\n        if (charactersArr[i].pos === null) {\r\n            setRandomSpawn(charactersArr[i], boxEntities.slice());\r\n        }\r\n        boxEntities.push(charactersArr[i]);\r\n        fadeIn(charactersArr[i].container);\r\n        observerObserve(charactersArr[i]);\r\n    }\r\n    for (let i = 0; i < enemiesArr.length; i++) {\r\n        if (!enemiesArr[i].observer) {\r\n            addEntityEvents(enemiesArr[i], enemiesArr, charactersArr);\r\n        }\r\n        livingEnemies[enemiesArr[i].imgName] = enemiesArr[i];\r\n        enemiesArr[i].container.style.top = enemiesArr[i].pos[1] + 'px';\r\n        enemiesArr[i].container.style.left = enemiesArr[i].pos[0] + 'px';\r\n        enemiesArr[i].container.style.opacity = 0;\r\n        enemiesArr[i].container.style.display = '';\r\n        const hpBar = document.getElementById(`${enemiesArr[i].imgName}-hp-bar`);\r\n        hpBar.style.display = \"flex\";\r\n        const hotkeyInput = document.getElementById(`e${i+1}-keybind`);\r\n        enemiesArr[i].hotkeyDisplay.innerHTML = hotkeyInput.value;\r\n        hotkeys[hotkeyInput.value] = enemiesArr[i];\r\n        enemiesArr[i].container.addEventListener('click', enemyClickEvents);\r\n        enemiesArr[i].img.src = enemiesArr[i].baseImg.src;\r\n        if (enemiesArr[i].pos === null) {\r\n            setRandomSpawn(enemiesArr[i], boxEntities.slice());\r\n        }\r\n        boxEntities.push(enemiesArr[i]);\r\n        const action = () => enemiesArr[i].autoAttack(enemiesArr[i].target);\r\n        fadeIn(enemiesArr[i].container, action); // begin attacking target\r\n        observerObserve(enemiesArr[i]);\r\n    }\r\n    // console.log(\"hotkeys: \", hotkeys);\r\n}\r\n\r\nfunction observerObserve(entity) {\r\n    const element = entity.container;\r\n    entity.observer.observe(element, { attributes: true, attributeFilter: ['style'] });\r\n}\r\n\r\n\r\n\r\n\r\nfunction endGame(charsList, enemyList) {\r\n    boxEntities = [];\r\n    hotkeys = {};\r\n    if (currentAbilityBoxes) {\r\n        currentAbilityBoxes.style.display = 'none';\r\n        currentAbilityBoxes = null;\r\n    }\r\n    const levelMessage = document.getElementById('tutorial-message');\r\n    levelMessage.style.display = 'none';\r\n    const deSelectButton = document.getElementById('test');\r\n    deSelectButton.style.display = 'none';\r\n    deSelect();\r\n    const projectiles = document.getElementsByClassName('projectile');\r\n    for (let i = 0; i < projectiles.length; i++) {\r\n        projectiles[i].display = 'none';\r\n    }\r\n    const allCharsList = levels[currentLevelNumber].characterList;\r\n    const allEnemyList = levels[currentLevelNumber].enemyList;\r\n    for (let i = 0; i < allCharsList.length; i++) {\r\n        allCharsList[i].observer.disconnect();\r\n        if (allCharsList[i].currentAction) { clearInterval(allCharsList[i].currentAction); }\r\n        if (allCharsList[i].currentAnimation) { clearInterval(allCharsList[i].currentAnimation); }\r\n        allCharsList[i].isAttacking = false;\r\n        allCharsList[i].isMoving = false;\r\n        allCharsList[i].target = null;\r\n        allCharsList[i].container.removeEventListener('click', allyClickEvents);\r\n        allCharsList[i].img.src = allCharsList[i].baseImg.src;\r\n    }\r\n    for (let i = 0; i < allEnemyList.length; i++) {\r\n        allEnemyList[i].observer.disconnect();\r\n        if (allEnemyList[i].currentAction) { clearInterval(allEnemyList[i].currentAction); }\r\n        if (allEnemyList[i].currentAnimation) { clearInterval(allEnemyList[i].currentAnimation); }\r\n        allEnemyList[i].isAttacking = false;\r\n        allEnemyList[i].isMoving = false;\r\n        allEnemyList[i].target = null;\r\n        allEnemyList[i].container.removeEventListener('click', enemyClickEvents);\r\n        allEnemyList[i].img.src = allEnemyList[i].baseImg.src;\r\n    }\r\n\r\n    if (charsList.length > 0) {\r\n        endMoveChars(charsList);\r\n    } else {\r\n        const backgroundImg = document.getElementById('background-image');\r\n        fadeOut(backgroundImg);\r\n        for (let i = 0; i < enemyList.length; i++) {\r\n            fadeOut(enemyList[i].container);\r\n        }\r\n        fadeOutGame(false);\r\n    }\r\n}\r\n\r\nfunction xpObserverObserve(char) {\r\n    char.observationToken = true;\r\n    char.xpObserver.observe(char.img, { attributes: true, attributeFilter: ['style'] });\r\n}\r\n\r\nfunction modEndPos() {\r\n    const container = document.getElementById('game-container');\r\n    const width = Math.floor(container.offsetWidth);\r\n    const height = Math.floor(container.offsetHeight);\r\n    const widthExtra = width - (160 * 4);\r\n    return ([Math.floor(widthExtra / 4), Math.floor(height * 0.66), Math.floor(width/10)]);\r\n}\r\n\r\nfunction endMoveChars(charsList) {\r\n    moveFinishCount = 0;\r\n    countToReach = charsList.length;\r\n    const basePos = modEndPos(); // make into % values\r\n    for (let i = 0; i < charsList.length; i++) {\r\n        xpObserverObserve(charsList[i]);\r\n        charsList[i].move([(i*160) + ((i+1)*basePos[0]), basePos[1]], false, true); // removed + basePos[2] from x side\r\n    }\r\n}\r\n\r\nfunction addCharXP() {\r\n    const c = Object.values(livingChars);\r\n    // console.log(c);\r\n    for (let i = 0; i < c.length; i++) {\r\n        c[i].xpObserver.disconnect();\r\n        const expWords = document.getElementById(c[i].imgName + '-exp-words');\r\n        expWords.innerHTML = 'Level: ' + c[i].level;\r\n        c[i].hpContainerLeft.style.backgroundColor = 'gold';\r\n        const xpPercent = Math.floor((c[i].xp / c[i].nextLevelXP) * 100);\r\n        c[i].hpContainerLeft.style.width = `${xpPercent}%`;\r\n        c[i].hpContainerRight.style.width = `${100 - xpPercent}%`;\r\n        const levelUpDisp = document.getElementById(c[i].imgName + '-level-up');\r\n        levelUpDisp.style.top = Math.floor(c[i].pos[1] - 75) + 'px';\r\n        levelUpDisp.style.left = Math.floor(c[i].pos[0]) + 'px';\r\n    }\r\n    fadeOutGame(true);\r\n    const xpPerC = levels[currentLevelNumber].xp / c.length;\r\n    const xpPerInterval = xpPerC / 60; // 4 seconds for the animation, .05 sec intervals\r\n    let timeCount = 0;\r\n    const xpInterval = setInterval(() => {\r\n        if (timeCount === 60) {\r\n            clearInterval(xpInterval);\r\n            for (let i = 0; i < c.length; i++) {\r\n                c[i].xp = Math.ceil(c[i].xp);\r\n                // console.log('xp: ', c[i].xp, ' level: ', c[i].level);\r\n                c[i].container.style.border = 'none';\r\n                fadeOut(c[i].container);\r\n            }\r\n            const backgroundImg = document.getElementById('background-image');\r\n            fadeOut(backgroundImg);\r\n        }\r\n        for (let i = 0; i < c.length; i++) {\r\n            c[i].xp += xpPerInterval;\r\n            if (c[i].xp > c[i].nextLevelXP) {\r\n                c[i].levelUp();\r\n                const expWords = document.getElementById(c[i].imgName + '-exp-words');\r\n                expWords.innerHTML = 'Level: ' + c[i].level;\r\n            }\r\n            const xpPercent = Math.floor((c[i].xp / c[i].nextLevelXP) * 100);\r\n            c[i].hpContainerLeft.style.width = `${xpPercent}%`;\r\n            c[i].hpContainerRight.style.width = `${100 - xpPercent}%`;\r\n        }\r\n        timeCount++;\r\n    }, 50);\r\n}\r\n\r\nfunction fadeOutGame(won) {\r\n    let theThing = (actionIterations) => {\r\n        if (!actionIterations) {\r\n            actionIterations = 40;\r\n        }\r\n        // console.log('fade called');\r\n        let disp;\r\n        let secondAction;\r\n        if (!won) {\r\n            disp = document.getElementById('game-over-display');\r\n            secondAction = () => resetGame(false);\r\n        } else {\r\n            disp = document.getElementById('game-won-display');\r\n            secondAction = () => resetGame(true);\r\n        }\r\n        disp.style.opacity = 0;\r\n        disp.style.display = '';\r\n        const action = () => fadeOut(disp, secondAction, actionIterations);\r\n        fadeIn(disp, action);\r\n    }\r\n    if (!won) {\r\n        setTimeout(theThing, 2000);\r\n    } else {\r\n        theThing(60);\r\n    }\r\n}\r\n\r\nfunction resetGame(won) {\r\n    livingChars = {};\r\n    livingEnemies = {};\r\n    document.getElementById('level-button-container').style.display = '';\r\n    document.getElementById('level-button-container-header').style.display = '';\r\n    document.getElementById('close-button').style.display = '';\r\n    document.getElementById('game-container').style.height = '100%';\r\n    document.getElementById('background-image').style.height = '100%';\r\n    document.getElementById('all-characters-ability-container').style.height = '0%';\r\n    const levelButtons = document.getElementsByClassName('level-button');\r\n    if (won && maxLevelNumber === currentLevelNumber) {\r\n        maxLevelNumber++;\r\n        if (levelButtons[maxLevelNumber]) {\r\n            levelButtons[maxLevelNumber].style.opacity = 100 + '%';\r\n            levelButtons[maxLevelNumber].style.cursor = 'pointer';\r\n        }\r\n    }\r\n    const levChars = levels[currentLevelNumber].characterList;\r\n    const levEnems = levels[currentLevelNumber].enemyList;\r\n    for (let i = 0; i < levChars.length; i++) {\r\n        levChars[i].hp = levChars[i].baseHP; levChars[i].dmg = levChars[i].baseDMG; levChars[i].defense = levChars[i].baseDefense;\r\n        levChars[i].ms = levChars[i].baseMS; levChars[i].stunned = false; levChars[i].rooted = false;\r\n        levChars[i].pos[0] = levChars[i].basePos[0]; levChars[i].pos[1] = levChars[i].basePos[1];\r\n        levChars[i].container.style.top = levChars[i].pos[1] + 'px';\r\n        levChars[i].container.style.left = levChars[i].pos[0] + 'px';\r\n        levChars[i].hpContainerLeft.style.backgroundColor = 'blue';\r\n        const expWords = document.getElementById(levChars[i].imgName + '-exp-words');\r\n        expWords.innerHTML = '';\r\n        levChars[i].img.style.border = 'none';\r\n        levChars[i].setHpBars();\r\n    }\r\n    for (let i = 0; i < levEnems.length; i++) {\r\n        levEnems[i].hp = levEnems[i].baseHP; levEnems[i].dmg = levEnems[i].baseDMG; levEnems[i].defense = levEnems[i].baseDefense;\r\n        levEnems[i].ms = levEnems[i].baseMS; levEnems[i].stunned = false; levEnems[i].rooted = false;\r\n        levEnems[i].pos[0] = levEnems[i].basePos[0]; levEnems[i].pos[1] = levEnems[i].basePos[1];\r\n        levEnems[i].container.style.top = levEnems[i].pos[1] + 'px';\r\n        levEnems[i].container.style.left = levEnems[i].pos[0] + 'px';\r\n        levEnems[i].img.style.border = 'none';\r\n        levEnems[i].setHpBars();\r\n    }\r\n}\r\n\r\nexport default loadLevel;","export function fadeOut(element, action = null, iterations=40) {\r\n    let op = iterations;\r\n    let timerDown = setInterval(function () {\r\n        if (op <= 0) {\r\n            clearInterval(timerDown);\r\n            element.style.display = 'none';\r\n            if (action) { action(); }\r\n        }\r\n        element.style.opacity = op / iterations;\r\n        op -= 1;\r\n        if (element.style.display === 'none') {\r\n            clearInterval(timerDown);\r\n            element.style.opacity = 0;\r\n        }\r\n    }, 50);\r\n}\r\n\r\nexport function fadeIn(element, action = null, iterations=40) {\r\n    let op = 0;\r\n    let timerUp = setInterval(function () {\r\n        if (op >= iterations) {\r\n            clearInterval(timerUp);\r\n            if (action) { action(); }\r\n        }\r\n        element.style.opacity = op / iterations;\r\n        op += 1;\r\n        if (element.style.display === 'none') {\r\n            clearInterval(timerUp);\r\n            element.style.opacity = 0;\r\n        }\r\n    }, 50);\r\n}"],"sourceRoot":""}