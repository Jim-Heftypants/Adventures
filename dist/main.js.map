{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/entities/abilities.js","webpack:///./src/entities/character.js","webpack:///./src/entities/enemy.js","webpack:///./src/entities/entity.js","webpack:///./src/index.js","webpack:///./src/levels/level.js","webpack:///./src/screen_controllers/entity_controller.js","webpack:///./src/screen_controllers/fades.js"],"names":["groupHeal","entity","i","allies","hp","Math","floor","setHpBars","powerSwing","target","poisonDagger","n","timer","int","setInterval","clearInterval","meteor","warriorAbilities","clericAbilities","wizardAbilities","rogueAbilities","abilityList","Object","values","abilityObj","tutorialWarrior","classCreator","tutorialCleric","tutorialWizard","tutorialRogue","Warrior","Cleric","Wizard","Rogue","tutorialChars","standardChars","ghettoWizard","wizard2","wizard3","EWizard","dumbCleric","cleric2","cleric3","ECleric","loserRogue","rogue2","rogue3","ERogue","punchingBag","weakWarrior","warrior2","warrior3","EWarrior","intro","healIntro","rangedIntro","puttinItAllTogetha","ezDoppelganger","level3","level2","doppelganger","Entity","klass","range","baseHP","ms","attackSpeed","attackDMG","allied","img","pos","defense","abilities","baseMS","basePos","baseAS","as","baseDMG","dmg","abilityAvailable","imgName","attackImages","moveImages","baseImg","container","currentAction","currentAnimation","imgCycle","enemies","movingOutTheWay","observer","window","addEventListener","addInlineStyle","document","getElementsByClassName","src","getElementById","style","opacity","display","left","top","endPos","deltaX","deltaY","abs","xChange","yChange","numRepeats","attackOnFinish","width","height","posChange","vectorToScalar","bigDiv","difference","innerWidth","offsetWidth","checker","transform","frame","self","autoAttack","widthAddition","heightAddition","leftBar","rightBar","leftWidth","rightWidth","shuffle","length","move","withinAttackRange","movePos","slice","targetChar","clearIntervals","animateAttack","attack","selectedChar","setTargetAndAttack","trackTarget","killEntitiy","border","console","log","borderInterval","charactersStacked","addition","beginAttack","ab","cdTime","CDTimer","a","j","random","slowFade","element","action","op","timerDown","gameTag","wiz","ro","war","cle","charArr","closeButton","hButtons","keybindContainer","levelButtonContainer","levelButtons","backgroundImage","titleBackground","secondAction","gTContainer","closeAction","loadLevel","cursor","charactersArr","charactersObj","enemiesArr","enemiesObj","Level","name","enemyList","message","actionChanges","characterList","modP","percent","applyMod","mod","x","offsetHeight","actionOne","actionTwo","actionThree","actionFour","actionFive","actionSix","actionSeven","actionEight","levelOne","levelTwo","levelThree","levelFour","levelFive","levelSix","levelSeven","levelEight","hasBeenLoaded","levelHasEnded","levels","levelsObj","currentLevelNumber","maxLevelNumber","highestLevelAvailable","livingEnemies","livingChars","addDeathListener","MutationObserver","mutations","forEach","mutationRecord","c","en","endGame","addEntityEvents","cloneArr","selfIndex","splice","deSelect","beginCurrentLevel","beginLevelButton","fadeOut","level","beginLevel","returnToSelectPage","selectChar","selectEnemy","allyClickEvents","e","entityName","className","stopPropagation","enemyClickEvents","keydownEvent","key","abilityClick","useAbility","setAbilityBoxes","abilityBoxes","initializeGameOpening","deSelectButton","gameContainer","y","levelNumber","levelNameDisp","innerHTML","levelMessage","fadeIn","levelNameAction","setInitialTargets","loadInCharacters","chars","targetIndex","backgroundImg","hpBar","actionEvent","observerObserve","observe","attributes","attributeFilter","charsList","allCharsList","allEnemyList","disconnect","removeEventListener","gameFadeTimer","disp","resetGame","won","levChars","levEnems","timerUp"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","const groupHeal = (entity) => {\r\n    for (let i = 0; i < entity.allies; i++) {\r\n        entity.allies[i].hp = Math.floor(entity.allies[i].hp + (entity.allies[i].hp * 0.2));\r\n        if (entity.allies[i].hp > 100) { entity.allies[i].hp = 100; }\r\n        entity.allies[i].setHpBars();\r\n    }\r\n    return 10;\r\n}\r\n\r\nconst powerSwing = (entity) => {\r\n    entity.target.hp -= 20;\r\n    entity.target.setHpBars();\r\n    return 10;\r\n}\r\n\r\nconst poisonDagger = (entity, n) => {\r\n    let timer = 0;\r\n    let int = setInterval(() => {\r\n        timer++;\r\n        entity.target.hp -= 4\r\n        entity.target.setHpBars();\r\n        if (timer > 5) {\r\n            clearInterval(int);\r\n        }\r\n    }, 500)\r\n    return 10;\r\n}\r\n\r\nconst meteor = (entity) => {\r\n    entity.target.hp -= 25;\r\n    entity.target.setHpBars();\r\n    return 10;\r\n}\r\n\r\nexport const warriorAbilities = [powerSwing];\r\nexport const clericAbilities = [groupHeal];\r\nexport const wizardAbilities = [meteor];\r\nexport const rogueAbilities = [poisonDagger];","import classCreator from './entity';\nimport * as abilityObj from './abilities.js';\n\n// console.log('ab list', abilityObj);\nconst abilityList = Object.values(abilityObj);\n// console.log('ab array list', abilityObj)\n// console.log(abilityList[0]);\nconst warriorAbilities = abilityList[0];\nconst clericAbilities = abilityList[1];\nconst wizardAbilities = abilityList[2];\nconst rogueAbilities = abilityList[3];\n\n/*\nclassName\nrange\nmaxHP\nMS\nAS\nDMG\ntrue\nimg\npos\ndefense\n*/\n\n// tutorials\nconst tutorialWarrior = new classCreator('Warrior', 10, 100, 10, 1000, 10, true, \"a1\", [450, 500], 20, warriorAbilities);\nconst tutorialCleric = new classCreator('Cleric', 'infinite', 100, 10, 1500, -10, true, \"a2\", [200, 300], 10, clericAbilities);\nconst tutorialWizard = new classCreator('Wizard', \"infinite\", 100, 10, 2000, 20, true, \"a3\", [200, 600], 12, wizardAbilities);\nconst tutorialRogue = new classCreator(\"Rogue\", 10, 100, 10, 800, 10, true, \"a4\", [900, 200], 16, rogueAbilities)\n\n// tank\nconst Warrior = new classCreator('Warrior', 10, 100, 10, 1000, 10, true, \"a1\", [100, 400], 20);\n\n// heals\nconst Cleric = new classCreator('Cleric', 'infinite', 100, 10, 1500, -10, true, \"a2\", [400, 100], 10);\n\n// rdps\nconst Wizard = new classCreator('Wizard', \"infinite\", 100, 10, 2000, 20, true, \"a3\", [100, 100], 12);\n\n// mdps\nconst Rogue = new classCreator(\"Rogue\", 10, 100, 10, 800, 10, true, \"a4\", [900, 500], 16)\n\nexport const tutorialChars = [tutorialWarrior, tutorialCleric, tutorialWizard, tutorialRogue];\nexport const standardChars = [Warrior, Cleric, Wizard, Rogue];","import classCreator from './entity.js';\n\n/*\nclassName\nrange\nmaxHP\nMS\nAS\nDMG\nfalse\nimg\npos\ndefense\n*/\n\n// rdps\nconst tutorialWizard = new classCreator('EWizard', 'infinite', 60, 10, 1500, 8, false, 'e3', [1000, 600], 8);\nconst ghettoWizard = new classCreator('EWizard', 'infinite', 60, 10, 1500, 12, false, 'e3', [500, 500], 8);\nconst wizard2 = new classCreator('EWizard', 'infinite', 70, 10, 1500, 13, false, 'e3', [500, 500], 8);\nconst wizard3 = new classCreator('EWizard', 'infinite', 70, 10, 1500, 13, false, 'e1', [700, 200], 8); // fix\nconst EWizard = new classCreator('EWizard', 'infinite', 100, 10, 2000, 20, false, \"e3\", [500, 500], 15);\n\n// heals\nconst tutorialCleric = new classCreator('ECleric', 'infinite', 60, 10, 2000, -8, false, \"e2\", [1000, 300], 8)\nconst dumbCleric = new classCreator('ECleric', 'infinite', 60, 10, 2000, -10, false, \"e2\", [1000, 100], 8);\nconst cleric2 = new classCreator('ECleric', 'infinite', 70, 10, 1750, -14, false, \"e2\", [1000, 100], 8);\nconst cleric3 = new classCreator('ECleric', 'infinite', 70, 10, 1750, -14, false, \"e4\", [300, 400], 8); // fix\nconst ECleric = new classCreator('ECleric', 'infinite', 100, 10, 1500, -10, false, \"e2\", [1000, 100], 10);\n\n// mdps\nconst tutorialRogue = new classCreator(\"ERogue\", 10, 60, 10, 1200, 6, false, \"e4\", [700, 200], 14);\nconst loserRogue = new classCreator(\"ERogue\", 10, 60, 10, 1200, 9, false, \"e4\", [700, 200], 14);\nconst rogue2 = new classCreator(\"ERogue\", 10, 60, 10, 1200, 9, false, \"e4\", [700, 200], 14);\nconst rogue3 = new classCreator(\"ERogue\", 10, 60, 10, 1200, 9, false, \"e2\", [500, 500], 14);\nconst ERogue = new classCreator(\"ERogue\", 10, 100, 10, 800, 10, false, \"e4\", [700, 200], 18);\n\n// tank\nconst punchingBag = new classCreator('EWarrior', 10, 70, 10, 1000, 1, false, \"e1\", [650, 500], 20);\nconst tutorialWarrior = new classCreator('EWarrior', 10, 100, 10, 1000, 6, false, \"e1\", [650, 500], 20);\nconst weakWarrior = new classCreator('EWarrior', 10, 60, 10, 1000, 8, false, \"e1\", [300, 400], 20);\nconst warrior2 = new classCreator('EWarrior', 10, 60, 10, 1000, 8, false, \"e1\", [300, 400], 20);\nconst warrior3 = new classCreator('EWarrior', 10, 60, 10, 1000, 8, false, \"e3\", [1000, 100], 20); // fix\nconst EWarrior = new classCreator('EWarrior', 10, 120, 10, 1000, 10, false, \"e1\", [300, 400], 20);\n\n// level 1\nexport const intro = [punchingBag];\n\n// level 2\nexport const healIntro = [tutorialWarrior, tutorialCleric];\n\n// level 3\nexport const rangedIntro = [tutorialWarrior, tutorialCleric, tutorialWizard];\n\n// level 4\nexport const puttinItAllTogetha = [tutorialWarrior, tutorialCleric, tutorialWizard, tutorialRogue];\n\n// level 5\nexport const ezDoppelganger = [ghettoWizard, loserRogue, weakWarrior, dumbCleric];\n\n// level 6\nexport const level3 = [wizard2, wizard3, cleric2, cleric3];\n\n// level 7\nexport const level2 = [rogue2, rogue3, warrior2, warrior3];\n\n// level 8\nexport const doppelganger = [EWizard, ERogue, EWarrior, ECleric];\n","class Entity { // this. is selectedChar\n    constructor(klass=\"\", range=0, baseHP=0, ms=0, attackSpeed=0, attackDMG, allied, img=\"\", pos=[0, 0], defense=0, abilities=[]) {\n        this.klass = klass;\n\n        this.range = range;\n        this.baseHP = baseHP;\n        this.hp = this.baseHP;\n        this.baseMS = ms; // speed / time\n        this.ms = this.baseMS;\n        this.allied = allied; // true === player character\n        this.pos = pos;\n        this.basePos = []; this.basePos[0] = pos[0]; this.basePos[1] = pos[1];\n        this.baseAS = attackSpeed;\n        this.as = this.baseAS;\n        this.baseDMG = attackDMG;\n        this.dmg = this.baseDMG;\n        this.defense = defense;\n\n        this.abilities = abilities;\n        this.abilityAvailable = [true, true, true, true];\n\n        this.imgName = img;\n        this.img; // base standing image\n        this.attackImages; // cycle through array of images\n        this.moveImages; // cycle through array of images\n        this.baseImg; // standard stand image\n        this.container;\n\n        this.currentAction;\n        this.currentAnimation;\n        this.imgCycle = 0;\n\n        this.target;\n\n        this.allies;\n        this.enemies;\n\n        this.movingOutTheWay = false;\n\n        this.observer;\n\n        window.addEventListener('load', () => {\n            this.addInlineStyle();\n        });\n    }\n\n    addInlineStyle() {\n        this.img = document.getElementsByClassName(this.imgName + \"-image-display\")[0];\n        this.baseImg = document.getElementsByClassName(this.klass)[0];\n        this.img.src = this.baseImg.src;\n        this.attackImages = document.getElementsByClassName(this.klass);\n        this.container = document.getElementById(`${this.imgName}-display`);\n        this.container.style.opacity = 0; // fading in so started at op 0\n        this.container.style.display = 'none';\n        this.img.style.display = \"\";\n        this.container.style.left = this.pos[0] + \"px\";\n        this.container.style.top = this.pos[1] + \"px\";\n    }\n\n    vectorToScalar(endPos) {\n        const deltaX = this.pos[0] - endPos[0];\n        const deltaY = this.pos[1] - endPos[1];\n        if (Math.abs(deltaX) + Math.abs(deltaY) === 0) {\n            return ([0, 0, 0]);\n        }\n        let xChange = -1 * this.ms * (deltaX / (Math.abs(deltaX) + Math.abs(deltaY)));\n        let yChange = -1 * this.ms * (deltaY / (Math.abs(deltaY) + Math.abs(deltaX)));\n        if (xChange === 0 || xChange === -0) {\n            xChange = 0;\n            const numRepeats = Math.abs(Math.floor(deltaY / yChange));\n            return ([xChange, yChange, numRepeats])\n        }\n        if (yChange === -0) {\n            yChange = 0;\n        }\n        \n        const numRepeats = Math.abs(Math.floor(deltaX / xChange));\n        return ([xChange, yChange, numRepeats])\n    }\n\n    move(endPos, attackOnFinish = false) {\n        this.movingOutTheWay = true;\n        clearInterval(this.currentAction);\n        clearInterval(this.currentAnimation);\n        this.img.src = this.baseImg.src;\n        endPos[0] = Math.floor(endPos[0] - (this.img.width));\n        endPos[1] = Math.floor(endPos[1] - (this.img.height * (3/4)));\n        let pos = this.pos;\n        let posChange = this.vectorToScalar(endPos);\n        // console.log(\"pos change on move\", posChange);\n        const bigDiv = document.getElementById('game-container');\n        const difference = Math.floor((window.innerWidth - bigDiv.offsetWidth) / 2);\n        const checker = difference + Math.floor(bigDiv.offsetWidth);\n        if (pos[0] - endPos[0] < 0) {\n            this.img.style.transform = \"scaleX(1)\";\n        } else {\n            this.img.style.transform = \"scaleX(-1)\";\n        }\n        this.currentAction = setInterval(() => frame(this), 20);\n        function frame(self) {\n            if (posChange[2] === 0) {\n            // close animation\n                clearInterval(self.currentAction);\n                self.movingOutTheWay = false;\n                pos[0] = Math.floor(pos[0]); pos[1] = Math.floor(pos[1]);\n                if (attackOnFinish) {\n                    // console.log('self in move end: ', self);\n                    self.autoAttack(attackOnFinish); // needs editing\n                }\n            } else { // need to add something for if (attackOnFinish) then update move destination to be the target's new position (with the modifiers)\n            // begin some kind of animation\n                pos[0] += posChange[0]; pos[1] += posChange[1];\n                if (pos[0] + Math.floor((3 * self.img.width) / 2) + 50 > checker) { pos[0] = checker - (Math.floor((3 * self.img.width) / 2) + 50);}\n                if (pos[0] < 15) {pos[0] = 15;}\n                if (pos[1] + Math.floor(self.img.height) > 800) { pos[1] = 800 - Math.floor(self.img.height);}\n                if (pos[1] < 15) {pos[1] = 15;}\n                // console.log('posChange: ', posChange);\n                // console.log('pos: ', pos);\n\n                self.container.style.top = Math.floor(pos[1]) + 'px';\n                self.container.style.left = Math.floor(pos[0]) + 'px';\n                posChange[2] -= 1;\n            }\n        }\n    }\n\n    withinAttackRange(target) {\n        // console.log('this in withinAttackRange: ', this);\n        if (this.range === 'infinite') { return true; }\n        // rectangle box for melee\n        const widthAddition = Math.floor((this.img.width / 2) + (target.img.width / 2));\n        if (this.pos[0] > target.pos[0] - widthAddition - this.range && this.pos[0] < target.pos[0] + widthAddition + this.range) {\n            const heightAddition = Math.floor(this.img.height / 4);\n            // console.log(\"this pos: \", this.pos);\n            // console.log(\"target pos: \", target.pos);\n            if (this.pos[1] > target.pos[1] - heightAddition && this.pos[1] < target.pos[1] + heightAddition) {\n                // console.log('within melee range');\n                return true;\n            }\n        }\n        // console.log('outside of range');\n        return false;\n    }\n\n    killEntitiy(entity) {\n        // console.log(entity.klass, \"killed\");\n        clearInterval(entity.currentAction);\n        clearInterval(entity.currentAnimation);\n        entity.img.src = entity.baseImg.src;\n        entity.hp = -100;\n        entity.container.style.display = \"none\";\n    }\n\n    animateAttack() {\n        if (this.attackImages) {\n            this.imgCycle += 1;\n            this.imgCycle = this.imgCycle % 4;\n            this.img.src = this.attackImages[this.imgCycle].src;\n        }\n    }\n\n    setHpBars() {\n        const leftBar = document.getElementById(`${this.imgName}-hp-left`);\n        const rightBar = document.getElementById(`${this.imgName}-hp-right`);\n        let leftWidth = Math.floor((this.hp / this.baseHP) * 100);\n        let rightWidth = 100 - leftWidth;\n        if (leftWidth < 0) leftWidth = 0;\n        if (rightWidth < 0) rightWidth = 0;\n        leftBar.style.width = leftWidth + '%';\n        rightBar.style.width = rightWidth + '%';\n    }\n\n    setTargetAndAttack() {\n        // console.log(this.klass, \"has finished attacking\", this.target.klass);\n\n        if (this.baseDMG > 0) {\n            this.enemies = shuffle(this.enemies);\n            for (let i = 0; i < this.enemies.length; i++) {\n                if (this.enemies[i].hp > 0) {\n                    this.target = this.enemies[i];\n                }\n            }\n            if (this.target.hp < 0) { return; }\n        } else {\n            this.allies = shuffle(this.allies);\n            for (let i = 0; i < this.allies.length; i++) {\n                if (this.allies[i].hp > 0) {\n                    this.target = this.allies[i];\n                }\n            }\n            if (this.target.hp < 0) { return; }\n        }\n        // console.log(this.klass, \"is now attacking\", this.target.klass);\n        this.autoAttack(this.target);\n    }\n\n    charactersStacked() {\n        for (let i = 0; i < this.allies.length; i++) {\n            if (!this.allies[i].movingOutTheWay) {                \n                const widthAddition = Math.floor(this.img.width / 2);\n                if (this.pos[0] > this.allies[i].pos[0] - widthAddition && this.pos[0] < this.allies[i].pos[0] + widthAddition) {\n                    const heightAddition = Math.floor(this.img.height / 2);\n                    if (this.pos[1] > this.allies[i].pos[1] - heightAddition && this.pos[1] < this.allies[i].pos[1] + heightAddition) {\n                        // console.log(this.klass, \"is moving to avoid\", this.allies[i].klass);\n                        return true;\n                    }\n                }\n            }\n        }\n        return false;\n    }\n\n    trackTarget() { // hot code\n        clearInterval(this.currentAction);\n        clearInterval(this.currentAnimation);\n        this.img.src = this.baseImg.src;\n        const bigDiv = document.getElementById('game-container');\n        const difference = Math.floor((window.innerWidth - bigDiv.offsetWidth) / 2);\n        const checker = difference + Math.floor(bigDiv.offsetWidth);\n        this.currentAction = setInterval(() => move(this), 20);\n        function move(self) {\n            if (self.withinAttackRange(self.target)) {\n                clearInterval(self.currentAction);\n                self.autoAttack(self.target);\n                // console.log('auto attack called from track');\n            } else {\n                const pos = self.pos;\n                const movePos = self.target.pos.slice();\n                if (pos[0] - movePos[0] < 0) {\n                    movePos[0] -= self.target.img.width;\n                    self.img.style.transform = \"scaleX(1)\";\n                } else {\n                    movePos[0] += self.target.img.width;\n                    self.img.style.transform = \"scaleX(-1)\";\n                }\n                let posChange = self.vectorToScalar(movePos);\n                pos[0] += posChange[0]; pos[1] += posChange[1];\n                if (pos[0] + Math.floor(self.img.width) > checker) { pos[0] = checker - Math.floor(self.img.width); }\n                if (pos[0] < 15) { pos[0] = 15; }\n                if (pos[1] + Math.floor(self.img.height) > 850) { pos[1] = 850 - Math.floor(self.img.height); }\n                if (pos[1] < 15) { pos[1] = 15; }\n                self.container.style.top = Math.floor(pos[1]) + 'px';\n                self.container.style.left = Math.floor(pos[0]) + 'px';\n            }\n        }\n    }\n\n    beginAttack(targetChar) {\n        // make some kind of animation start\n        this.clearIntervals();\n        this.currentAnimation = setInterval(() => this.animateAttack(this), Math.floor(this.as / 4))\n        this.currentAction = setInterval(() => attack(this), this.as);\n        function attack(selectedChar) {\n            if (targetChar.hp <= 0) {\n                selectedChar.clearIntervals();\n                if (!selectedChar.allied) {\n                    // chose another hero to attack\n                    selectedChar.setTargetAndAttack();\n                    // maybe add something in for player to auto target upon deaths ?\n                }\n                return;\n            }\n            if (!selectedChar.withinAttackRange(targetChar)) {\n                selectedChar.trackTarget();\n                return;\n            } else {\n                targetChar.hp -= selectedChar.dmg;\n                if (targetChar.hp > targetChar.baseHP) { targetChar.hp = targetChar.baseHP; }\n                if (!targetChar.allied && selectedChar.allied && targetChar.baseDMG > 0 && selectedChar.defense > targetChar.target.defense) {\n                    targetChar.target = selectedChar;\n                    targetChar.clearIntervals();\n                    targetChar.autoAttack(targetChar.target);\n                }\n                targetChar.setHpBars();\n                \n                if (targetChar.hp <= 0) {\n                    selectedChar.clearIntervals();\n                    // console.log(targetChar, ' hp ', targetChar.hp);\n                    selectedChar.killEntitiy(targetChar);\n                    if (!selectedChar.allied) {\n                        // chose another hero to attack\n                        selectedChar.setTargetAndAttack();\n                    }\n                }\n                // console.log(\"border style: \", targetChar.img.style.border);\n                if (targetChar.img.style.border !== \"5px solid gold\") {\n                    if (selectedChar.baseDMG > 0) {\n                        targetChar.img.style.border = \"3px solid red\";\n                    } else {\n                        targetChar.img.style.border = \"3px solid green\";\n                        if (targetChar.img.style.display === 'none') {\n                            console.log(selectedChar);\n                        }\n                    }\n                    let borderInterval = setInterval(() => {\n                        if (targetChar.img.style.border !== \"5px solid gold\") {\n                            targetChar.img.style.border = \"none\";\n                        }\n                        clearInterval(borderInterval);\n                    }, 500);\n                }\n                if (selectedChar.range !== 'infinite' && selectedChar.charactersStacked()) {\n                    selectedChar.movingOutTheWay = true;\n                    const addition = Math.floor(selectedChar.img.width / 2);\n                    if (selectedChar.img.style.transform === \"scaleX(-1)\") {\n                        // move to left side of target\n                        selectedChar.img.style.transform = \"scaleX(1)\";// - (addition / 4)\n                        selectedChar.move([targetChar.pos[0], targetChar.pos[1] + Math.floor(targetChar.img.height * 3 / 4)], targetChar)\n                    } else {\n                        // move to right side of target;\n                        selectedChar.img.style.transform = \"scaleX(-1)\";\n                        selectedChar.move([targetChar.pos[0] + (4 * addition), targetChar.pos[1] + Math.floor(targetChar.img.height * 3 / 4)], targetChar)\n                    }\n                }\n            }\n        }\n    }\n\n    autoAttack(targetChar) {\n        // console.log('auto attack target: ', targetChar);\n        if (this.allied) { this.target = targetChar; } // can refactor out targets\n        if (this.withinAttackRange(targetChar)) {\n            if (this.pos[0] < targetChar.pos[0]) {\n                this.img.style.transform = \"scaleX(1)\";\n            } else {\n                this.img.style.transform = \"scaleX(-1)\";\n            }\n            this.beginAttack(targetChar);\n        } else {\n            this.trackTarget();\n        }\n    }\n\n    clearIntervals() {\n        clearInterval(this.currentAction);\n        clearInterval(this.currentAnimation);\n        this.img.src = this.baseImg.src;\n    }\n\n    useAbility(n) {\n        if (!this.abilityAvailable[n]) {\n            return;\n        }\n        console.log('ability', n, 'used');\n        this.abilityAvailable[n] = false;\n        const ab = this.abilities[n];\n        console.log('ability: ', ab);\n        const cdTime = ab(this);\n        console.log('seconds for ability cd: ', cdTime);\n        let CDTimer = setInterval(() => {\n            this.abilityAvailable[n] = true;\n            console.log(this.imgName, ' ability ', n, ' off CD');\n            clearInterval(CDTimer);\n        }, (cdTime * 1000));\n    }\n\n}\n\nfunction shuffle(a) {\n    for (let i = a.length - 1; i > 0; i--) {\n        const j = Math.floor(Math.random() * (i + 1));\n        [a[i], a[j]] = [a[j], a[i]];\n    }\n    return a;\n}\n\nexport default Entity;","import loadLevel from './screen_controllers/entity_controller';\n\nfunction slowFade(element, action = null) { let op = 80; let timerDown = setInterval(function () {if (op <= 0) { clearInterval(timerDown);\n    element.style.display = 'none'; if (action) { action(); } } element.style.opacity = op / 40; op -= 1;}, 50);}\n\n// const handleLoadCharClick = (e) => {\n//     switch \n// }\n\nwindow.addEventListener('load', () => {\n    // const abilityBoxes = document.getElementsByClassName('inner-ability-div');\n\n    const gameTag = document.getElementById('game-tag');\n    gameTag.style.opacity = 0;\n    gameTag.style.display = '';\n    \n    const wiz = document.getElementById('wizard-base-img');const ro = document.getElementById('rogue-base-img');\n    const war = document.getElementById('warrior-base-img');const cle = document.getElementById('cleric-base-img');\n    const charArr = [wiz, ro, war, cle];\n    // const controlsContainer = document.getElementsByClassName('controls-display')[0];\n    const closeButton = document.getElementsByClassName('close')[0];\n    const hButtons = document.getElementsByClassName('h-button');\n    // const startGameButton = document.getElementById('start-game-button');\n    // const controlsButton = document.getElementById('game-controls-button');\n    const keybindContainer = document.getElementById('keybindings-container');\n    const levelButtonContainer = document.getElementById('level-button-container');\n    const levelButtons = document.getElementsByClassName('level-button');\n    const backgroundImage = document.getElementById('background-image');\n    const titleBackground = document.getElementById('title');\n\n    function secondAction() {\n        const gTContainer = document.getElementById('game-tag-container');\n        gTContainer.style.display = 'none';\n        function closeAction() {\n            // controlsContainer.style.display = 'none';\n            for (let i = 0; i < hButtons.length; i++) { hButtons[i].style.display = ''; }\n            // controlsButton.style.display = '';\n            levelButtonContainer.style.display = 'none';\n            keybindContainer.style.display = 'none';\n            closeButton.style.display = 'none';\n            for (let i = 0; i < 4; i++) {\n                charArr[i].style.display = '';\n            }\n            backgroundImage.src = titleBackground.src;\n            backgroundImage.style.display = '';\n        }\n        closeAction();\n        for (let i = 0; i < levelButtons.length; i++) {\n            levelButtons[i].addEventListener('click', () => { \n                closeButton.style.display = 'none';\n                // closeButton.removeEventListener('click', closeAction);\n                for (let i = 0; i < 4; i++) {\n                    charArr[i].style.display = 'none';\n                }\n                backgroundImage.style.display = 'none';\n                loadLevel(i); \n            })\n        }\n        levelButtons[0].style.opacity = 100;\n        levelButtons[0].style.cursor = 'pointer';\n        closeButton.addEventListener('click', closeAction)\n        hButtons[0].addEventListener('click', () => {\n            for (let i = 0; i < hButtons.length; i++) { hButtons[i].style.display = 'none'; }\n            levelButtonContainer.style.display = '';\n            closeButton.style.display = '';\n            for (let i = 0; i < 4; i++) {\n                charArr[i].style.display = 'none';\n            }\n            backgroundImage.style.display = 'none';\n        })\n        hButtons[1].addEventListener('click', () => {\n            for (let i = 0; i < hButtons.length; i++) { hButtons[i].style.display = 'none'; }\n            keybindContainer.style.display = '';\n            closeButton.style.display = '';\n            for (let i = 0; i < 4; i++) {\n                charArr[i].style.display = 'none';\n            }\n            backgroundImage.style.display = 'none';\n        })\n    }\n    slowFade(gameTag, secondAction);\n})","import * as charactersObj from '../entities/character';\r\nimport * as enemiesObj from '../entities/enemy';\r\n\r\nconst charactersArr = Object.values(charactersObj);\r\nconst enemiesArr = Object.values(enemiesObj);\r\n\r\nclass Level {\r\n    constructor(name, enemyList, message=\"\", actionChanges=()=>{}, characterList=charactersArr[1]) {\r\n        this.name = name;\r\n        this.enemyList = enemyList;\r\n        this.message = message;\r\n        this.action = actionChanges;\r\n        this.characterList = characterList;\r\n        // this.actionExpended = false;\r\n    }\r\n}\r\n\r\nfunction modP(width, percent) {\r\n    return (Math.floor(width * percent));\r\n}\r\n\r\nfunction applyMod(entity, mod, x=true) {\r\n    const container = document.getElementById('game-container');\r\n    const width = Math.floor(container.offsetWidth);\r\n    const height = Math.floor(container.offsetHeight);\r\n    if (x) {\r\n        entity.pos[0] = modP(width, (mod/100));\r\n        entity.basePos[0] = entity.pos[0];\r\n    } else {\r\n        entity.pos[1] = modP(height, (mod / 100));\r\n        entity.basePos[1] = entity.pos[1];\r\n    }\r\n}\r\n\r\nconst actionOne = () => { \r\n    applyMod(charactersArr[0][0], 35);\r\n    applyMod(charactersArr[0][1], 15);\r\n    applyMod(charactersArr[0][2], 15);\r\n    applyMod(charactersArr[0][3], 55);\r\n    applyMod(enemiesArr[0][0], 55);}\r\nconst actionTwo = () => {\r\n    applyMod(enemiesArr[1][0], 55);\r\n    applyMod(enemiesArr[1][1], 75);\r\n}\r\nconst actionThree = () => {\r\n    applyMod(enemiesArr[2][2], 75);\r\n}\r\nconst actionFour = () => {\r\n    applyMod(enemiesArr[3][3], 35);\r\n    \r\n}\r\nconst actionFive = () => {\r\n    // WaCWiR\r\n    applyMod(charactersArr[1][0], 65);\r\n    applyMod(charactersArr[1][1], 45);\r\n    applyMod(charactersArr[1][2], 45);\r\n    applyMod(charactersArr[1][3], 25);\r\n    applyMod(charactersArr[1][0], 45, false);\r\n    applyMod(charactersArr[1][1], 25, false);\r\n    applyMod(charactersArr[1][2], 65, false);\r\n    applyMod(charactersArr[1][3], 45, false);\r\n    // WiRWaC\r\n    applyMod(enemiesArr[4][0], 10);\r\n    applyMod(enemiesArr[4][1], 15);\r\n    applyMod(enemiesArr[4][2], 75);\r\n    applyMod(enemiesArr[4][3], 80);\r\n    applyMod(enemiesArr[4][0], 20, false);\r\n    applyMod(enemiesArr[4][1], 65, false);\r\n    applyMod(enemiesArr[4][2], 65, false);\r\n    applyMod(enemiesArr[4][3], 20, false);\r\n}\r\nconst actionSix = () => {\r\n    // WaCWiR\r\n    applyMod(charactersArr[1][0], 60);\r\n    applyMod(charactersArr[1][1], 60);\r\n    applyMod(charactersArr[1][2], 30);\r\n    applyMod(charactersArr[1][3], 30);\r\n    applyMod(charactersArr[1][0], 60, false);\r\n    applyMod(charactersArr[1][1], 30, false);\r\n    applyMod(charactersArr[1][2], 30, false);\r\n    applyMod(charactersArr[1][3], 60, false);\r\n    // WiRWaC\r\n    applyMod(enemiesArr[5][0], 5);\r\n    applyMod(enemiesArr[5][1], 45);\r\n    applyMod(enemiesArr[5][2], 45);\r\n    applyMod(enemiesArr[5][3], 85);\r\n    applyMod(enemiesArr[5][0], 45, false);\r\n    applyMod(enemiesArr[5][1], 10, false);\r\n    applyMod(enemiesArr[5][2], 70, false);\r\n    applyMod(enemiesArr[5][3], 45, false);\r\n}\r\nconst actionSeven = () => {\r\n    applyMod(charactersArr[1][0], 50);\r\n    applyMod(charactersArr[1][1], 10);\r\n    applyMod(charactersArr[1][2], 35);\r\n    applyMod(charactersArr[1][3], 65);\r\n    applyMod(charactersArr[1][0], 20, false);\r\n    applyMod(charactersArr[1][1], 45, false);\r\n    applyMod(charactersArr[1][2], 60, false);\r\n    applyMod(charactersArr[1][3], 35, false);\r\n    applyMod(enemiesArr[6][0], 25);\r\n    applyMod(enemiesArr[6][1], 10);\r\n    applyMod(enemiesArr[6][2], 80);\r\n    applyMod(enemiesArr[6][3], 45);\r\n    applyMod(enemiesArr[6][0], 15, false);\r\n    applyMod(enemiesArr[6][1], 45, false);\r\n    applyMod(enemiesArr[6][2], 45, false);\r\n    applyMod(enemiesArr[6][3], 70, false);\r\n}\r\nconst actionEight = () => {\r\n    // WaCWiR\r\n    applyMod(charactersArr[1][0], 60);\r\n    applyMod(charactersArr[1][1], 60);\r\n    applyMod(charactersArr[1][2], 30);\r\n    applyMod(charactersArr[1][3], 30);\r\n    applyMod(charactersArr[1][0], 60, false);\r\n    applyMod(charactersArr[1][1], 30, false);\r\n    applyMod(charactersArr[1][2], 30, false);\r\n    applyMod(charactersArr[1][3], 60, false);\r\n    // WiRWaC\r\n    applyMod(enemiesArr[7][0], 45);\r\n    applyMod(enemiesArr[7][1], 10);\r\n    applyMod(enemiesArr[7][2], 80);\r\n    applyMod(enemiesArr[7][3], 45);\r\n    applyMod(enemiesArr[7][0], 15, false);\r\n    applyMod(enemiesArr[7][1], 45, false);\r\n    applyMod(enemiesArr[7][2], 45, false);\r\n    applyMod(enemiesArr[7][3], 70, false);\r\n}\r\n\r\nexport const levelOne = new Level('One', enemiesArr[0], \r\n    \"Click on the stick figure, the warrior, in black to select it. Then click on the red stick figure enemy to attack it or click anywhere on the map to move there. Once an action is performed, the character is de-selected.\",\r\n    actionOne, [charactersArr[0][0]]);\r\nexport const levelTwo = new Level('Two', enemiesArr[1],\r\n    \"The character with a staff is a cleric healer. Click on it and then on an allied unit or itself to begin healing them. De-select a character without making an action by clicking the Red button on the top right. Defeat all enemies to clear the level.\",\r\n    actionTwo, [charactersArr[0][0], charactersArr[0][1]]);\r\nexport const levelThree = new Level('Three', enemiesArr[2],\r\n    \"The character with the blue hat, the wizard, can attack enemies from any range. Click on it then on an enemy to begin attacking immediately. \\nAttacking an enemy with the Warrior will cause them to focus their attacks on him.\",\r\n    actionThree, [charactersArr[0][0], charactersArr[0][1], charactersArr[0][2]]);\r\nexport const levelFour = new Level('Four', enemiesArr[3],\r\n    \"The newest character addition is the rogue with the daggers. Each character has a unique role. The Warrior is the best tank, the rogue the fastest attacker, the wizard the most versitile damage dealer, and the cleric the healer.\",\r\n    actionFour, charactersArr[0]);\r\nexport const levelFive = new Level('Five', enemiesArr[4], \r\n    \"The tutorial levels are over. Time for more of a challenge\",\r\n    actionFive);\r\nexport const levelSix = new Level('Six', enemiesArr[5], \"Wizards and Clerics\", actionSix);\r\nexport const levelSeven = new Level('Seven', enemiesArr[6], \"All melee\", actionSeven);\r\nexport const levelEight = new Level('Eight', enemiesArr[7], \"Fight yourself\", actionEight);","import * as levelsObj from '../levels/level';\r\nimport {fadeIn, fadeOut} from './fades';\r\n\r\nlet hasBeenLoaded = false;\r\nlet levelHasEnded = false;\r\n\r\nconst levels = Object.values(levelsObj);\r\nlet currentLevelNumber = 0;\r\nlet maxLevelNumber = 7;\r\nconst highestLevelAvailable = 8;\r\n\r\nlet selectedChar;\r\n\r\nlet livingEnemies = {};\r\nlet livingChars = {};\r\n \r\nfunction addDeathListener(entity) {\r\n    entity.observer = new MutationObserver(function(mutations) {\r\n        mutations.forEach(function (mutationRecord) {\r\n            if (mutationRecord.target.style.display === 'none') {\r\n                // console.log(entity.imgName, 'style === none');\r\n                if (entity.allied) {\r\n                    delete livingChars[entity.imgName];\r\n                } else {\r\n                    delete livingEnemies[entity.imgName];\r\n                }\r\n                const c = Object.values(livingChars);\r\n                const en = Object.values(livingEnemies);\r\n                if (c.length === 0 || en.length === 0) {\r\n                    if (!levelHasEnded) {\r\n                        // console.log('end game called');\r\n                        endGame(c, en, currentLevelNumber);\r\n                    }\r\n                    // console.log('game should have ended');\r\n                    levelHasEnded = true;\r\n                }\r\n            }\r\n        });\r\n    })\r\n}\r\n\r\nfunction addEntityEvents(entity, allies, enemies) {\r\n    if (entity.imgName != \"\") {\r\n        if (!entity.observer) {\r\n            addDeathListener(entity);\r\n        }\r\n        entity.enemies = enemies;\r\n        const cloneArr = allies.slice();\r\n        let selfIndex;\r\n        for (let i = 0; i < cloneArr.length; i++) {\r\n            if (cloneArr[i].imgName === entity.imgName) { selfIndex = i; }\r\n        }\r\n        // remove self from allies list to prevent moving out of self image (healers excluded)\r\n        if (entity.baseDMG > 0) { cloneArr.splice(selfIndex, 1); }\r\n        entity.allies = cloneArr;\r\n    } else {\r\n        // console.log('broken image passed in for', entity.imgName);\r\n    }\r\n}\r\n\r\nfunction deSelect() {\r\n    // console.log('de-selected')\r\n    if (selectedChar) {\r\n        selectedChar.img.style.border = 'none';\r\n        selectedChar = null;\r\n    }\r\n}\r\n\r\nfunction beginCurrentLevel() {\r\n    const beginLevelButton = document.getElementById('begin-level-button');\r\n    fadeOut(beginLevelButton);\r\n    const level = levels[currentLevelNumber];\r\n    beginLevel(level.characterList, level.enemyList, currentLevelNumber);\r\n}\r\n\r\nfunction returnToSelectPage() {\r\n    document.getElementById('return-button').style.display = 'none';\r\n    document.getElementById('tutorial-message').style.display = 'none';\r\n    document.getElementById(`level-name-display`).style.display = 'none';\r\n    document.getElementById('begin-level-button').style.display = 'none';\r\n    document.getElementById('level-button-container').style.display = '';\r\n    document.getElementById('close-button').style.display = '';\r\n}\r\n\r\nfunction selectChar(entity) {\r\n    if (!entity || entity.img.style.display === 'none') {\r\n        return;\r\n    }\r\n    if (!selectedChar || selectedChar.hp < 0) {\r\n        selectedChar = entity;\r\n        entity.img.style.border = '5px solid gold';\r\n        // console.log('selected char: ', selectedChar.imgName);\r\n    } else if (selectedChar.baseDMG < 0) {\r\n        selectedChar.autoAttack(entity);\r\n        selectedChar.img.style.border = 'none';\r\n        selectedChar = null;\r\n    }\r\n}\r\n\r\nfunction selectEnemy(entity) {\r\n    if (entity.img.style.display === 'none' || !selectedChar || selectedChar.hp < 0) {\r\n        selectedChar = null;\r\n        return;\r\n    }\r\n    if (selectedChar.allied && selectedChar.baseDMG > 0) {\r\n        clearInterval(selectedChar.currentAction);\r\n        clearInterval(selectedChar.currentAnimation);\r\n        selectedChar.autoAttack(entity);\r\n        selectedChar.img.style.border = 'none';\r\n        selectedChar = null;\r\n    }\r\n}\r\n\r\nconst allyClickEvents = (e) => {\r\n    // console.log('character click');\r\n    const entityName = e.target.className.slice(0, 2);\r\n    const entity = livingChars[entityName];\r\n    e.stopPropagation();\r\n    selectChar(entity);\r\n}\r\n\r\nconst enemyClickEvents = (e) => {\r\n    const entityName = e.target.className.slice(0, 2);\r\n    const entity = livingEnemies[entityName];\r\n    e.stopPropagation();\r\n    selectEnemy(entity);\r\n}\r\n\r\nfunction keydownEvent (e) {\r\n    let entity;\r\n    if (e.key === '1' || e.key === '2' || e.key === '3' || e.key === '4') { // char selection keydown\r\n        entity = livingChars['a' + e.key];\r\n        if (entity) { selectChar(entity); }\r\n    } else if (e.key === '5' || e.key === '6' || e.key === '7' || e.key === '8') {\r\n        entity = livingEnemies['e' + (e.key - 4)];\r\n        if (entity) { selectEnemy(entity); }\r\n    } else {\r\n        console.log('invalid key press');\r\n    }\r\n}\r\n\r\nfunction abilityClick(n) {\r\n    if (selectedChar) {\r\n        selectedChar.useAbility(n);\r\n    }\r\n}\r\n\r\nfunction setAbilityBoxes() {\r\n    const abilityBoxes = document.getElementsByClassName('inner-ability-div');\r\n    for (let i = 0; i < abilityBoxes.length; i++) {\r\n        abilityBoxes[i].addEventListener('click', () => abilityClick(i));\r\n    }\r\n}\r\n\r\nfunction initializeGameOpening() {\r\n    document.getElementById('return-button').addEventListener('click', returnToSelectPage);\r\n    const deSelectButton = document.getElementById('test');\r\n    deSelectButton.addEventListener('click', deSelect);\r\n\r\n    const beginLevel = document.getElementById('begin-level-button');\r\n    beginLevel.addEventListener('click', beginCurrentLevel)\r\n\r\n    // end click position\r\n    const gameContainer = document.getElementById('game-container');\r\n    gameContainer.addEventListener(\"click\", (e) => {\r\n        // console.log(e);\r\n        if (selectedChar) {\r\n            if (selectedChar.hp < 0) {\r\n                selectedChar = null;\r\n                return;\r\n            }\r\n            clearInterval(selectedChar.currentAction);\r\n            clearInterval(selectedChar.currentAnimation);\r\n            selectedChar.img.style.border = 'none';\r\n            selectedChar.move([e.x, e.y]);\r\n            selectedChar = null;\r\n        }\r\n    })\r\n\r\n    window.addEventListener('keypress', (e) => {\r\n        // console.log(e);\r\n        keydownEvent(e);\r\n    })\r\n    setAbilityBoxes();\r\n\r\n    hasBeenLoaded = true;\r\n}\r\n\r\n\r\n\r\nfunction loadLevel(levelNumber) {\r\n    if (!hasBeenLoaded) {\r\n        initializeGameOpening();\r\n    }\r\n    if (levelNumber > maxLevelNumber) {\r\n        return;\r\n    }\r\n    const level = levels[levelNumber];\r\n    levelHasEnded = false;\r\n    currentLevelNumber = levelNumber;\r\n    level.action();\r\n    // console.log('level selected: ', levelNumber);\r\n    document.getElementById('return-button').style.display = '';\r\n    const levelButtonContainer = document.getElementById('level-button-container');\r\n    levelButtonContainer.style.display = 'none';\r\n    const levelNameDisp = document.getElementById(`level-name-display`);\r\n    levelNameDisp.style.opacity = 0;\r\n    levelNameDisp.style.display = '';\r\n    levelNameDisp.innerHTML = 'Level ' + level.name;\r\n    const levelMessage = document.getElementById('tutorial-message');\r\n    levelMessage.innerHTML = level.message;\r\n    levelMessage.style.opacity = 0;\r\n    levelMessage.style.display = '';\r\n    // const secondAction = () => beginLevel(level.characterList, level.enemyList, levelNumber);\r\n    fadeIn(levelNameDisp);\r\n    const levelNameAction = () => { fadeIn(beginLevel); }\r\n    const action = () => fadeOut(levelNameDisp, levelNameAction);\r\n    const beginLevel = document.getElementById('begin-level-button');\r\n    beginLevel.style.opacity = 0;\r\n    beginLevel.style.display = '';\r\n    fadeIn(levelMessage, action);\r\n}\r\n\r\nfunction beginLevel(charactersArr, enemiesArr, levelNumber) {\r\n    setInitialTargets(charactersArr, enemiesArr);\r\n    loadInCharacters(charactersArr, enemiesArr, levelNumber);\r\n}\r\n\r\nfunction setInitialTargets(chars, enemies) {\r\n    for (let i = 0; i < enemies.length; i++) {\r\n        if (enemies[i].baseDMG > 0) {\r\n            const targetIndex = Math.floor(Math.random() * chars.length);\r\n            enemies[i].target = chars[targetIndex];\r\n        } else {\r\n            const targetIndex = Math.floor(Math.random() * enemies.length);\r\n            enemies[i].target = enemies[targetIndex];\r\n        }\r\n        // console.log(enemies[i].imgName, \"has target set to\", enemies[i].target);\r\n    }\r\n}\r\n\r\nfunction loadInCharacters(charactersArr, enemiesArr, levelNumber) {\r\n    document.getElementById('return-button').style.display = 'none';\r\n    const deSelectButton = document.getElementById('test');\r\n    deSelectButton.style.opacity = 0;\r\n    deSelectButton.style.display = '';\r\n    fadeIn(deSelectButton);\r\n    const backgroundImg = document.getElementById('background-image');\r\n    if (levelNumber < 4) {\r\n        backgroundImg.src = document.getElementById('forest').src;\r\n    } else if (levelNumber < 7) {\r\n        backgroundImg.src = document.getElementById('snowy').src;\r\n    } else {\r\n        backgroundImg.src = document.getElementById('dungeon').src;\r\n    }\r\n    backgroundImg.style.opacity = 0;\r\n    backgroundImg.style.display = '';\r\n    fadeIn(backgroundImg);\r\n    for (let i = 0; i < charactersArr.length; i++) {\r\n        if (!charactersArr[i].observer) {\r\n            addEntityEvents(charactersArr[i], charactersArr, enemiesArr);\r\n        }\r\n        livingChars[charactersArr[i].imgName] = charactersArr[i];\r\n        charactersArr[i].container.style.top = charactersArr[i].pos[1] + 'px';\r\n        charactersArr[i].container.style.left = charactersArr[i].pos[0] + 'px';\r\n        charactersArr[i].container.style.opacity = 0;\r\n        charactersArr[i].container.style.display = '';\r\n        const hpBar = document.getElementById(`${charactersArr[i].imgName}-hp-bar`);\r\n        hpBar.style.display = \"flex\";\r\n        const actionEvent = () => { charactersArr[i].container.addEventListener('click', allyClickEvents);}\r\n        charactersArr[i].img.src = charactersArr[i].baseImg.src;\r\n        fadeIn(charactersArr[i].container, actionEvent);\r\n        observerObserve(charactersArr[i]);\r\n    }\r\n    for (let i = 0; i < enemiesArr.length; i++) {\r\n        if (!enemiesArr[i].observer) {\r\n            addEntityEvents(enemiesArr[i], enemiesArr, charactersArr);\r\n        }\r\n        livingEnemies[enemiesArr[i].imgName] = enemiesArr[i];\r\n        enemiesArr[i].container.style.top = enemiesArr[i].pos[1] + 'px';\r\n        enemiesArr[i].container.style.left = enemiesArr[i].pos[0] + 'px';\r\n        enemiesArr[i].container.style.opacity = 0;\r\n        enemiesArr[i].container.style.display = '';\r\n        const hpBar = document.getElementById(`${enemiesArr[i].imgName}-hp-bar`);\r\n        hpBar.style.display = \"flex\";\r\n        enemiesArr[i].container.addEventListener('click', enemyClickEvents);\r\n        enemiesArr[i].img.src = enemiesArr[i].baseImg.src;\r\n        const action = () => enemiesArr[i].autoAttack(enemiesArr[i].target);\r\n        fadeIn(enemiesArr[i].container, action); // begin attacking target\r\n        observerObserve(enemiesArr[i]);\r\n    }\r\n    \r\n}\r\n\r\nfunction observerObserve(entity) {\r\n    const element = entity.container;\r\n    entity.observer.observe(element, { attributes: true, attributeFilter: ['style'] });\r\n}\r\n\r\n\r\n\r\n\r\nfunction endGame(charsList, enemyList) {\r\n    const levelMessage = document.getElementById('tutorial-message');\r\n    levelMessage.style.display = 'none';\r\n    const deSelectButton = document.getElementById('test');\r\n    deSelectButton.style.display = 'none';\r\n    deSelect();\r\n    const allCharsList = levels[currentLevelNumber].characterList;\r\n    const allEnemyList = levels[currentLevelNumber].enemyList;\r\n    for (let i = 0; i < allCharsList.length; i++) {\r\n        allCharsList[i].observer.disconnect();\r\n        if (allCharsList[i].currentAction) { clearInterval(allCharsList[i].currentAction); }\r\n        if (allCharsList[i].currentAnimation) { clearInterval(allCharsList[i].currentAnimation); }\r\n        allCharsList[i].container.removeEventListener('click', allyClickEvents);\r\n        allCharsList[i].img.src = allCharsList[i].baseImg.src;\r\n    }\r\n    for (let i = 0; i < allEnemyList.length; i++) {\r\n        allEnemyList[i].observer.disconnect();\r\n        if (allEnemyList[i].currentAction) { clearInterval(allEnemyList[i].currentAction); }\r\n        if (allEnemyList[i].currentAnimation) { clearInterval(allEnemyList[i].currentAnimation); }\r\n        allEnemyList[i].container.removeEventListener('click', enemyClickEvents);\r\n        allEnemyList[i].img.src = allEnemyList[i].baseImg.src;\r\n    }\r\n\r\n    const backgroundImg = document.getElementById('background-image');\r\n    fadeOut(backgroundImg);\r\n\r\n    for (let i = 0; i < charsList.length; i++) {\r\n        fadeOut(charsList[i].container);\r\n    }\r\n    for (let i = 0; i < enemyList.length; i++) {\r\n        fadeOut(enemyList[i].container);\r\n    }\r\n    \r\n    let gameFadeTimer = setInterval(() => {\r\n        // console.log('fade called');\r\n        let disp;\r\n        let secondAction;\r\n        if (charsList.length === 0) {\r\n            disp = document.getElementById('game-over-display');\r\n            secondAction = () => resetGame(false);\r\n        } else {\r\n            disp = document.getElementById('game-won-display');\r\n            secondAction = () => resetGame(true);\r\n        }\r\n        disp.style.opacity = 0;\r\n        disp.style.display = '';\r\n        const action = () => fadeOut(disp, secondAction);\r\n        fadeIn(disp, action);\r\n        clearInterval(gameFadeTimer);\r\n    }, 2000);\r\n}\r\n\r\nfunction resetGame(won) {\r\n    livingChars = {};\r\n    livingEnemies = {};\r\n    const levelButtonContainer = document.getElementById('level-button-container');\r\n    levelButtonContainer.style.display = '';\r\n    document.getElementById('close-button').style.display = '';\r\n    if (won && maxLevelNumber === currentLevelNumber) {\r\n        maxLevelNumber++;\r\n        const levelButtons = document.getElementsByClassName('level-button');\r\n        if (levelButtons[maxLevelNumber]) {\r\n            levelButtons[maxLevelNumber].style.opacity = 100 + '%';\r\n            levelButtons[maxLevelNumber].style.cursor = 'pointer';\r\n        }\r\n    }\r\n    // level.characterList, level.enemyList\r\n    // console.log('levels arr: ', levels);\r\n    // console.log('level ', currentLevelNumber, ': ', levels[currentLevelNumber]);\r\n    const levChars = levels[currentLevelNumber].characterList;\r\n    const levEnems = levels[currentLevelNumber].enemyList;\r\n    for (let i = 0; i < levChars.length; i++) {\r\n        levChars[i].hp = levChars[i].baseHP;\r\n        levChars[i].pos[0] = levChars[i].basePos[0]; levChars[i].pos[1] = levChars[i].basePos[1];\r\n        levChars[i].container.style.top = levChars[i].pos[1] + 'px';\r\n        levChars[i].container.style.left = levChars[i].pos[0] + 'px';\r\n        levChars[i].setHpBars();\r\n    }\r\n    for (let i = 0; i < levEnems.length; i++) {\r\n        levEnems[i].hp = levEnems[i].baseHP;\r\n        levEnems[i].pos[0] = levEnems[i].basePos[0]; levEnems[i].pos[1] = levEnems[i].basePos[1];\r\n        levEnems[i].container.style.top = levEnems[i].pos[1] + 'px';\r\n        levEnems[i].container.style.left = levEnems[i].pos[0] + 'px';\r\n        levEnems[i].setHpBars();\r\n    }\r\n}\r\n\r\nexport default loadLevel;","export function fadeOut(element, action = null) {\r\n    let op = 40;\r\n    let timerDown = setInterval(function () {\r\n        if (op <= 0) {\r\n            clearInterval(timerDown);\r\n            element.style.display = 'none';\r\n            if (action) { action(); }\r\n        }\r\n        element.style.opacity = op / 40;\r\n        op -= 1;\r\n        if (element.style.display === 'none') {\r\n            clearInterval(timerDown);\r\n            element.style.opacity = 0;\r\n        }\r\n    }, 50);\r\n}\r\n\r\nexport function fadeIn(element, action = null) {\r\n    let op = 0;\r\n    let timerUp = setInterval(function () {\r\n        if (op >= 40) {\r\n            clearInterval(timerUp);\r\n            if (action) { action(); }\r\n        }\r\n        element.style.opacity = op / 40;\r\n        op += 1;\r\n        if (element.style.display === 'none') {\r\n            clearInterval(timerUp);\r\n            element.style.opacity = 0;\r\n        }\r\n    }, 50);\r\n}"],"sourceRoot":""}